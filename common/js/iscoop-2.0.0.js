var DO;!function(a){!function(b){!function(c){function d(a,b,c){var d=setInterval(function(){a()&&(clearInterval(d),b())},c||250)}function e(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function f(a){var b,c,d;for(d=a.length;d;d-=1)b=Math.floor(Math.random()*d),c=a[d-1],a[d-1]=a[b],a[b]=c;return a}function g(b){function c(){d.off(a.Core.Events.getTouchEvent(),b),d.off(a.Core.Events.getClickEvent(),b),$("#touch_to_skip").remove()}$("#touch_to_skip").remove();var d=$("body").add('<div id="touch_to_skip" style="position: absolute; left: 0; right: 0; width: 100%; height: 100%";></div>');return d.on(a.Core.Events.getTouchEvent(),b),d.on(a.Core.Events.getClickEvent(),b),c}function h(a){for(var b=a.split("."),c=window||this,d=0,e=b.length;d<e;d++)c=c[b[d]];if("function"!=typeof c)throw"[Utils.getReference] Cannot get reference to class : "+a;return c}function i(a){var b=decodeURI((RegExp(a+"=(.+?)(&|$)").exec(location.search)||[,null])[1]);return"null"!=b&&0!=b.length||(b=null),b}function j(){var a={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,d){"true"==d&&(d=!0),"false"==d&&(d=!1),a[c]=d});return a}c.poll=d,c.debounce=e,c.shuffleArray=f;var k=function(){function b(b){this.wasSkipped=!1,this._tasks=[],this._juggler=b||a.Core.Time.juggler}return b.prototype.add=function(a,b){var c={func:a,canSkip:b};this._tasks.push(c)},b.prototype.start=function(a){this._onComplete=a,this._tasks.length?this.nextTask():this._onComplete&&this._onComplete()},b.prototype.nextTask=function(){this._currentTask=this._tasks.shift();var a=this;this._currentTask.func(function(){a._tasks.length?a.nextTask():(a._currentTask=null,a._onComplete&&a._onComplete())})},b.prototype.skip=function(){this._currentTask&&this._currentTask.canSkip&&this.nextTask()},b.prototype.skipToEnd=function(){this._onComplete()},b}();c.Queue=k,c.touchToSkip=g,c.getReference=h,c.getUrlVar=i,c.getUrlVars=j,c.convertToAmount=function(a){return parseFloat(Math.floor(a).toFixed(2))},c.formatTime=function(a){var c=Math.floor(a/60),d=b.Lang.getPhrase("settings_hour"),e=b.Lang.getPhrase("settings_hours"),f=b.Lang.getPhrase("settings_minute"),g=b.Lang.getPhrase("settings_minutes");if(c){var h=a%(60*c);return h?l(c,d,e)+", "+l(h,f,g):l(c,d,e)}return l(a,f,g)};var l=function(a,b,c){return a>1?a+" "+c:a+" "+b}}(b.Utils||(b.Utils={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){function c(a){var c=new e.Queue;c.add(function(a){b.Events.init(),a()}),c.add(function(a){b.Time.init(),a()}),c.add(function(a){b.Environment.init(),a()}),c.add(function(a){b.SoundManager.globalSounds=new b.SoundManager,a()}),c.start(function(){a()}),d()}function d(){document.addEventListener("contextmenu",function(a){a.preventDefault()}),$(window).blur(function(c){f=(new Date).getTime(),b.Events.coreEvents.emit(a.Core.Events.ON_APP_LOSE_FOCUS,c,f)}),$(window).focus(function(c){var d=(new Date).getTime()-f;b.Events.coreEvents.emit(a.Core.Events.ON_APP_GET_FOCUS,d,c)}),window.onerror=function(c,d,e,f,g){b.Events.coreEvents.emit(a.Core.Events.ON_APP_EXCEPTION,c)},window.onresize=e.debounce(function(c){b.Environment.currentMode=b.Environment.getOrientation(),b.Events.coreEvents.emit(a.Core.Events.ON_APP_RESIZE,c,b.Environment.getOrientation())},100);var c,d=0,g=!1,h=$("body");h.on({touchmove:function(e){g=!0,c=$(this).scrollTop(),b.Events.coreEvents.emit(a.Core.Events.ON_APP_SCROLL,e),d=c}}),h.on({touchend:function(c){g&&b.Events.coreEvents.emit(a.Core.Events.ON_APP_SCROLL_END,c),g=!1}}),window.onscroll=e.debounce(function(c){b.Events.coreEvents.emit(a.Core.Events.ON_APP_SCROLL,c)},250)}var e=a.Core.Utils,f=(new Date).getTime();b.init=c}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){function c(){switch(b.launchVariables=a.Core.Utils.getUrlVars(),b.launchVariables.homeUrl=b.launchVariables.homeUrl||b.defaultSettings.homeUrl,b.launchVariables.platformId=b.launchVariables.platformId||b.defaultSettings.platformId,b.launchVariables.operatorCode=b.launchVariables.operatorCode||b.defaultSettings.operatorCode,b.launchVariables.brandCode=b.launchVariables.brandCode||b.defaultSettings.brandCode,b.launchVariables.gameId=b.launchVariables.gameId||b.defaultSettings.gameId,b.launchVariables.gameCode=b.launchVariables.gameCode||b.defaultSettings.gameCode,b.launchVariables.serverUrl=b.launchVariables.serverUrl||b.defaultSettings.serverUrl,b.launchVariables.language=b.launchVariables.language||b.defaultSettings.language,b.launchVariables.currency=b.launchVariables.currency||b.defaultSettings.currency,b.launchVariables.token=b.launchVariables.token||"",b.launchVariables.sessionId=b.launchVariables.sessionId||"",b.launchVariables.playerId=b.launchVariables.playerId||"",b.launchVariables.music="1",b.launchVariables.sfx="1",b.launchVariables.autospinLimits=!b.launchVariables.autospinLimits||b.launchVariables.autospinLimits,b.launchVariables.threeSecRule=!!b.launchVariables.threeSecRule&&b.launchVariables.threeSecRule,b.launchVariables.hasCheatTool=0==b.launchVariables.mode,b.launchVariables.cms_type||"1"){case"1":b.launchVariables.gameModeType="class3";break;case"2":b.launchVariables.gameModeType="sweepstake";break;case"0":b.launchVariables.gameModeType="ace"==b.launchVariables.operatorCode?"casino":"social";break;default:b.launchVariables.gameModeType="casino"}b.defaultSettings.loadingBgImgURL=b.defaultSettings.loadingBgImgURL.replace("game_mode_type",b.launchVariables.gameModeType),b.defaultSettings.portraitLoadingBgImgURL=b.defaultSettings.portraitLoadingBgImgURL.replace("game_mode_type",b.launchVariables.gameModeType),screenfull.enabled&&screenfull.onchange(function(){a.Core.Events.coreEvents.emit(b.EVENT_FULL_SCREEN,screenfull.isFullscreen)}),"iOS"==b.getPlatformData().os.family&&(document.addEventListener("gesturestart touchmove",function(a){a=a.originalEvent||a,1!==a.scale&&"SELECT"!==a.target.tagName&&"INPUT"!==a.target.tagName&&(a.preventDefault(),document.body.style.transform="scale(1)")}),document.addEventListener("touchend",function(a){"SELECT"!=a.target.tagName&&"INPUT"!=a.target.tagName&&(a.preventDefault(),$(a.target).trigger("click"))},!1))}function d(){return b.defaultSettings.aspectRatio}function e(){return!b.isDesktop()&&screenfull.enabled}function f(){b.isDeviceMobile()&&screenfull.request()}function g(){return window.platform}function h(){return k()==b.ORIENTATION_LANDSCAPE}function i(){return l()&&k()==b.ORIENTATION_PORTRAIT}function j(a,c){if(c){if(!(a.indexOf(c)>=0))throw"[Environment] Variant type not found : "+b.variant+".  Allowed types for this application are : "+a;b.variant=c}else b.getDeviceType()==b.DEVICE_MOBILE?b.variant=b.DEVICE_MOBILE:b.variant=b.DEVICE_DESKTOP,b.launchVariables.variant=b.variant}function k(){return window.innerWidth>window.innerHeight?a.Core.Environment.ORIENTATION_LANDSCAPE:a.Core.Environment.ORIENTATION_PORTRAIT}function l(){return o()==b.DEVICE_MOBILE}function m(){return!l()}function n(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}function o(){var a=b.launchVariables.device||b.launchVariables.variant;return a||(a=n()?b.DEVICE_MOBILE:b.DEVICE_DESKTOP),a}function p(){a.Core.Events.coreEvents.emit(a.Core.Events.ON_APP_EXIT)}function q(a){void 0===a&&(a=100),"iOS"!==g().os.family&&l()&&navigator.vibrate([a])}b.EVENT_FULL_SCREEN="env_full_screen",b.DEVICE_MOBILE="mobile",b.DEVICE_DESKTOP="desktop",b.ORIENTATION_LANDSCAPE="landscape",b.ORIENTATION_PORTRAIT="portrait",b.variant="default",b.currentMode="",b.updatedHeight=window.innerHeight,b.init=c,b.getAspectRatio=d,b.isFullScreenAvailable=e,b.goFullScreen=f,b.getPlatformData=g,b.isLandscape=h,b.isPortrait=i,b.setVariant=j,b.getOrientation=k,b.isMobile=l,b.isDesktop=m,b.isDeviceMobile=n,b.getDeviceType=o,b.exit=p,b.playVibrate=q}(b.Environment||(b.Environment={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(c){function d(){c.juggler=new h(!0),f=a.Core.Events.createEmitter()}function e(){return"_dotime:"+ ++g}var f,g=0;c.init=d;var h=function(){function a(a){this._objects={},this._isActive=!0,this.timeMultiplier=1,this.currentTime=0,this._autoStart=a,a&&this.start(),this.id="_juggler:"+e(),b.Events.coreEvents.on(b.Events.ON_APP_LOSE_FOCUS,function(){}.bind(this)),b.Events.coreEvents.on(b.Events.ON_APP_GET_FOCUS,function(a){}.bind(this))}return a.prototype.start=function(){this._lastTime=TweenLite.ticker.time,this._tickBind=this.update.bind(this),TweenLite.ticker.addEventListener("tick",this._tickBind)},a.prototype.stop=function(){TweenLite.ticker.removeEventListener("tick",this._tickBind)},a.prototype.update=function(){var a=1e3*(TweenLite.ticker.time-this._lastTime);if(this.currentTime+=a,this._isActive){for(var b in this._objects)this._objects[b].onUpdate(a*this.timeMultiplier);this._lastTime=TweenLite.ticker.time}},a.prototype.purge=function(){for(var a in this._objects)this.remove(this._objects[a])},a.prototype.add=function(a){var b=e();a._animateableId=b,this._objects[b]=a},a.prototype.remove=function(a){delete this._objects[a._animateableId]},a.prototype.setInterval=function(a,b){var c=this.delayCall(a,b,-1);return c.start(),c},a.prototype.setTimeout=function(a,b){var c=this.delayCall(a,b);return c.start(),c},a.prototype.clearTimeout=function(a){this.remove(a)},a.prototype.delayCall=function(a,b,c,d){return new i(a,b,this,c,d)},a}();c.Juggler=h;var i=function(){function a(a,b,c,d,e){this.iterations=0,this._isPaused=!1,this._juggler=c,this._originalDelay=b,this._delay=b,this._onTick=a,this._onComplete=e,this._repeatCount=d||1,this.iterations=0}return a.prototype.pause=function(){this._isPaused=!0},a.prototype.resume=function(){this._isPaused=!1},a.prototype.start=function(){this._juggler.add(this)},a.prototype.stop=function(){this._juggler.remove(this)},a.prototype.onUpdate=function(a){this._isPaused||(this._delay-=a,this._delay<=0&&(this._onTick(++this.iterations),0==--this._repeatCount?(this.stop(),this._onComplete&&this._onComplete()):this._delay=this._originalDelay))},a}();c.DelayCall=i}(b.Time||(b.Time={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){function b(){a.coreEvents=new PIXI.utils.EventEmitter}function c(){return"touchend"}function d(){return"mouseover"}function e(){return"mouseup"}function f(){return"mousedown"}function g(){return"mouseout"}function h(){return new PIXI.utils.EventEmitter}a.ON_CREATE="on_create",a.ON_DESTROY="on_destroy",a.ON_SHOWN="on_shown",a.ON_HIDDEN="on_hidden",a.ON_INTERACTION="on_touch",a.ON_TOGGLE_INTERACTION="on_radio_touch",a.ON_APP_EXIT="on_app_exit",a.ON_APP_LOSE_FOCUS="on_app_lose_focus",a.ON_APP_GET_FOCUS="on_app_get_focus",a.ON_APP_EXCEPTION="on_app_exception",a.ON_APP_RESIZE="on_app_resize",a.ON_APP_SCROLL="on_app_scroll_start",a.ON_APP_SCROLL_END="on_app_scroll_end",a.init=b,a.getTouchEvent=c,a.getOverEvent=d,a.pressup=e,a.getClickEvent=f,a.getOutEvent=g,a.createEmitter=h}(a.Events||(a.Events={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){var c=function(){function c(){this.loadProgress=0,this._movieClips={},this._hasLoaded=!1,this.preLoadNumber=0,Howler.iOSAutoEnable=!1}return c.prototype.purge=function(){this._PIXILoader.reset()},c.prototype.areAssetsAvailable=function(a){if(c._instances[a]){return c._instances[a].isLoaded()}return!1},c.get=function(a){var b;return c._instances[a]?b=c._instances[a]:(b=new c,c._instances[a]=b),b},c.prototype.isLoaded=function(){return this._hasLoaded},c.prototype.getMovieClip=function(b,d,e,f){e=e||"PIXI.AnimatedSprite";var g=null,h=this._movieClips[b];if(!h)for(var i in c._instances)if(h=c._instances[i]._movieClips[b])break;if(h){var j=[];h.textures.forEach(function(a){j.push(PIXI.Texture.from(a))});g=new(a.Core.Utils.getReference(e))(j),g.animationSpeed=h.speed||1,g.gotoAndStop(1),d&&(g.anchor.x=.5,g.anchor.y=.5)}return g},c.prototype.getSpineMovieClip=function(a,b,d,e){var f=this,g=null,h=this._movieClips[a];if(!h)for(var i in c._instances)if(h=c._instances[i]._movieClips[a])break;if(h){var j=[];h.textures.length>0&&j.push(h.textures[0]),g=new PIXI.spine.Spine(f.getPIXIAsset(b).spineData),g.state.addAnimation(0,j[0],d,e),g.state.timeScale=0}return g},c.prototype.getSoundManager=function(){return this._soundManager},c.prototype.getPIXIAsset=function(a){var b=this._PIXILoader.resources[a];if(!b)for(var d in c._instances)if(b=c._instances[d]._PIXILoader.resources[a])break;return b},c.prototype.getPIXIAtlas=function(a){if(this.getPIXIAsset(a))return this.getPIXIAsset(a).textures;throw"[AssetManager] Atlas does not exist in assets (was it filtered by bandwidth?) : "+a},c.prototype.getPIXISprite=function(a,b){if(!b){var c=this.getAtlasFromRef(a);a=c.ref,b=c.atlas}return new PIXI.Sprite(this.getPIXIAtlas(b)[a])},c.prototype.getPIXITexture=function(a,b){var c;if(!b){var d=this.getAtlasFromRef(a);a=d.ref,b=d.atlas}if(b)c=this.getPIXIAtlas(b)[a];else{if(!this.getPIXIAsset(a))throw"[AssetManager] Texture does not exist in assets (was it filtered by bandwidth?) : "+a;c=this.getPIXIAsset(a).texture}return c},c.prototype.load=function(d,e,f){function g(d){function g(a){var c;if("string"==typeof a.path)c=a.path;else if(!(c=a.path[b.Environment.variant]))return null;var d=c.split("|");return d.length>1?d:c}function i(){}function j(){h.loadProgress=l/k,l++,f&&f(l/k),l==k&&(h._hasLoaded=!0,a.Core.Time.juggler.setTimeout(e,500))}var k=0,l=0;d.items.forEach(function(a){var d=g(a);if(d){if(a.movieclips)for(var e in a.movieclips)h._movieClips[e]=a.movieclips[e];switch(d.indexOf("game_mode_type")>=0&&(d=d.replace("game_mode_type",b.Environment.launchVariables.gameModeType)),a.type){case c.ASSET_TYPE_IMAGE:h._PIXILoader.add(a.id,d),k++;break;case c.ASSET_TYPE_JSON:h._PIXILoader.add(a.id,g(a)),k++;break;case c.ASSET_TYPE_ATLAS:k+=2,h._PIXILoader.add(a.id,d);break;case c.ASSET_TYPE_MUL_ATLAS:h._PIXILoader.add(d),k+=2*d.length;break;case c.ASSET_TYPE_VIDEO:h._PIXILoader.add(a.id,d),k++;break;case c.ASSET_TYPE_SPINE_ATLAS:h._PIXILoader.add(a.id,d),k+=3;break;case c.ASSET_TYPE_FONT:h._PIXILoader.add(a.id,d),k++;break;case c.ASSET_TYPE_AUDIO:var f=[],l=b.SoundManager.getSupportedFormats();l.indexOf("m4a")>=0?f[0]=d+".m4a?v=##version##":l.indexOf("ogg")>=0?f[0]=d+".ogg?v=##version##":l.indexOf("mp3")>=0&&(f[0]=d+".mp3?v=##version##");var m=a.properties||{};m.src=f,m.onload=j,m.onloaderror=i;var n=void 0;try{n=new Howl(m),n.once("loaderror",j.bind(this))}catch(a){}k++,a.global&&!b.SoundManager.globalSounds.doesSoundExist(a.id)?b.SoundManager.globalSounds.addSound(a,n):h._soundManager.addSound(a,n)}}}),h._PIXILoader.onLoad.add(j),h._PIXILoader.load()}var h=this;if(this._hasLoaded)return this.preLoadNumber++,this.preLoadNumber++,this.loadProgress=1,f&&f(1),void e();this._PIXILoader=new PIXI.Loader,this._soundManager=new a.Core.SoundManager,this._PIXILoader.pre(function(a,b){c.antiCaching&&(a.url+="?v=##version##"),b()}),this.loadProgress=0,f&&f(0),d.indexOf(".json")?$.getJSON(d+"?v=##version##",function(a){g(a)}):g(d)},c.prototype.getAtlasFromRef=function(a){if(a.indexOf(":")>0){var b=a.split(":");return{atlas:b[0],ref:b[1]}}return{atlas:null,ref:a}},c.ASSET_TYPE_IMAGE="image",c.ASSET_TYPE_AUDIO="sound",c.ASSET_TYPE_JSON="json",c.ASSET_TYPE_ATLAS="atlas",c.ASSET_TYPE_FONT="font",c.ASSET_TYPE_MUL_ATLAS="multi_atlas",c.ASSET_TYPE_SPINE_ATLAS="spine_atlas",c.ASSET_TYPE_VIDEO="video",c.antiCaching=!0,c._instances={},c}();b.AssetManager=c}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(b){function c(d,e){$.ajax({dataType:"json",url:"assets/locale/lang/"+d.toLowerCase()+".json?v=##version##",success:function(a){b.langCode=d,g=a,e()},error:function(){console.warn("[Lang] Language file not found for:"+d,"Defaulting to en"),c(a.Environment.defaultSettings.language,e)}})}function d(a,c){b.langCode=a,g=c}function e(a,b){if(!g)return a.toLowerCase();"@"==a.substr(0,1)&&(a=a.substring(1,a.length));var c=g[a];if(c||(c=a),b)for(var d in b){var e=new RegExp("{"+d+"}","gi");c=c.replace(e,b[d])}return c}function f(){for(var a in g){var b=".lang\\:"+a;$(b)&&$(b).length&&$(b).html(e(a))}}var g;b.loadDictionary=c,b.setDictionary=d,b.getPhrase=e,b.scanDOM=f}(a.Lang||(a.Lang={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){function b(a,b,c){var d=Math.random()*(b-a)+a;return c&&(d=Math.floor(d)),d}function c(a){return a*(Math.PI/180)}function d(a,b){return Math.round(a/b)*b}function e(a,b){return Math.ceil(a/b)*b}function f(a,b){return Math.floor(a/b)*b}function g(a){return Math.acos(a)*v}function h(a){return Math.asin(a)*v}function i(a){return Math.atan(a)*v}function j(a,b){return Math.atan2(a,b)*v}function k(a){return Math.cos(u*a)}function l(a){return Math.sin(u*a)}function m(a){return Math.tan(u*a)}function n(a,b,c,d){return Math.atan2(d-b,c-a)*v}function o(a,b,c,d){var e=a-c,f=b-d;return Math.sqrt(e*e+f*f)}function p(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}function q(a,b,c){return a<=b?0:a>=c?1:(a-b)/(c-b)}function r(a,b,c){return a+(b-a)*c}function s(a,b){if(a<0)for(;a<0;)a+=b;else if(a>b)for(;a>b;)a-=b;return a}function t(a){return s(a,360)}var u=.0174532925,v=57.2957795;a.getRandomRange=b,a.degToRad=c,a.roundToNearest=d,a.roundUpToNearest=e,a.roundDownToNearest=f,a.Dacos=g,a.Dasin=h,a.Datan=i,a.Datan2=j,a.Dcos=k,a.Dsin=l,a.Dtan=m,a.calcAngle=n,a.calcDistance2=o,a.calcDistance=p,a.getNormalizedByLimits=q,a.lerp=r,a.normalize=s,a.putIn360=t}(a.Maths||(a.Maths={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(a){var b=function(){function b(){var c=this;this._sounds={},this._atlases={},this._volumeFx=1,this._volumeMusic=1,this._musicRestorePoints={},this._playingSounds={},this._isSoundMuteOnFocusLose=!1,this.getSpriteAtlas=function(a){return c._atlases&&c._atlases[a]?c._atlases[a]:null},a.Events.coreEvents.on(b.EVENT_SET_MUTE,function(a){a?this.mute():this.unMute()}.bind(this)),a.Events.coreEvents.on(b.EVENT_SET_MUSIC_VOLUME,function(a){this._volumeMusic=a,!0===this._volumeMusic?this._currentMusic&&this._currentMusic.mute(!1):this._currentMusic&&this._currentMusic.mute(!0)}.bind(this)),a.Events.coreEvents.on(b.EVENT_SET_FX_VOLUME,function(a){this._volumeFx=!0===a?1:0}.bind(this)),a.Events.coreEvents.on(b.EVENT_ON_FX_VOLUME,function(a){this._volumeFx=!0===a?1:0}.bind(this)),a.Events.coreEvents.on(a.Events.ON_APP_LOSE_FOCUS,function(){this._isSoundMuteOnFocusLose=this.isMuted,a.Events.coreEvents.emit(b.EVENT_SET_MUTE,!0)}.bind(this)),a.Events.coreEvents.on(a.Events.ON_APP_GET_FOCUS,function(){this._isSoundMuteOnFocusLose||a.Events.coreEvents.emit(b.EVENT_SET_MUTE,!1)}.bind(this)),a.Events.coreEvents.on(a.Events.ON_APP_EXCEPTION,function(){a.Events.coreEvents.emit(b.EVENT_SET_MUTE,!0)}.bind(this)),Howler.mobileAudioEnable=!1}return b.prototype.getCurrentMusic=function(){return this._currentMusic},b.prototype.getAtlas=function(){return this._atlases},b.prototype.getCurrentMusicId=function(){return this._currentMusicId},b.prototype.getVolumeFX=function(){return this._volumeFx},b.prototype.getVolumeMusic=function(){return this._volumeMusic},b.prototype.setVolumeMusic=function(a){this._volumeMusic=a},b.prototype.setVolumeFX=function(a){this._volumeFx=a},b.prototype.purge=function(){this._sounds=null},b.prototype.playCue=function(a,c,d,e){if(void 0===e&&(e=1),a&&!b.globalSounds.isMuted){var f,g;"string"==typeof a?g=a:void 0==c?(g=a.shift(),a.push(g)):g=a[c];var h=this.getSpriteAtlas(g);return h?(h.volume(this._volumeFx*e),f=h.play(g),this._playingSounds[g]=f):(f=this.getSound(a),f?(f.volume(this._volumeFx),f.play()):console.warn("[SoundManager] Sound ID doesn't exist : "+g)),f.loop=d,f}},b.prototype.stopCue=function(a){if(a){var b;"string"==typeof a?b=a:console.warn("[SoundManager] stopCue() invalid cue parameter:",a);var c=this.getSpriteAtlas(b);c&&this._playingSounds[b]&&c.stop(this._playingSounds[b])}},b.prototype.mute=function(){Howler.mute(!0),this.isMuted=!0},b.prototype.unMute=function(){Howler.mute(!1),this.isMuted=!1},b.prototype.addSound=function(a,b){if(this._sounds[a.id])throw"[SoundManager] Duplicate sound id : "+a.id;if(this._sounds[a.id]=b,a.properties.sprite)for(var c in a.properties.sprite)this._atlases[c]=b},b.prototype.doesSoundExist=function(a){return!!this._sounds[a]},b.prototype.getSound=function(a){if(this._sounds[a])return this._sounds[a];throw"[SoundManager] Sound id doesn't exist : "+a},b.prototype.setMusicRestorePoint=function(a,b){this._musicRestorePoints[a]=b},b.prototype.stopMusic=function(){this._currentMusic&&(this._musicRestorePoints[this._currentMusicId]=this._currentMusic.seek(),this._currentMusic.stop(),this._currentMusic=null)},b.prototype.fadeMusicOut=function(a,b){b=b||500,a=a||0,this._currentMusic&&this._currentMusic.fade(Math.min(this._volumeMusic,this._currentMusic.volume()),a*this._volumeMusic,b)},b.prototype.fadeMusicIn=function(a,b){b=b||500,a=a||1,this._currentMusic&&this._currentMusic.fade(Math.min(this._volumeMusic,this._currentMusic.volume()),this._volumeMusic*a,b)},b.prototype.startMusic=function(a,b,c,d){return b=b||250,this.stopMusic(),this._currentMusic=this.getSound(a),c&&this._currentMusic.seek(this._musicRestorePoints[a]||0),this._currentMusic.play(),this._currentMusic.loop(!d),this._currentMusicId=a,this._currentMusic.volume(0),this.fadeMusicIn(1,b),this._currentMusic},b.isFormatSupported=function(a){return b.getSupportedFormats().indexOf(a)>-1},b.getSupportedFormats=function(){var a=["ogg","mp3","m4a"],b=[],c=new Audio;return a.forEach(function(a){("probably"==c.canPlayType("audio/"+a)||"maybe"==c.canPlayType("audio/"+a))&&b.push(a)}),b},b.EVENT_SET_FX_VOLUME="sound_manager_set_fx_volume",b.EVENT_ON_FX_VOLUME="sound_manager_on_fx_volume",b.EVENT_SET_MUSIC_VOLUME="sound_manager_set_music_volume",b.EVENT_SET_MUTE="sound_manager_mute",b}();a.SoundManager=b}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(c){function d(a,b){return h[a]||(h[a]=new i("html_pages_container-"+a.toLowerCase(),b)),h[a]}var e,f,g={},h={};c.getPageManager=d;var i=function(){function c(a,c){this._pageData={},c?this._$div=c:($("#game_wrapper").append("<div id='"+a+"'></div>"),this._$div=$("#"+a)),this._eventListener=b.Events.createEmitter(),b.Events.coreEvents.on(b.Events.ON_APP_RESIZE,function(){},this)}return c.prototype.getDiv=function(){return this._$div},c.prototype.setVisible=function(a){a?this._$div.show():this._$div.hide()},c.prototype.loadPages=function(d,e,f){function h(){var l=d.shift();k._pageData[l.id]=l,k._$div.append('<div id="'+l.id+'"></div>');var m=$("#"+l.id),n=l.html;"string"!=typeof n&&(n=b.Environment.variant==b.Environment.DEVICE_MOBILE?l.html.mobile:l.html.desktop),$(m).load(n+"?v=##version##",function(){var n=a.Core.Utils.getReference(l.module),o=new n(l.id,m);g[l.id]=o,o.emit(a.Core.Events.ON_CREATE),b.Events.coreEvents.emit(c.EVENT_ON_PAGE_LOADED,o),d.length>0?h():(k._$div.show(),k.processCSS(),f()),$(l.div).hide(),e(++j/i,l.id)})}this._$div.hide();var i=d.length,j=0;e(0);var k=this;h()},c.prototype.getPage=function(a){return g[a]},c.prototype.closeOverlay=function(b){f&&(f.emit(a.Core.Events.ON_HIDDEN,b),f=null)},c.prototype.showOverlay=function(b,c){f&&f.getId()==b||(f&&f.emit(a.Core.Events.ON_HIDDEN),c=c||{},c.isOverlay=!0,f=g[b],f.emit(a.Core.Events.ON_SHOWN,c))},c.prototype.toggleOverlay=function(b,c){f&&f.getId()==b?(this.closeOverlay(),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!1)):this.showOverlay(b,c)},c.prototype.showPage=function(b,c){e&&e.getId()==b||(e&&e.emit(a.Core.Events.ON_HIDDEN),e=g[b],e.emit(a.Core.Events.ON_SHOWN,c))},c.prototype.processCSS=function(){for(var a in this._pageData){var c=this._pageData[a];if($("head").append('<link id="'+a+'-default" rel="stylesheet" href="'+c.variants_css.default+'?v=##version##" type="text/css" />'),b.Environment.variant==b.Environment.DEVICE_MOBILE){var d=c.variants_css.mobile.landscape||c.variants_css.default,e=c.variants_css.mobile.portrait||c.variants_css.default;$("head").append('<link id="'+a+'-landscape" rel="stylesheet" media="all and (orientation:landscape)" href="'+d+'?v=##version##">'),$("head").append('<link  id="'+a+'-portrait"rel="stylesheet" media="all and (orientation:portrait)" href="'+e+'?v=##version##">')}else{var f=c.variants_css[b.Environment.variant]||c.variants_css.default;$("head").append('<link id="'+a+'" rel="stylesheet" href="'+f+'?v=##version##" type="text/css" />')}}},c.EVENT_ON_PAGE_LOADED="page_manager_on_page_loaded",c}();c.PageManager=i}(b.HTML||(b.HTML={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=function(c){function d(b,d){var e=c.call(this)||this;return e._$div=d,e.id=b,e._$div.hide(),e._$parent=e._$div.parent(),e._$div.addClass("HTML_page"),e.on(a.Core.Events.ON_HIDDEN,function(){e._$div.hide(),e._data&&e._data.isOverlay&&e._$parent.append(e._$div)}),e.on(a.Core.Events.ON_SHOWN,function(a){e._data=a||{},a&&a.isOverlay?$("body").append(e._$div):e._$parent.append(e._$div),e._$div.show()}),e}return __extends(d,c),d.prototype.getId=function(){return this.id},d.prototype.changeParent=function(a){a?$(a).append(this._$div):$("body").append(this._$div),this._$div.show()},d.prototype.hide=function(){this.emit(b.Events.ON_HIDDEN)},d.prototype.show=function(){this.emit(b.Events.ON_SHOWN)},d}(PIXI.utils.EventEmitter);c.Page=d}(b.HTML||(b.HTML={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){!function(b){var c=function(){function b(b,c,d){var e=this;this._onClick=d,this.$_div=$("#"+b),this.$_div.addClass(c),this.$_div.on(a.Core.Events.touchEventType,function(){e.setState(!e.state)})}return b.prototype.setState=function(a){this.state=a,this.$_div.removeClass("switch_on"),this.$_div.removeClass("switch_off"),this.$_div.addClass(a?"switch_on":"switch_off"),this._onClick(this.state)},b}();b.Switch=c}(b.Widgets||(b.Widgets={}))}(b.HTML||(b.HTML={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(b){var c=function(){function a(){}return a}();b.StageSetup=c;var d=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.init=function(b){a.Core.Renderer.Stage.instance=this,this.setup=b;var c={width:b.width,height:b.height,view:document.getElementById(b.divId),transparent:b.isTransparent,antialias:!0,resolution:b.resolution||1};this._renderer=PIXI.autoDetectRenderer(c),a.Core.Time.juggler.add(this),this._update=1e3/this.setup.fps},c.prototype.onUpdate=function(a){this._update-=a,this._update<=0&&(this._renderer.render(this),this._update=1e3/this.setup.fps)},c.scaleStage=function(b,c,d,e){a.Core.Renderer.Stage.instance.x=d||0,a.Core.Renderer.Stage.instance.y=e||0,a.Core.Renderer.Stage.instance.scale.x=b,a.Core.Renderer.Stage.instance.scale.y=c},c}(PIXI.Container);b.Stage=d}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(c){!function(d){function e(a){for(var b in a)q[b]=new r(b,a[b])}function f(a){return q[a]}function g(){return p.length?p[p.length-1]:o}function h(a,b,d,e,f,g){var h=q[a],i=h.getSceneClass(),j=new i(h,b,e,f);g&&(j.onFinish=g),c.Stage.instance.addChild(j),p.push(j),d&&d.process(j)}function i(b){if(p.length){var c=p.pop(),d=function(){return c.emit(a.Core.Events.ON_DESTROY)};b?b&&b.process(c,null,d):d()}}function j(a,b,d,e,f){var g=q[a],h=g.getSceneClass(),i=new h(g,b,e,f);c.Stage.instance.addChild(i),p.push(i),d||(d=new s(s.FADE_IN)),d.processPopup(i)}function k(b,c){if(void 0===c&&(c=100),p.length){var d=p.pop(),e=function(){setTimeout(function(){d.emit(a.Core.Events.ON_DESTROY)},c)};b||(b=new s(s.FADE_OUT)),b.processPopup(d,e)}}function l(a){return q[a]}function m(){return o?o.getSceneProfile():null}function n(b,d,e,f,g){if(!q[b])throw"[SceneManager] Scene does not exist : "+b;var h=q[b];if(o&&h.class==o.getSceneProfile().class)e(o,!1);else{o&&o.emit(a.Core.Events.ON_DESTROY);var i=h.getSceneClass();new i(h,d,function(a){c.Stage.instance.addChild(a),1==p.length&&"TRANSITION"==p[0].getSceneProfile().id&&c.Stage.instance.children.reverse(),e(a,!0),g?(o&&(o.cacheAsBitmap=!0),g.process(a,o,function(){o=a})):o=a},f)}}var o,p=[],q={},r=function(){function b(a,b){this.id=a,this.class=b.module,this.layoutId=b.layout_id,this.manifestFilename=b.asset_manifest}return b.prototype.getSceneClass=function(){return a.Core.Utils.getReference(this.class)},b.prototype.getLayout=function(a){return a.getPIXIAsset(this.layoutId).data},b}();d.SceneData=r;var s=function(){function a(a,b,c){this.type=a,this.duration=b||.6,this.ease=c||Linear.easeNone}return a.prototype.process=function(b,c,d){switch(this.type){case a.FADE_IN:b.alpha=0,TweenLite.to(b,this.duration,{alpha:1,ease:this.ease,onComplete:d});break;case a.FADE_OUT:TweenLite.to(b,this.duration,{alpha:0,ease:this.ease,onComplete:d});break;case a.ZOOM_IN:b.scale.set(0,0),TweenLite.to(b.scale,this.duration,{x:1,y:1,ease:this.ease,onComplete:d});break;case a.ZOOM_OUT:TweenLite.to(b.scale,this.duration,{x:0,y:0,ease:this.ease,onComplete:d})}},a.prototype.processPopup=function(c,d){var e=c.position.x,f=c.position.y,g=b.Environment.defaultSettings.width,h=b.Environment.defaultSettings.height;b.Environment.isPortrait()&&(g=b.Environment.defaultSettings.height,h=b.Environment.defaultSettings.width);var i=c.getLayout().getComponent("intro_holder");switch(i||(i=c.getLayout().getComponent("outro_holder")),this.type){case a.FADE_IN:i.alpha=0,TweenLite.to(i,this.duration,{alpha:1,ease:this.ease,onComplete:d});break;case a.FADE_OUT:TweenLite.to(i,this.duration,{alpha:0,ease:this.ease,onComplete:d});break;case a.ZOOM_IN:i.scale.set(0,0),TweenLite.to(i.scale,this.duration,{x:1,y:1,ease:this.ease,onComplete:d});break;case a.ZOOM_OUT:TweenLite.to(i.scale,this.duration,{x:0,y:0,ease:this.ease,onComplete:d});break;case a.MOVE_IN_FROM_RIGHT:i.position.x+=g,TweenLite.to(i.position,this.duration,{x:e,ease:this.ease,onComplete:d});break;case a.MOVE_IN_FROM_LEFT:i.position.x-=g/2,TweenLite.to(i.position,this.duration,{x:e,ease:this.ease,onComplete:d});break;case a.MOVE_OUT_TO_RIGHT:TweenLite.to(i.position,this.duration,{x:1.5*g,ease:this.ease,onComplete:function(){i.position.x=e,d&&d()}});break;case a.MOVE_OUT_TO_LEFT:TweenLite.to(i.position,this.duration,{x:-g/2,ease:this.ease,onComplete:function(){i.position.x=e,d&&d()}});break;case a.MOVE_IN_FROM_TOP:i.position.y-=h/2,TweenLite.to(i.position,this.duration,{y:f,ease:this.ease,onComplete:d});break;case a.MOVE_IN_FROM_BOTTOM:i.position.y+=h/2,TweenLite.to(i.position,this.duration,{y:f,ease:this.ease,onComplete:d});break;case a.MOVE_OUT_TO_TOP:TweenLite.to(i.position,this.duration,{y:-h/2,ease:this.ease,onComplete:function(){i.position.y=f,d&&d()}});break;case a.MOVE_OUT_TO_BOTTOM:TweenLite.to(i.position,this.duration,{y:1.5*h,ease:this.ease,onComplete:function(){i.position.y=f,d&&d()}})}},a.FADE_IN="fade_in",a.FADE_OUT="fade_out",a.ZOOM_IN="zoom_in",a.ZOOM_OUT="zoom_out",a.MOVE_IN_FROM_RIGHT="move_in_from_right",a.MOVE_IN_FROM_LEFT="move_in_from_left",a.MOVE_OUT_TO_RIGHT="move_out_to_right",a.MOVE_OUT_TO_LEFT="move_out_to_left",a.MOVE_IN_FROM_TOP="move_in_from_top",a.MOVE_IN_FROM_BOTTOM="move_in_from_bottom",a.MOVE_OUT_TO_TOP="move_out_to_top",a.MOVE_OUT_TO_BOTTOM="move_out_to_bottom",a}();d.SceneTransition=s,d.init=e,d.getSceneData=f,
d.getCurrentScene=g,d.showSceneAsOverlay=h,d.closeOverlay=i,d.showPopupScene=j,d.closePopupScene=k,d.doesSceneExist=l,d.getCurrentSceneProfile=m,d.showScene=n}(c.SceneManager||(c.SceneManager={}))}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=function(d){function e(e,f,g,h){var i=d.call(this)||this;i._sceneProfile=e,i._data=f,i.interactive=!0,i.interactiveChildren=!0,i._assets=b.AssetManager.get(i._sceneProfile.manifestFilename),i._sounds=i._assets.getSoundManager();var j=new a.Core.Renderer.UI.BoundsFiller(c.Stage.instance.setup.width,c.Stage.instance.setup.height,0,.01);if(j.name="_bounds_",j.x=0,j.y=0,i.addChild(j),!i._sceneProfile.manifestFilename)throw"[Scene] No manifest specified for scene : "+e.class;return i._assets.load(i._sceneProfile.manifestFilename,function(){if(!i._assets.getPIXIAsset(e.layoutId))throw"[Scene] Layout id doesn't exist in assets : "+e.layoutId;i._layout=new c.SceneBuilder(i,i._assets,i._assets.getPIXIAsset(e.layoutId).data),i.emit(a.Core.Events.ON_CREATE),i.onCreate(),g&&g(i)}),i.on(a.Core.Events.ON_DESTROY,i.onDestroy),a.Core.Events.coreEvents.on(a.Core.Events.ON_APP_RESIZE,i.onResize,i),i}return __extends(e,d),e.prototype.getLayout=function(){return this._layout},e.prototype.scaleScene=function(b,c,d){void 0===b&&(b=1),void 0===c&&(c=0),void 0===d&&(d=0),this.scale.x=b,this.scale.y=b;var e=this.getBounds();this.x=+((e.width-a.Core.Renderer.Stage.instance.width*b)/2+c),this.y=+((e.height-a.Core.Renderer.Stage.instance.height)/2+d)},e.prototype.scaleSceneTween=function(b,c,d,e,f){void 0===b&&(b=1),void 0===c&&(c=.3),void 0===d&&(d=0),void 0===e&&(e=0),d=d||0,e=e||0;var g=this.getBounds();this.pivot.x=g.width/2,this.pivot.y=g.height/2,this.x=a.Core.Renderer.Stage.instance.width/2+d,this.y=a.Core.Renderer.Stage.instance.height/2+e;var h=this.x+d,i=this.y+e;(new TimelineLite).add([TweenLite.to(this.position,c,{x:h,y:i,ease:Cubic.easeOut}),TweenLite.to(this.scale,c,{x:b,y:b,ease:Cubic.easeOut})]),f&&a.Core.Time.juggler.setTimeout(f,1e3*c)},e.prototype.areAssetsReady=function(){return this._assets.isLoaded()},e.prototype.getAssets=function(){return this._assets},e.prototype.getSceneProfile=function(){return this._sceneProfile},e.prototype.onCreate=function(){},e.prototype.onResize=function(){b.Environment.isMobile()&&this.updateOnOrientationChange()},e.prototype.updateOnOrientationChange=function(){if(this._layout){b.Environment.isFullScreenAvailable()&&b.Environment.goFullScreen();var c;c=b.Environment.isLandscape()?this._layout._layoutData.landscape:this._layout._layoutData.portrait;for(var d in c)if(c.hasOwnProperty(d)){var e=c[d];if("stage"===d)a.Core.Renderer.Stage.scaleStage(e.factorX,e.factorY,e.x,e.y);else{var f=this._layout.getComponent(d);f&&(void 0!=e.position&&(f._config.position=e.position),void 0!=e.scale&&(f._config.scale=e.scale),void 0!=e.visible&&(f._config.visible=e.visible),void 0!=e.pivot&&(f._config.pivot=e.pivot),this._layout.changeComponent(f))}}}},e.prototype.onDestroy=function(){this.removeAllListeners(),a.Core.Events.coreEvents.off(a.Core.Events.ON_APP_RESIZE,this.onResize),this._layout.destroy(),this.parent.removeChild(this)},e.prototype.setHTMLBackground=function(a){var b=$("html");b.css("background-image","url('"+a+"')"),b.css("background-size","100% 100%"),b.css("background-repeat","no-repeat"),b.css("background-position","center")},e}(PIXI.Container);c.Scene=d}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(DO){var Core;!function(Core){var Renderer;!function(Renderer){var SceneBuilder=function(){function SceneBuilder(a,b,c){var d=this;this._components={},this.fit=function(a){var b=a._config;if(b.fit){var c=d.getComponent(b.fit);if(c){var e=b.scale||{x:1,y:1};a.scale.set(e.x,e.y);for(var f=a.height;a.width>.8*c.width;)a.scale.x-=.05,a.scale.y-=.05;if(a.position.y=d.getCoords(b.position.y,"y")-.5*(f-a.height),!a.modifiedSetText){var g=d.fit,h=a.setText;a.setText=function(b,c){h(b,c),g(a)}.bind(a),a.modifiedSetText=!0}}}},this._assets=b,this._parentScene=a,this._layoutData=c,this.build(a,c),this.refresh(),Core.Events.coreEvents.on(Core.Events.ON_APP_RESIZE,function(){},this)}return SceneBuilder.prototype.getParentScene=function(){return this._parentScene},SceneBuilder.prototype.getLayoutParams=function(){return this._layoutData.params},SceneBuilder.prototype.getLayoutName=function(){return this._layoutData.name||"Unnamed layout"},SceneBuilder.prototype.getAssets=function(){return this._assets},SceneBuilder.prototype.bringComponentToFront=function(a){var b=this.getComponent(a);this._parentScene.addChild(b)},SceneBuilder.prototype.deleteComponent=function(a){var b=this.getComponent(a);b&&(b.parent.removeChild(b),delete this._components[a])},SceneBuilder.prototype.getComponents=function(){return this._components},SceneBuilder.prototype.getComponent=function(a){return this._components[a]},SceneBuilder.prototype.getComponentPlugin=function(a,b){var c;return this.applyToComponents(function(d){d.name==a.name&&(c=a._plugins[b])}),c},SceneBuilder.prototype.setComponentText=function(a,b){var c=this.getComponent(a);c&&c.setText&&c.setText(b)},SceneBuilder.prototype.applyToComponents=function(a){for(var b in this._components)a(this._components[b])},SceneBuilder.prototype.destroy=function(){var a=this;this.applyToComponents(function(b){b.emit(DO.Core.Events.ON_DESTROY),a.destroyPlugins(b)})},SceneBuilder.prototype.refresh=function(){this.applyToComponents(this.updateComponent.bind(this))},SceneBuilder.prototype.triggerFX=function(a){this.applyToComponents(function(b){var c=b._config;if(c.fx&&c.fx[a]){[].concat(c.fx[a]).forEach(function(a){var c=Core.Utils.getReference(a.split("(")[0]),d=a.match(/\(([^)]+)\)/)[1].split(",");d.unshift(b),c(d[0],d[1],d[2],d[3],d[4],d[5])})}})},SceneBuilder.prototype.destroyPlugins=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this.applyToComponents(function(b){b.name==a.name&&(a=b)});var d=a._plugins;if(d)for(var e in d){var f=d[e];f.destroy()}},SceneBuilder.prototype.build=function(container,layoutData){layoutData.bounds||(layoutData.bounds={x:0,y:0,width:container.getBounds().width,height:container.getBounds().height}),layoutData.components.forEach(function(componentData){var assets=this._assets;componentData.construct=componentData.construct||"PIXI.Container()";var component;if(component=0==componentData.construct.indexOf("assets")?eval(componentData.construct):eval("new "+componentData.construct),componentData.components&&this.build(component,componentData),component.name=componentData.id,component._config=componentData,componentData.index?container.addChildAt(component,componentData.index):container.addChild(component),this._components[componentData.id])throw"[SceneBuilder] Duplicate component name in layout: "+componentData.id;this._components[componentData.id]=component,componentData.plugins&&(component._plugins=ComponentPlugin.createPlugins(component,componentData.plugins,this._assets)),component.emit(DO.Core.Events.ON_CREATE,componentData,this);var plugins=component._plugins;if(plugins)for(var pluginId in plugins){var plugin=plugins[pluginId];plugin.init()}}.bind(this))},SceneBuilder.prototype.updateComponent=function(a){this.changeComponent(a,!0)},SceneBuilder.prototype.changeComponent=function(component,isRefresh){void 0===isRefresh&&(isRefresh=!1);var componentData=component._config;if(componentData.position&&this.setPosition(componentData.position,component),componentData.scale&&this.setScale(componentData.scale,component),componentData.pivot=componentData.pivot||"CENTRE",this.setPivot(componentData.pivot,component),componentData.filters){var filterList_1=[];componentData.filters.forEach(function(filterConstuctor){var filter=eval("new "+filterConstuctor);filterList_1.push(filter)}),component.filters=filterList_1}componentData.blend_mode&&(component.blendMode=componentData.blend_mode),null!=componentData.alpha&&(component.alpha=componentData.alpha),isRefresh&&(component.visible=null==componentData.visible||1==componentData.visible),componentData.fit&&this.fit(component)},SceneBuilder.prototype.setInteraction=function(a,b){b.interactive=!0,b.on("touchstart",function(b){a.sound&&this._assets.getSound(a.sound).play(),this._parentScene.emit(DO.Core.Events.ON_INTERACTION,b)}.bind(this))},SceneBuilder.prototype.setPosition=function(a,b){a=a||{x:0,y:0},b.x=this.getCoords(a.x,"x"),b.y=this.getCoords(a.y,"y"),b.x+=this._layoutData.bounds.x||0,b.y+=this._layoutData.bounds.y||0},SceneBuilder.prototype.setPivot=function(a,b){var c=b.getBounds(),d=new PIXI.Point;switch(a){case"CENTRE":d.x=c.width/2,d.y=c.height/2;break;case"TOP_LEFT":d.x=0,d.y=0;break;case"TOP_RIGHT":d.x=c.width,d.y=0;break;case"BOTTOM_RIGHT":d.x=c.width,d.y=c.height;break;case"BOTTOM_LEFT":d.x=0,d.y=c.height;break;case"TOP":d.x=c.width/2,d.y=0;break;case"BOTTOM":d.x=c.width/2,d.y=c.height;break;case"LEFT":d.x=0,d.y=c.height/2;break;case"RIGHT":d.x=c.width,d.y=c.height/2}b.pivot=d},SceneBuilder.prototype.setScale=function(a,b){b.scale=new PIXI.Point(a.x||1,a.y||1)},SceneBuilder.prototype.getCoords=function(a,b){var c;if(isNaN(a)){var d=parseFloat(a.substr(a,a.indexOf("%")));c="x"==b?this._layoutData.bounds.width*(d/100):this._layoutData.bounds.height*(d/100)}else c=a;return c},SceneBuilder}();Renderer.SceneBuilder=SceneBuilder;var ComponentPlugin=function(a){function b(b,c,d){var e=a.call(this)||this;return e._params=c||{},e._parentComponent=b,e._assets=d,e.validate(),e}return __extends(b,a),b.createPlugins=function(a,b,c){var d={};for(var e in b){var f=b[e];if(!f.class)throw"[ComponentPlugin] No 'class' specified for plugin : "+e;var g=Core.Utils.getReference(f.class),h=new g(a,f.params,c);d[e]=h}return d},b.prototype.init=function(){},b.prototype.destroy=function(){},b.prototype.validate=function(){},b}(PIXI.utils.EventEmitter);Renderer.ComponentPlugin=ComponentPlugin}(Renderer=Core.Renderer||(Core.Renderer={}))}(Core=DO.Core||(DO.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){!function(d){var e=a.Core.Events,f=function(a){function b(b,c,d,e,f,g){void 0===b&&(b=0),void 0===c&&(c=.5),void 0===d&&(d=0),void 0===e&&(e=0),void 0===f&&(f=1e4),void 0===g&&(g=1e4);var h=a.call(this)||this;return h.beginFill(b,c),h.drawRect(d,e,f,g),h}return __extends(b,a),b}(PIXI.Graphics);d.BackgroundDimmer=f;var g=function(a){function c(c,d,e,f,g,h){void 0===c&&(c=b.Environment.defaultSettings.width),void 0===d&&(d=b.Environment.defaultSettings.height),void 0===e&&(e=0),void 0===f&&(f=.5),void 0===g&&(g=0),void 0===h&&(h=0);var i=a.call(this)||this;return i.beginFill(e,f),i.drawRect(g,h,c,d),i}return __extends(c,a),c}(PIXI.Graphics);d.BoundsFiller=g;var h=function(a){function b(b,c,d,e,f,g,h,i,j,k){void 0===b&&(b=1e4),void 0===c&&(c=1e4),void 0===d&&(d=0),void 0===e&&(e=.5),void 0===f&&(f=0),void 0===g&&(g=0),void 0===h&&(h=0),void 0===i&&(i=c/2-1),void 0===j&&(j=3),void 0===k&&(k=16777215);var l=a.call(this)||this;return l.beginFill(d,e),l.lineStyle(j,k),l.drawRoundedRect(f,g,b,c,i),l.endFill(),l.rotation=h,l}return __extends(b,a),b}(PIXI.Graphics);d.RoundedRectPanel=h;var i=function(a){function c(c,d,e,f,g,h){void 0===f&&(f=!1),void 0===g&&(g=!0),void 0===h&&(h=!1);var i=a.call(this)||this;return i.assets=c,i.videoSprite=new PIXI.Sprite,i.videoSprite.width=b.Environment.defaultSettings.width,i.videoSprite.height=b.Environment.defaultSettings.height,e&&(i.videoSprite.anchor.x=.5,i.videoSprite.anchor.y=.5),i.addChild(i.videoSprite),i}return __extends(c,a),c.prototype.setVideo=function(a){this.video=this.assets.getPIXIAsset(a).data,this.videoSprite.texture=PIXI.Texture.from(this.video),this.video.play()},c.prototype.stopVideo=function(){this.video&&this.videoSprite&&(this.video.pause(),this.video.currentTime=0)},c}(PIXI.Container);d.VideoClipWrapper=i;var j=function(a){function b(b,c,d,e,f){void 0===e&&(e=!1),void 0===f&&(f=1);var g=a.call(this)||this;return g.clip=b.getSpineMovieClip(c,d,e),g.clip.state.timeScale=f,g.addChild(g.clip),g}return __extends(b,a),b}(PIXI.Container);d.MovieSpineClipWrapper=j;var k=function(a){function b(b,c,d,e,f){void 0===d&&(d=!1),void 0===e&&(e=!1),void 0===f&&(f=0);var g=a.call(this)||this;return g.clip=b.getMovieClip(c),g.clip.loop=e,d&&g.clip.gotoAndPlay(f),g.addChild(g.clip),g}return __extends(b,a),b}(PIXI.Container);d.MovieClipWrapper=k;var l=function(a){function b(b,c,d){void 0===d&&(d=!0);var e=a.call(this)||this;return e.texture=b.getPIXITexture(c),e.visible=d,e}return __extends(b,a),b}(PIXI.Sprite);d.Image=l;var m=function(b){function d(a,c,d,f){var g=b.call(this)||this;return g._state=!0,g._spriteOn=new PIXI.Sprite(a.getPIXITexture(c)),g.addChild(g._spriteOn),g._spriteOff=new PIXI.Sprite(a.getPIXITexture(d)),g.addChild(g._spriteOff),g.setState(f),g.interactive=!0,g.buttonMode=!0,g.on(e.getTouchEvent(),g.onPress.bind(g)),g.on(e.getClickEvent(),g.onPress.bind(g)),g}return __extends(d,b),d.prototype.getState=function(){return this._state},d.prototype.onPress=function(){this._state&&"splash_show_again_toggle"!==this.name||(this.setState(!this._state),c.SceneManager.getCurrentScene().emit(a.Core.Events.ON_TOGGLE_INTERACTION,this))},d.prototype.setState=function(a){this._state=a,this._spriteOn.visible=a,this._spriteOff.visible=!a},d}(PIXI.Container);d.Toggle=m;var n=function(b){function c(c,d,e){void 0===e&&(e=!0);var f=b.call(this,a.Core.Lang.getPhrase(c),d)||this;return f.setText=function(a,b){void 0===b&&(b=!0),f.text=a,f.updateText(),b&&f.anchor.set(.5,.5),f.pivot.x=0},c=a.Core.Lang.getPhrase(c),f.visible=e,f.once("added",function(){return f.setText(c)}),f}return __extends(c,b),c.prototype.show=function(){var a=this;this.alpha=.75,TweenLite.to(this,.1,{alpha:1,onComplete:function(){a.visible=!0}})},c.prototype.hide=function(){var a=this;TweenLite.to(this,.1,{alpha:0,onComplete:function(){a.visible=!1,a.setText("")}})},c}(PIXI.Text);d.StandardText=n;var o=function(a){function b(b,c){var d=a.call(this)||this;return d._chars=[],d._assets=b,d.once(e.ON_CREATE,function(a){this.setup(a),c&&this.setText(c)}.bind(d)),d}return __extends(b,a),b.prototype.setup=function(a){this._params=a.params;for(var b=0;b<this._params.max_chars;b++){var c=new PIXI.Sprite;c.anchor.x=this._params.doCenter||.5,this._chars.push(c)}},b.prototype.setText=function(a){this.cacheAsBitmap=!1,this.visible=!0;var b=0,c=0,d=0,e=0,f="";this._chars.forEach(function(g){var h=a.substr(b++,1);if(h){if(this._params.mappings[h]){if(g.texture=this._assets.getPIXITexture(this._params.mappings[h]),g.x=c,this._params.breakWords){var i=g.height+(this._params.kerning||0);d+=i}else if(this._params.fixed_width){var j=this._params.fixed_width;"."!=h&&","!=h||(g.x-=25,j=40),c+=j,e+=j}else{var i=g.width+(this._params.kerning||0);c+=i,e+=i}this.addChild(g)}f=h}else this.removeChild(g)}.bind(this)),this.cacheAsBitmap=!0,this.pivot.x=e/2},b.prototype.getParams=function(){return this._params},b.prototype.show=function(){var a=this;TweenLite.to(this,.1,{alpha:1,onComplete:function(){a.visible=!0}})},b.prototype.hide=function(){var a=this;TweenLite.to(this,.1,{alpha:0,onComplete:function(){a.visible=!1}})},b}(PIXI.Container);d.SpriteText=o;var p=function(b){function c(c,d){var e=this;return c=a.Core.Lang.getPhrase(c),e=b.call(this,c,d)||this,e.once(a.Core.Events.ON_CREATE,function(){this._position=this.position.clone(),this.setText(c)}.bind(e)),e}return __extends(c,b),c.prototype.setText=function(a){this.text=a,this.updateText(),this.x=this._position.x-this.textWidth/2,this.y=this._position.y-this.textHeight/2},c}(PIXI.BitmapText);d.BitmapText=p;var q=function(d){function f(c,f,g,h,i,j,k){var l=d.call(this)||this;return l._assets=c,l._textureIdUp=f,l._textureIdDown=h,l._textureIdOver=g,l._uses=j||9999999,l._buttonImage=c.getPIXISprite(f),l.addChild(l._buttonImage),l.interactive=!0,l.buttonMode=!0,l.on(e.getTouchEvent(),l.onPress.bind(l)),l.on(e.getOverEvent(),l.onOver.bind(l)),l.on(e.getOutEvent(),l.onOut.bind(l)),l.on(e.getClickEvent(),l.onPress.bind(l)),i&&(k.align="center",l._label=new PIXI.Text(b.Lang.getPhrase(i),k),l.addChild(l._label),l._label.anchor.x=.5,l._label.anchor.y=.5,l._label.pivot.x=l._label.width/2,l._label.pivot.y=l._label.height/2,l._label.x=l.width/2,l._label.y=l.height/2),l.on(a.Core.Events.ON_DESTROY,function(){this.off(e.getTouchEvent(),this.onPress),this.off(e.getOverEvent(),this.onOver.bind(this)),this.off(e.getOutEvent(),this.onOut.bind(this)),this.off(e.getClickEvent(),this.onPress)}.bind(l)),l}return __extends(f,d),f.prototype.onOver=function(){this._textureIdOver&&(this._buttonImage.texture=this._assets.getPIXITexture(this._textureIdOver))},f.prototype.onOut=function(){this._buttonImage.texture=this._assets.getPIXITexture(this._textureIdUp)},f.prototype.onPress=function(){var b={x:this.scale.x,y:this.scale.y};this.scale.x=.9*b.x,this.scale.y=.9*b.y,this._textureIdDown&&(this._buttonImage.texture=this._assets.getPIXITexture(this._textureIdDown)),a.Core.Time.juggler.setTimeout(function(){this.scale=b,this._buttonImage.texture=this._assets.getPIXITexture(this._textureIdUp),c.SceneManager.getCurrentScene().emit(a.Core.Events.ON_INTERACTION,this,this.name),this._uses--,this._uses>0?this.interactive=!0:this.interactive=!1}.bind(this),150)},f.prototype.getLabel=function(){return this._label},f.prototype.show=function(){var a=this;TweenLite.to(this,.1,{alpha:1,onComplete:function(){a.visible=!0,a.interactive=!0}})},f.prototype.hide=function(){var a=this;TweenLite.to(this,.1,{alpha:0,onComplete:function(){a.visible=!1,a.interactive=!1}})},f.prototype.fadeOut=function(){this.alpha=.5},f.prototype.fadeIn=function(){this.alpha=1},f.prototype.disable=function(){this.visible&&(this.alpha=.5),this.interactive=!1},f.prototype.enable=function(){this.visible&&(this.alpha=1,this.interactive=!0)},f}(PIXI.Container);d.SpriteButton=q;var r=function(b){function d(c,d,f,g,h,i,j,k){var l=b.call(this)||this;return l._assets=c,l._clipName=d,l._clipWinName=f,l._clipLossName=g,l._buttonNormal=c.getMovieClip(d),l._buttonNormal.loop=!0,l._buttonNormal.gotoAndPlay(0),l.addChild(l._buttonNormal),l.textPosition=k,l.interactive=!0,l.buttonMode=!0,j&&(l.hitArea=new PIXI.Rectangle(l.x+j.x,l.y+j.y,j.w,j.h)),l.on(e.getTouchEvent(),l.onPress.bind(l)),l.on(e.getOverEvent(),l.onOver.bind(l)),l.on(e.getOutEvent(),l.onOut.bind(l)),l.on(e.getClickEvent(),l.onPress.bind(l)),i.align="center",l._labelStyle=i,l.on(a.Core.Events.ON_DESTROY,function(){l.off(e.getTouchEvent(),l.onPress),l.off(e.getOverEvent(),l.onOver.bind(l)),l.off(e.getOutEvent(),l.onOut.bind(l)),l.off(e.getClickEvent(),l.onPress),l.removeChildren()}),l._scaleX=l.scale.x,l._scaleY=l.scale.y,l}return __extends(d,b),d.prototype.onOver=function(){this.interactive&&(this.scale.x=this._scaleX+.03,this.scale.y=this._scaleY+.03)},d.prototype.onOut=function(){this.interactive&&(this.scale.x=this._scaleX,this.scale.y=this._scaleY)},d.prototype.onPress=function(){this.interactive=!1,this.scale.x=this._scaleX,this.scale.y=this._scaleY,c.SceneManager.getCurrentScene().emit(a.Core.Events.ON_INTERACTION,this,this.name)},d.prototype.onShowPrize=function(a,b,c){var d=this;void 0===b&&(b=!0);var e=b?this._clipWinName:this._clipLossName;this.interactive=!1;var f=this._assets.getMovieClip(e);f.loop=!1,this.addChild(f),c?(f.onComplete=function(){d._prizeLabel=new PIXI.Text(a,d._labelStyle),d.addChild(d._prizeLabel),d._prizeLabel.anchor.x=.5,d._prizeLabel.anchor.y=.5,d._prizeLabel.pivot.x=d._prizeLabel.width/2,d._prizeLabel.pivot.y=d._prizeLabel.height/2,d.textPosition?(d._prizeLabel.x=d.textPosition.x,d._prizeLabel.y=d.textPosition.y):(d._prizeLabel.x=d.width/2,d._prizeLabel.y=d.height/2),c()},f.gotoAndPlay(0)):(this._prizeLabel=new PIXI.Text(a,this._labelStyle),this.addChild(this._prizeLabel),this._prizeLabel.anchor.x=.5,this._prizeLabel.anchor.y=.5,this._prizeLabel.pivot.x=this._prizeLabel.width/2,this._prizeLabel.pivot.y=this._prizeLabel.height/2,this.textPosition?(this._prizeLabel.x=this.textPosition.x,this._prizeLabel.y=this.textPosition.y):(this._prizeLabel.x=this.width/2,this._prizeLabel.y=this.height/2),f.gotoAndPlay(f.totalFrames-1)),this.removeChild(this._buttonNormal)},d.prototype.onShowDisablePrize=function(a){this.interactive=!1;var b=this._assets.getMovieClip(this._clipLossName);b.loop=!1,this.addChild(b),b.gotoAndPlay(b.totalFrames-1),this.removeChild(this._buttonNormal)},d.prototype.getPrizeLabel=function(){return this._prizeLabel},d}(PIXI.Container);d.BonusPick=r;var s=function(b){function d(c,d,f,g,h,i){var j=b.call(this)||this;return j._assets=c,j._clipName=d,j._clipWinName=f,j._clipLossName=g,j._buttonNormal=c.getMovieClip(d),j._buttonNormal.loop=!0,j._buttonNormal.gotoAndPlay(0),j.addChild(j._buttonNormal),i&&c.getMovieClip(i)&&(j._buttonOver=c.getMovieClip(i),j._buttonOver.loop=!0,j._buttonOver.gotoAndPlay(0),j._buttonOver.visible=!1,j.addChild(j._buttonOver)),j.interactive=!0,j.buttonMode=!0,h&&(j.hitArea=new PIXI.Rectangle(j.x+h.x,j.y+h.y,h.w,h.h)),j.on(e.getTouchEvent(),j.onPress.bind(j)),j.on(e.getOverEvent(),j.onOver.bind(j)),j.on(e.getOutEvent(),j.onOut.bind(j)),j.on(e.getClickEvent(),j.onPress.bind(j)),j.on(a.Core.Events.ON_DESTROY,function(){j.off(e.getTouchEvent(),j.onPress.bind(j)),j.off(e.getOverEvent(),j.onOver.bind(j)),j.off(e.getOutEvent(),j.onOut.bind(j)),j.off(e.getClickEvent(),j.onPress.bind(j)),j.removeChildren()}),j._scaleX=j.scale.x,j._scaleY=j.scale.y,j}return __extends(d,b),d.prototype.onOver=function(){this.interactive&&(this._buttonOver?(this._buttonOver.visible=!0,this._buttonNormal.visible=!1):(this.scale.x=this._scaleX+.05,this.scale.y=this._scaleY+.05))},d.prototype.onOut=function(){this.interactive&&(this._buttonOver&&(this._buttonOver.visible=!1,this._buttonNormal.visible=!0),this.scale.x=this._scaleX,this.scale.y=this._scaleY)},d.prototype.onPress=function(){this._buttonOver&&(this._buttonOver.visible=!1,this._buttonNormal.visible=!0),this.interactive=!1,this.scale.x=this._scaleX,this.scale.y=this._scaleY,c.SceneManager.getCurrentScene().emit(a.Core.Events.ON_INTERACTION,this,this.name)},d.prototype.onShowPrize=function(a,b){void 0===a&&(a=!0);var c=a?this._clipWinName:this._clipLossName;this.interactive=!1;var d=this._assets.getMovieClip(c);d.loop=!1,this.addChild(d),b?(d.onComplete=function(){b()},d.gotoAndPlay(0)):d.gotoAndPlay(d.totalFrames-1),this.removeChild(this._buttonNormal)},d.prototype.onShowDisablePrize=function(){this.interactive=!1;var a=this._assets.getMovieClip(this._clipLossName);a.loop=!1,this.addChild(a),a.gotoAndPlay(a.totalFrames-1),this.removeChild(this._buttonNormal)},d}(PIXI.Container);d.BonusOption=s;var t=function(a){function c(c,d,e){var f=a.call(this)||this;f._assets=c,f._textureName=d;var g=new PIXI.Graphics;return g.beginFill(0,.01),g.drawRect(0,0,b.Environment.defaultSettings.width,90),f.addChild(g),f._symbol=new PIXI.Sprite(c.getPIXITexture(d+":BL")),f._symbol.anchor.x=.5,f._symbol.anchor.y=0,f._symbol.visible=!1,f.addChild(f._symbol),f._msg=new PIXI.Text(" ",e),f._msg.anchor.x=.5,f._msg.anchor.y=.5,f._msg.pivot.x=f._msg.width/2,f._msg.pivot.y=f._msg.height/2,f._msg.x=f.width/2,f._msg.y=f.height/2,f.addChild(f._msg),f.visible=!1,f}return __extends(c,a),c.prototype.showMessagePanel=function(a){this._msg.text="",this._msg.text=a,this._msg.anchor.x=.5,this.alpha=1,this.visible=!0,this._symbol.visible=!1},c.prototype.showWinMessagePanel=function(a,b){this.showMessagePanel(b),this._symbol.texture=this._assets.getPIXITexture(this._textureName+":"+a),this._symbol.visible=!0,this._msg.anchor.x=.43,this._symbol.x=this._msg.x-this._msg.width/2},c.prototype.hideMessagePanel=function(){this._symbol.visible=!1,TweenLite.to(this,.5,{alpha:0})},c}(PIXI.Container);d.PlayerMessagePanel=t}(c.UI||(c.UI={}))}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){!function(b){!function(b){function c(b,c,d,e){c=Number(c)||0,d=Number(d)||.25,e=Number(e||5);var f=b.scale.x,g=b.scale.y;b.visible=!1,b.scale.x=.7*f,b.scale.y=.7*g,a.Core.Time.juggler.setTimeout(function(){b.visible=!0,TweenLite.to(b.scale,d,{x:f,y:g,ease:Back.easeOut.config(e)})},c)}function d(b,c,d,e){c=Number(c)||0,d=Number(d)||.4,e=Number(e)||1.3;var f=b.scale.x,g=b.scale.y;b.scale.x=e,b.scale.y=e,a.Core.Time.juggler.setTimeout(function(){TweenLite.to(b.scale,d,{x:f,y:g,ease:Cubic.easeOut})},c)}function e(b,c,d){c=Number(c)||0,d=Number(d)||.5,b.alpha=0,b.visible=!0,a.Core.Time.juggler.setTimeout(function(){TweenLite.to(b,d,{alpha:1})},c)}function f(b,c,d){c=Number(c)||0,d=Number(d)||.5,b.alpha=1,a.Core.Time.juggler.setTimeout(function(){TweenLite.to(b,d,{alpha:0,onComplete:function(){b.visible=!1}})},c)}b.popOut=c,b.slam=d,b.fadeIn=e,b.fadeOut=f}(b.FX||(b.FX={}))}(b.UI||(b.UI={}))}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){!function(c){var d=function(){function b(a){this.speed=100,this.totalLength=0,this._waypoints=[],this.id=a}return b.prototype.addWaypoint=function(a){var b={x:a.x,y:a.y};this._waypoints.push(b),this.calcPathLength(),b.distance=this.totalLength},b.prototype.getPosition=function(b){for(var c,d=a.Core.Maths.normalize(b/1e3*this.speed,this.totalLength),e=this._waypoints.length-2;e>=0;e--){var f=this._waypoints[e];if(d>f.distance){var g=this._waypoints[e+1],h=g.distance-f.distance,i=d-f.distance,j=i/h;c=new PIXI.Point(a.Core.Maths.lerp(f.x,g.x,j),a.Core.Maths.lerp(f.y,g.y,j));break}}return c},b.prototype.calcPathLength=function(){this.totalLength=0;for(var b=this._waypoints[0],c=0;c<this._waypoints.length;c++)this.totalLength+=a.Core.Maths.calcDistance(b,this._waypoints[c]),b=this._waypoints[c]},b}();c.ParticlePath=d;var e=function(){function c(a){this.emitDuration=-1,this.emitRate=2,this.lifetime={min:1e3,max:3e3},this.scale={min:1,max:1},this.rotation={min:0,max:360},this.gravity={x:0,y:8},this.speed={min:20,max:40},this.spin={min:0,max:0},this.shrinkFactor=0,this.drag=0,this.acceleration=0,this.direction={min:0,max:360},this.maxParticles=10,this.turbulence={min:0,max:0},this.blendMode=PIXI.BLEND_MODES.NORMAL,this.doRandomTextures=!1,this._textures=[],this._clips=[],this._paths={},a=a||{},this.emitDuration=a.emitDuration||1e3,this.emitRate=a.emitRate||1,this.lifetime=a.lifetime||{min:1e3,max:1e3},this.scale=a.scale||{min:1,max:1},this.rotation=a.rotation||{min:0,max:0},this.gravity=a.gravity||{x:0,y:0},this.speed=a.speed||{min:10,max:10},this.spin=a.spin||{min:0,max:0},this.shrinkFactor=a.shrinkFactor||0,this.drag=a.drag||0,this.direction=a.direction||{min:0,max:360},this.maxParticles=a.maxParticles||10,this.turbulence=a.turbulence||{min:0,max:0},this.blendMode=a.blendMode||PIXI.BLEND_MODES.NORMAL,this.autoStart=a.autoStart||!1,this.textures=a.textures,this.movieclips=a.movieclips,this.paths=a.paths,this.doRandomTextures=a.random_textures,this.touchCallback=a.touch_callback,this.acceleration=a.acceleration||0}return c.prototype.createPath=function(a){var b=new d(a);return this._paths[a]=b,b},c.prototype.setPath=function(a){this._currentPath=this._paths[a]},c.prototype.clearCurrentPath=function(){this._currentPath=null},c.prototype.getNextPosition=function(a){return this._currentPath?this._currentPath.getPosition(a):new PIXI.Point(0,0)},c.prototype.getNextTexture=function(){return this.doRandomTextures?this._textures[b.Maths.getRandomRange(0,this._textures.length-1,!0)]:(this._textures.unshift(this._textures.pop()),this._textures[0])},c.prototype.getNextMovieClip=function(){return this._clips.unshift(this._clips.pop()),this._clips[0]},c.prototype.addTexture=function(a){this._textures.push(a)},c.prototype.addMovieClip=function(b,c){for(var d=0;d<this.maxParticles;d++){var e=b.getMovieClip(c,!0,null,!0);e.loop=!0,this._clips.push(e)}this._clips=a.Core.Utils.shuffleArray(this._clips)},c}();c.ParticleSetup=e;var f=function(b){function c(a,c){var d=b.call(this)||this;return d.isActive=!1,d._dir={x:0,y:0},d._g={x:0,y:0},d._spin=0,d._shrink=0,d._container=a,d._juggler=c,d}return __extends(c,b),c.prototype.onUpdate=function(a){var b=.001*a;this.x+=this._speed*this._dir.x*b,this.y+=this._speed*this._dir.y*b,this._speed+=this._acceleration*b,this._speed-=this._drag*b,this._g.x+=this._gravity.x*b,this._g.y+=this._gravity.y*b,this.x+=this._g.x*b,this.y+=this._g.y*b,this.rotation+=this._spin*b,this._life-=a,this._life<=0&&this.kill(),this.scale.x-=this._shrink*b,this.scale.y-=this._shrink*b,this.scale.x<.01&&this.kill(),this.x+=Math.sin(this.rotation)*this._turbulence*b,this.y-=Math.cos(this.rotation)*this._turbulence*b},c.prototype.start=function(b,c){this._onDead=b,this.isActive=!0,this._container.addChild(this),this._juggler.add(this),this.blendMode=c.blendMode,this._clip&&(this.removeChild(this._clip),this._clip=null);var d=c.getNextTexture();this._clip=c.getNextMovieClip(),d?this.texture=d:(this.addChild(this._clip),this._clip.play()),this.anchor.x=.5,this.anchor.y=.5;var e=a.Core.Maths.getRandomRange;this._shrink=c.shrinkFactor;var f=e(c.scale.min,c.scale.max);this.scale.x=f,this.scale.y=f,this._spin=e(c.spin.min,c.spin.max),this._life=e(c.lifetime.min,c.lifetime.max),this._direction=e(c.direction.min,c.direction.max),this._rotation=e(c.rotation.min,c.rotation.max),this._speed=e(c.speed.min,c.speed.max),this._shrink=c.shrinkFactor,this._drag=c.drag,this._gravity=c.gravity,this._dir={x:a.Core.Maths.Dsin(this._direction),y:-a.Core.Maths.Dcos(this._direction)},this._g={x:0,y:0},this._turbulence=e(c.turbulence.min,c.turbulence.max),this._acceleration=c.acceleration},c.prototype.kill=function(){this.isActive=!1,this._container.removeChild(this),this._juggler.remove(this),this._onDead(this)},c}(PIXI.Sprite);c.Particle=f;var g=function(b){function c(){var c=b.call(this)||this;return c.isActive=!1,c._particles=[],c._activeCount=0,c.interactive=!1,c.interactiveChildren=!1,c.once(a.Core.Events.ON_DESTROY,function(){this.stop()}.bind(c)),c.once(a.Core.Events.ON_CREATE,function(a,b){if(a&&a.params){var c=new e(a.params);if(c.movieclips&&c.movieclips.forEach(function(a){c.addMovieClip(b.getAssets(),a)}.bind(this)),c.textures&&c.textures.forEach(function(a){var d=b.getAssets().getPIXITexture(a);c.addTexture(d)}.bind(this)),c.paths){for(var d in c.paths)!function(a){var b=c.createPath(a),d=c.paths[a];b.speed=d.speed||10,d.waypoints.forEach(function(a){b.addWaypoint(new PIXI.Point(a.x,a.y))}),c.setPath(a)}(d)}this.init(c)}}.bind(c)),c}return __extends(c,b),c.prototype.init=function(b,c){this._setup=b,this._juggler=c||a.Core.Time.juggler;for(var d=0;d<this._setup.maxParticles;d++){var e=new f(this,this._juggler);this._particles.push(e)}this._setup.autoStart&&this.start()},c.prototype.setInteraction=function(a){this._touchCallback=a,a?(this.interactive=!0,
this.interactiveChildren=!0,this._particles.forEach(function(a){a.interactive=!0,a.on("mousedown",this._touchCallback)}.bind(this))):(this.interactive=!1,this.interactiveChildren=!1,this._particles.forEach(function(a){a.interactive=!1,a.off("mousedown",this._touchCallback)}.bind(this)))},c.prototype.start=function(){this.isActive||(this.isActive=!0,this._activeCount=0,this._time=0,this._juggler.add(this),this._emissionStopDelay=this._juggler.setTimeout(function(){this.stop()}.bind(this),this._setup.emitDuration),this._emissionDelay=this._juggler.setInterval(this.emitParticles.bind(this),1e3/this._setup.emitRate))},c.prototype.stop=function(){this.isActive&&(this._juggler.remove(this),this._emissionDelay.stop(),this._emissionStopDelay.stop(),this.isActive=!1)},c.prototype.onUpdate=function(a){this._time+=a},c.prototype.emitParticles=function(){var a=this.getParticle();a&&(a.position=this._setup.getNextPosition(this._time)||a.position,this._activeCount++,a.start(this.onParticleDied.bind(this),this._setup))},c.prototype.getParticle=function(){for(var a=null,b=0;b<this._particles.length;b++)if(!this._particles[b].isActive){a=this._particles[b];break}return a},c.prototype.onParticleDied=function(a){0==--this._activeCount&&this.stop()},c}(PIXI.Container);c.Particles=g}(c.FX||(c.FX={}))}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){void 0===b&&(b=!0),void 0===c&&(c=10),void 0===d&&(d=20),void 0===e&&(e=20),void 0===f&&(f=30),void 0===g&&(g=0),void 0===h&&(h=1),void 0===i&&(i=3),void 0===j&&(j=5),void 0===k&&(k=.08),void 0===l&&(l=.12),this.data={},this.isActive=!1,this.target=a,this.isActive=b,this.data.minX=c,this.data.maxX=d,this.data.minY=e,this.data.maxY=f,this.data.minDelay=g,this.data.maxDelay=h,this.data.minTime=i,this.data.maxTime=j,this.data.minAngle=k,this.data.maxAngle=l,this.isActive&&this.start()}return a.prototype.start=function(){this.moveX(1),this.moveY(-1),this.rotate(1)},a.prototype.updateState=function(a){this.isActive=a,this.isActive||(this.tweenForX&&(this.tweenForX.kill(),this.tweenForX=null),this.tweenForY&&(this.tweenForY.kill(),this.tweenForY=null),this.tweenForA&&(this.tweenForA.kill(),this.tweenForA=null))},a.prototype.rotate=function(a){var b=this;this.tweenForA=TweenLite.to(this.target,parseFloat(this.random(this.data.minTime,this.data.maxTime).toString()),{rotation:this.random(this.data.minAngle,this.data.maxAngle,a),delay:this.random(this.data.minDelay,this.data.maxDelay),ease:Sine.easeInOut,onComplete:function(){b.isActive&&b.rotate(-1*a)}})},a.prototype.moveX=function(a){var b=this;this.tweenForX=TweenLite.to(this.target,parseFloat(this.random(this.data.minTime,this.data.maxTime).toString()),{x:this.target.x+this.random(this.data.minX,this.data.maxX,a),ease:Sine.easeInOut,onComplete:function(){b.isActive&&b.moveX(-1*a)}})},a.prototype.moveY=function(a){var b=this;this.tweenForY=TweenLite.to(this.target,parseFloat(this.random(this.data.minTime,this.data.maxTime).toString()),{y:this.target.y+this.random(this.data.minY,this.data.maxY,a),ease:Sine.easeInOut,onComplete:function(){b.isActive&&b.moveY(-1*a)}})},a.prototype.random=function(a,b,c){return void 0===c&&(c=1),(a+(b-a)*Math.random())*c},a}();a.Floating=b}(a.FX||(a.FX={}))}(a.Renderer||(a.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){a.HANDLE_ALERT_RESPONSE="handle_alert_response",a.HANDLE_INIT_RESPONSE="handle_init_response",a.HANDLE_RESULT_RESPONSE="handle_result_response",a.REQUEST_RESULTS="request_results",a.CONFIGURE_BET_DETAILS="configure_bet_details",a.SEND_START_REQUEST="send_start_request",a.SEND_PlAY_REQUEST="send_play_request",a.SEND_CONTINUE_REQUEST="send_continue_request",a.RECEIVE_SERVER_RESPONSE="receive_server_response",a.SEND_HISTORY_REQUEST="send_history_request",a.SEND_ROUND_END="send_round_end_request",a.SEND_ROUND_START="send_round_start_request",a.SEND_DEPOSIT_REQUEST="send_deposit_request",a.SEND_RELOAD_REQUEST="send_reload_request",a.SEND_LOBBY_REQUEST="send_lobby_request",a.SEND_LOAD_COMPLETED="send_load_completed",a.SEND_UPDATE_STAKE="send_update_response",a.SEND_GAME_IS_READY="send_game_is_ready_response",a.SEND_GAME_ERROR="send_game_error_response",a.SEND_GAMBLE_BUTTON_REQUEST="send_red_request",a.BASE="BASE",a.FREE_SPINS="FREE_SPINS",a.RE_SPIN="RE_SPIN",a.CASCADE="CASCADE",a.BONUS="BONUS",a.HOLD_FREE_SPINS="HOLD_FREE_SPINS",a.MULTI_LEVEL_BONUS="MULTI_LEVEL_BONUS",a.GAMBLE="GAMBLE",a.SPLASH="SPLASH",a.isPaytableVisible=!1,a.isbetSelect=!1,a.isGamble=!1,a.isGambleExit=!1,a.isAutoplay=!1,a.isIdleMode=!1,a.SoundVolume=!0,a.stopContinueCallRespin=!1}(a.Server||(a.Server={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var __awaiter=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){a.done?e(a.value):new c(function(b){b(a.value)}).then(g,h)}i((d=d.apply(a,b||[])).next())})},__generator=this&&this.__generator||function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,f&&(g=f[2&c[0]?"return":c[0]?"throw":"next"])&&!(g=g.call(f,c[1])).done)return g;switch(f=0,g&&(c=[0,g.value]),c[0]){case 0:case 1:g=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,f=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(g=i.trys,!(g=g.length>0&&g[g.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!g||c[1]>g[0]&&c[1]<g[3])){i.label=c[1];break}if(6===c[0]&&i.label<g[1]){i.label=g[1],g=c;break}if(g&&i.label<g[2]){i.label=g[2],i.ops.push(c);break}g[2]&&i.ops.pop(),i.trys.pop();continue}c=b.call(a,i)}catch(a){c=[6,a],f=0}finally{e=g=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e,f,g,h,i={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return h={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h},DO;!function(a){!function(b){!function(c){function d(a,b){new(h.getReference(a.class))(a,b)}var e=a.Core.Lang,f=a.Core.Time,g=a.Core.Environment,h=a.Core.Utils,i=function(){function a(a,b,c,d){this._connection=a,this._juggler=f.juggler,this.addEventsHandler(),this._rgsConnector=c,this._rgsConnector.createConnection(b),this._responseResult=d}return a.prototype.addEventsHandler=function(){var a=this;b.ApplicationBase.instance.on(c.SEND_START_REQUEST,function(b){a._rgsConnector.sendStartRequest(b)}),b.ApplicationBase.instance.on(c.SEND_PlAY_REQUEST,function(b){a._rgsConnector.sendPlayRequest(b)}),b.ApplicationBase.instance.on(c.SEND_CONTINUE_REQUEST,function(b){a._rgsConnector.sendContinueRequest(b)}),b.ApplicationBase.instance.on(c.SEND_GAMBLE_BUTTON_REQUEST,function(b){a._rgsConnector.sendGambleRequest(b)}),b.ApplicationBase.instance.on(c.SEND_HISTORY_REQUEST,function(b){a._rgsConnector.sendHistoryRequest(b)}),b.ApplicationBase.instance.on(c.SEND_ROUND_END,function(b){a._rgsConnector.sendRounEndRequest(b)}),b.ApplicationBase.instance.on(c.SEND_LOBBY_REQUEST,function(){a._rgsConnector.sendLobbyRequest()}),b.ApplicationBase.instance.on(c.SEND_RELOAD_REQUEST,function(){a._rgsConnector.sendReloadGameRequest()}),b.ApplicationBase.instance.on(c.SEND_DEPOSIT_REQUEST,function(){a._rgsConnector.sendDepositRequest()}),b.ApplicationBase.instance.on(b.GameEvents.ON_LOAD_PROGRESS,function(b){a._rgsConnector.sendLoadProgressRequest((100*b).toFixed(2))}),b.ApplicationBase.instance.on(c.SEND_UPDATE_STAKE,function(b){a._rgsConnector.sendUpdateStakeRequest(b)}),b.ApplicationBase.instance.on(c.SEND_GAME_IS_READY,function(){a._rgsConnector.sendGameIsReadyRequest()}),b.ApplicationBase.instance.on(c.SEND_GAME_ERROR,function(){a._rgsConnector.sendGameErrorRequest()}),b.ApplicationBase.instance.on(c.SEND_ROUND_START,function(){a._rgsConnector.sendRoundStartRequest()}),b.ApplicationBase.instance.on(c.SEND_LOAD_COMPLETED,function(){a._rgsConnector.sendLoadCompletedRequest()}),b.ApplicationBase.instance.on(c.RECEIVE_SERVER_RESPONSE,function(d){d.gameState?d.gameState=JSON.parse(d.gameState):d.gameState={requestType:c.BASE,nextRequestType:c.BASE},d.jackpotConfig&&(d.jackpotConfig=JSON.parse(d.jackpotConfig)),d.jackpotData&&(d.jackpotData=JSON.parse(d.jackpotData)),"start"===d.action?(a._responseResult.updateDate(d),a._responseResult.setGameConfig(),b.ApplicationBase.instance.emit(c.HANDLE_INIT_RESPONSE),b.ApplicationBase.instance.emit(c.CONFIGURE_BET_DETAILS,a._responseResult.getGameConfig())):(a._responseResult.updateDate(d),b.ApplicationBase.instance.emit(c.HANDLE_RESULT_RESPONSE))})},a}();c.ServerConnection=i;var j=function(){function d(a){var d=this;this.forceValues=null,this.sendRequest=function(a,b){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(c){return this.connection.isSocket||(this.connector.open("POST",a,!0),this.connector.setRequestHeader("Content-Type","application/json;charset=UTF-8"),this.connector.withCredentials=!1),this.forceValues&&b&&(b.extraData||(b.extraData={}),b.extraData.force=this.forceValues),b.extraData&&(b.extraData=JSON.stringify(b.extraData)),this.connector.send(JSON.stringify(b)),this.forceValues=null,[2]})})},this.sendStartRequest=function(a){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(a){return this.sendRequest(this.getServerURL("start"),{gameId:g.launchVariables.gameId,currency:g.launchVariables.currency,extraData:g.launchVariables.extraData||null,account:{platformId:g.launchVariables.platformId,operatorCode:g.launchVariables.operatorCode,brandCode:g.launchVariables.brandCode,token:g.launchVariables.token,playerId:g.launchVariables.playerId,sessionId:g.launchVariables.sessionId}}),[2]})})},this.sendPlayRequest=function(a){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(d){return a.isBroken?(b.ApplicationBase.instance.emit(c.HANDLE_RESULT_RESPONSE),l.current.setBrokenGameState(!1)):this.sendRequest(this.getServerURL("play"),{gameId:g.launchVariables.gameId,betValue:a.bet,isBuyout:a.isBuyout||!1,freeRoundId:a.freeRoundId||null,extraData:a.extraData||null,account:{platformId:g.launchVariables.platformId,operatorCode:g.launchVariables.operatorCode,brandCode:g.launchVariables.brandCode,token:g.launchVariables.token,playerId:g.launchVariables.playerId,sessionId:g.launchVariables.sessionId}}),[2]})})},this.sendContinueRequest=function(a){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(b){return a.extraData||(a.extraData={}),a.extraData.pick=a.pickId,this.sendRequest(this.getServerURL("continue"),{gameId:g.launchVariables.gameId,freeRoundId:a.freeRoundId||null,extraData:a.extraData||null,account:{platformId:g.launchVariables.platformId,operatorCode:g.launchVariables.operatorCode,brandCode:g.launchVariables.brandCode,token:g.launchVariables.token,playerId:g.launchVariables.playerId,sessionId:g.launchVariables.sessionId}}),[2]})})},this.sendGambleRequest=function(a){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(a){return this.sendRequest(this.getServerURL("gamble"),{gameId:g.launchVariables.gameId,extraData:g.launchVariables.extraData||null,account:{platformId:g.launchVariables.platformId,operatorCode:g.launchVariables.operatorCode,brandCode:g.launchVariables.brandCode,token:g.launchVariables.token,playerId:g.launchVariables.playerId,sessionId:g.launchVariables.sessionId}}),[2]})})},this.sendHistoryRequest=function(a){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(b){return this.sendRequest(this.getServerURL("history"),{gameId:g.launchVariables.gameId,page:a.page||0,account:{platformId:g.launchVariables.platformId,operatorCode:g.launchVariables.operatorCode,brandCode:g.launchVariables.brandCode,token:g.launchVariables.token,playerId:g.launchVariables.playerId,sessionId:g.launchVariables.sessionId}}),window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onShowHistory",data:{}}})),[2]})})},this.sendRoundDetailRequest=function(a){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(b){return this.sendRequest(this.getServerURL("roundDetail"),{page:a.roundId}),window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onShowRoundHistory",data:{}}})),[2]})})},this.sendLobbyRequest=function(){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(a){return window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onGameExit",data:{}}})),[2]})})},this.sendReloadGameRequest=function(){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(a){return window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onReloadGame",data:{}}})),window.location.reload(),[2]})})},this.sendDepositRequest=function(){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(a){return window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onDepositClicked",data:{}}})),[2]})})},this.sendLoadProgressRequest=function(a){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(b){return window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onLoadProgress",data:{progress:a}}})),[2]})})},this.sendLoadCompletedRequest=function(){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(a){return window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onGameLoaded",data:{}}})),[2]})})},this.sendGameIsReadyRequest=function(){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(a){return window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onGameReady",data:{}}})),[2]})})},this.sendGameExitRequest=function(){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(a){return window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onGameReload",data:{}}})),[2]})})},this.sendGameErrorRequest=function(){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(a){return window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"OnErrorShown",data:{}}})),[2]})})},this.sendRoundStartRequest=function(){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(a){return window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onRoundStart",data:{}}})),[2]})})},this.sendRounEndRequest=function(a){return void 0===a&&(a={}),__awaiter(d,void 0,void 0,function(){return __generator(this,function(b){return this.sendRequest(this.getServerURL("endRound"),{gameId:g.launchVariables.gameId,freeRoundId:a.freeRoundId||null,extraData:a.extraData||null,account:{platformId:g.launchVariables.platformId,operatorCode:g.launchVariables.operatorCode,brandCode:g.launchVariables.brandCode,token:g.launchVariables.token,playerId:g.launchVariables.playerId,sessionId:g.launchVariables.sessionId}}),window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onRoundEnd",data:{}}})),[2]})})},this.sendUpdateStakeRequest=function(a){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(b){return window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onBetChange",data:{bet:a}}})),[2]})})},this.sendUpdateWinRequest=function(a){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(b){return window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onWinUpdate",data:{bet:a}}})),[2]})})},this.sendAutoPlayStartRequest=function(){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(a){return window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onAutoPlayStart",data:{}}})),[2]})})},this.sendAutoPlayStopRequest=function(){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(a){return window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onAutoPlayStop",data:{}}})),[2]})})},this.sendFreeRoundsStartRequest=function(){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(a){return window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onFreeRoundsStart",data:{}}})),[2]})})},this.sendFreeRoundsEndRequest=function(){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(a){return window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onFreeRoundsEnd",data:{}}})),[2]})})},this.sendBalanceUpdateRequest=function(){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(a){return window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onBalanceUpdate",data:{}}})),[2]})})},this.sendShowHelpRequest=function(){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(a){return window.dispatchEvent(new CustomEvent("handleWrapperMessage",{detail:{type:"onShowHelp",data:{}}})),[2]})})},this.connection=a,b.ApplicationBase.instance.on(b.GameEvents.SET_FORCE_VALUES,function(a){d.forceValues=a})}return d.prototype.createConnection=function(a){return __awaiter(this,void 0,void 0,function(){var b=this;return __generator(this,function(c){return this.connection.isSocket?(this.connector=new WebSocket(this.getServerURL()),this.connector.onopen=function(b){a()},this.connector.onmessage=function(a){b.receivedResponse(JSON.parse(a.data))},this.connector.onerror=function(a){b.showAlertMessage(JSON.parse(a.data))}):(this.connector=new XMLHttpRequest,this.connector.onreadystatechange=function(){4===b.connector.readyState&&(200===b.connector.status?b.receivedResponse(JSON.parse(b.connector.response)):b.showAlertMessage(JSON.parse(b.connector.response)))},a()),[2]})})},d.prototype.getServerURL=function(a){void 0===a&&(a=void 0);var b=this.connection.url;return this.connection.isSocket||(b+="history"===a||"roundDetail"===a?"/game/"+a:"/server/"+a),b},d.prototype.receivedResponse=function(d){d.error&&""!==d.error?this.showAlertMessage(d):"endRound"===d.action?a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!1):"history"===d.action||"roundDetail"===d.action||b.ApplicationBase.instance.emit(c.RECEIVE_SERVER_RESPONSE,d)},d.prototype.showAlertMessage=function(a){var d=a.error?a.error:e.getPhrase("messageGenericErrorTitle");b.ApplicationBase.instance.emit(c.HANDLE_ALERT_RESPONSE,new c.ResponseAlert({lang:d,err:{msg:d},fatal:!0}))},d}();c.RGSConnector=j;var k=function(){function a(a){var b=this;this.getRTP=function(){return b._response.gameConfig.rtp},this.getBetValues=function(){var a;return b._response.gameConfig.betLevels&&b._response.gameConfig.betLevels.length>0?(a=b._response.gameConfig.betLevels,!b._response.isRoundFinished&&b._response.gameState&&a.indexOf(b._response.gameState.betValue)<0&&a.push(b._response.gameState.betValue)):a=g.defaultSettings.betValues,a},this.getDefaultBetIndex=function(){return b._response.isRoundFinished?b._response.gameConfig.defaultBetIndex>=0&&b._response.gameConfig.defaultBetIndex<b.getBetValues().length?b._response.gameConfig.defaultBetIndex:g.defaultSettings.defaultBetIndex:b.getBetValues().indexOf(b._response.gameState.betValue)},this.isSweepStakeGame=function(){return"sweepstake"==g.launchVariables.gameModeType},this.getFixedBet=function(){return g.defaultSettings.fixedBet},this.getAutoPlayValues=function(){return b._response.gameConfig.autoValues||g.defaultSettings.autoValues},this.getDefaultAutoPlayValue=function(){return b._response.gameConfig.defaultAutoValue||g.defaultSettings.defaultAutoValue},this.getCurrencyCode=function(){return b._response.currency||g.launchVariables.currency},this.getCurrencyDecimalPlaces=function(){return g.defaultSettings.currencyDecimalPlaces},this.getLocaleId=function(){return g.launchVariables.localeId},this.isUseGrouping=function(){return g.defaultSettings.useGrouping},this.isUKGC=function(){return b._response.gameConfig.isUKGC||g.defaultSettings.ukgc},this.isRealityCheckSettingsAllowed=function(){return b._response.gameConfig.isRealityCheck||g.defaultSettings.realityCheckSettingsAllowed},this.isQuickSpinAllowed=function(){return b._response.gameConfig.allowedQuickSpin||g.defaultSettings.allowedQuickSpin},this.getSpinDuration=function(){return g.defaultSettings.spinDuration*(b.isUKGC()?3:2)},this.isSlamStopAllowed=function(){return b._response.gameConfig.slamStopAllowed||g.defaultSettings.slamStopAllowed},this.isAutoPlayDisplay=function(){return b._response.gameConfig.showAutoplay||g.defaultSettings.showAutoplay},this.maxBetAmount=function(){var a=b.getBetValues();return a[a.length-1]},this.maxWinMultiplier=function(){return b._response.gameConfig.maxExposure},this._response=a}return a}();c.ResponseConfig=k;var l=function(){function a(){a.current=this}return a.prototype.updateDate=function(a){this._response=a,this.getUpdatedGameResponse(a),this.getAction()!==c.BASE&&this.getAction()!==c.RE_SPIN||(this.triggeredGrid=null,this.getNextAction()!==c.BASE&&(this.triggeredGrid=this.getGrid()))},a.prototype.getData=function(){return this._response},a.prototype.setGameConfig=function(){this._response.gameConfig&&(this._response.gameConfig=JSON.parse(this._response.gameConfig)),this._config=new k(this._response),this.setBrokenGameState(!this.isGameRoundOver())},a.prototype.getGameConfig=function(){return this._config},a.prototype.setBrokenGameState=function(a){return this._response.isBroken=a},a.prototype.isBrokenGameSate=function(){return this._response.isBroken},a.prototype.getBalance=function(){return this._response.balance},a.prototype.getAccumulatedWin=function(){return this._response.accumulatedWin&&"string"==typeof this._response.accumulatedWin?Number(this._response.accumulatedWin):this._response.accumulatedWin},a.prototype.getPrevBalance=function(){return this._response.balance-this._response.gameState.totalWin+this._response.gameState.totalBet},a.prototype.getJackpotValues=function(){if(this._response&&this._response.jackpotConfig){var a=this.getJackpotAfterWinValues();return a&&this._response.jackpotData&&(a[this._response.jackpotData.level]=Number(this._response.jackpotData.win).toFixed(2)),a}return null},a.prototype.getJackpotAfterWinValues=function(){if(this._response&&this._response.jackpotConfig){for(var a in this._response.jackpotConfig)this._response.jackpotConfig[a]=Number(this._response.jackpotConfig[a]).toFixed(2);return this._response.jackpotConfig}return null},a.prototype.getJackpotData=function(){return this._response&&this._response.jackpotData?(this._response.jackpotData.win=Number(this._response.jackpotData.win).toFixed(2),this._response.jackpotData):null},a.prototype.getAccumlatedValues=function(){return this._response?this._response.jackpotData:null},a.prototype.getAction=function(){return this._response.gameState.requestType},a.prototype.getNextAction=function(){return this._response.gameState.nextRequestType},a.prototype.getBet=function(){return this._response.gameState.betValue},a.prototype.getTotalBet=function(){return this._response.gameState.totalBet},a.prototype.getTotalWin=function(){return this._response.gameState.totalWin},a.prototype.getGameRoundWin=function(){return this._response.gameState.totalRoundWin},a.prototype.getGrid=function(){return this._response.gameState.grid},a.prototype.getGridAfterCascadeWin=function(){return this._response.gameState.gridAfterCascadeWin},a.prototype.getExpandingReels=function(){return this._response.gameState.expandingReels},a.prototype.getModifierSymbolPosition=function(){return this._response.gameState.reelModifiers},a.prototype.getTriggeredGrid=function(){return this.triggeredGrid},a.prototype.getWinDetails=function(){return this._response.gameState.winDetails},a.prototype.getMultiplier=function(){return this._response.gameState.multiplier},a.prototype.getWildMultiplier=function(){return this._response.gameState.wildMultiplier},a.prototype.isBuyoutGame=function(){return this._response.gameState.isBuyoutGame},a.prototype.isGameRoundOver=function(){return this._response.isRoundFinished},a.prototype.getGameData=function(){return this._response.gameState.gameData},a.prototype.getFeatureAwardedMultiplier=function(){var a;return a=this.getAction()!=c.BASE&&this.getAction()!=c.RE_SPIN?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData,a?a.multiplier:null},a.prototype.getFeatureTotalSpins=function(){var a;return a=this.getAction()!=c.BASE&&this.getAction()!=c.RE_SPIN?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData,a?a.totalSpins:null},a.prototype.getFeatureAwardedSpins=function(){var a;return a=this.getAction()!=c.BASE&&this.getAction()!=c.RE_SPIN?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData,a?a.awardedSpins:null},a.prototype.getFeatureSpinsLeft=function(){var a;return a=this.getAction()!=c.BASE&&this.getAction()!=c.RE_SPIN?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData,a?a.remainSpins:null},a.prototype.isFreeReSpin=function(){var a=this._response.gameState.featureGameData;return!(!a||null===a.isFreeReSpin)&&a.isFreeReSpin},a.prototype.getFeatureReelModifiersSymbols=function(){var a;return a=this.getAction()!=c.BASE?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData,a?a.reelModifiers:null},a.prototype.getFeatureExpandingReels=function(){var a;return a=this.getAction()!=c.BASE?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData,a?a.expandingReels:null},a.prototype.getFeatureReTriggeredSpins=function(){var a=this._response.gameState.featureGameData;return a&&(a.id.includes(c.FREE_SPINS)||a.id===c.RE_SPIN)?a.retriggerSpins:null},a.prototype.getBonusPrizes=function(){var a;return a=this.getAction().includes(c.BONUS)?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData,a&&a.bonusOptions?a.bonusOptions:null},a.prototype.getAwardedBonusPrizes=function(){var a;return a=this.getAction().includes(c.BONUS)?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData,a&&a.awardedOptions?a.awardedOptions:{}},a.prototype.getBonusLevel=function(){var a;return a=this.getAction().includes(c.BONUS)?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData,a&&a.level?a.level:1},a.prototype.getBonusNextLevel=function(){var a;return a=this.getAction().includes(c.BONUS)?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData,a&&a.nextLevel?a.nextLevel:1},a.prototype.getFeatureData=function(){return this._response.gameState.featureGameData?this._response.gameState.featureGameData.featureData:null},a.prototype.getFeatureTotalWin=function(){var a;return a=this.getAction()!=c.BASE?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData,a?a.totalWin:0},a.prototype.getFreeRounds=function(){return this._response.freeRounds},a.prototype.getFreeRoundsAwarded=function(){return this._response.freeRounds?this._response.freeRounds.totalNumberOfFreeRounds:null},a.prototype.getFreeRoundsLeft=function(){return this._response.freeRounds?this._response.freeRounds.numberOfFreeRounds:null},a.prototype.getFreeRoundsWin=function(){return this._response.freeRounds?this._response.freeRounds.totalWin:null},a.prototype.isFreeRoundsActive=function(){return this._response.freeRounds?this._response.freeRounds.totalNumberOfFreeRounds!==this._response.freeRounds.numberOfFreeRounds:null},a.prototype.getFreeRoundsBet=function(){return this._response.freeRounds?this._response.freeRounds.betValue:null},a.prototype.getGambleRounds=function(){return this._response.gambleRounds},a.prototype.getGambleTotalWin=function(){return this._response.gambleRounds?this._response.gambleRounds.totalWin:null},a.prototype.getGambleToWin=function(){return this._response.gambleRounds?this._response.gambleRounds.toTotalWin:null},a.prototype.getGambleCard=function(){return this._response.gambleRounds?this._response.gambleRounds.card:null},a.prototype.getGamblePreviousCards=function(){return this._response.gambleRounds?this._response.gambleRounds.historyCards:null},a.prototype.isMaxWinCapped=function(){return!1},a.prototype.getCappedWinAmount=function(){return null},a.prototype.getUpdatedGameResponse=function(a){this._response.gameState&&(this._response.gameState.grid=this.getSymbolGrid(this._response.gameState.grid),this._response.gameState.winDetails=this.getWins(this._response.gameState.winDetails),this._response.gameState.reelModifiers=this.getModifierSymbols(this._response.gameState.reelModifiers),this._response.gameState.expandingReels=this.getExpandingSymbolReels(this._response.gameState.expandingReels),this._response.gameState.featureGameData&&this._response.gameState.featureGameData.reelModifiers&&(this._response.gameState.featureGameData.reelModifiers=this.getModifierSymbols(this._response.gameState.featureGameData.reelModifiers)),this._response.gameState.featureTriggerData&&this._response.gameState.featureTriggerData.reelModifiers&&(this._response.gameState.featureTriggerData.reelModifiers=this.getModifierSymbols(this._response.gameState.featureTriggerData.reelModifiers)),this._response.gameState.featureGameData&&this._response.gameState.featureGameData.expandingReels&&(this._response.gameState.featureGameData.expandingReels=this.getExpandingSymbolReels(this._response.gameState.featureGameData.expandingReels)),this._response.gameState.featureTriggerData&&this._response.gameState.featureTriggerData.expandingReels&&(this._response.gameState.featureTriggerData.expandingReels=this.getExpandingSymbolReels(this._response.gameState.featureTriggerData.expandingReels)))},a.prototype.getSymbolGrid=function(a){var b=[];if(!a)return b;for(var c=0;c<a.length;c++){for(var d=[this.getRandomSymbolId()],e=0;e<a[c].length;e++)d.push(this.getSymbolId(a[c][e]));d.push(this.getRandomSymbolId()),b.push(d)}return b},a.prototype.getWins=function(a){var b=[];if(a&&a.length>0)for(var c=0;c<a.length;c++){var d=a[c];b.push({symbol:this.getSymbolId(d.symbol),win:d.win,positions:this.getWinPositions(d.positions),type:"LINE"==d.type||"WAY"==d.type||"CASCADE"==d.type?d.type:"SCATTER",line:d.line,feature:"LINE"==d.type||"WAY"==d.type||"CASCADE"==d.type?void 0:d.type})}return b},a.prototype.getModifierSymbols=function(a){var b=null;return a&&a.length>0&&(b=[],a.forEach(function(a){b.push(new p(a))})),b},a.prototype.getExpandingSymbolReels=function(a){var b=null;return a&&a.length>0&&(b=[],a.forEach(function(a){b.push(new q(a))})),b},a.prototype.getWinPositions=function(a){var b=[];return a.forEach(function(a){b.push(new o(a.reel,a.row))}.bind(this)),b},a.prototype.getSymbolId=function(a){return g.defaultSettings.symbolMapWithServer[a]||a},a.prototype.getRandomSymbolId=function(){var a=g.gameConfig.profile[this.getAction()];a||(a=g.gameConfig.profile[c.BASE]);var b=Object.keys(a.paytable),d=Math.floor(Math.random()*b.length);return g.defaultSettings.symbolMapWithServer[b[d]]},a}();c.ResponseResult=l;var m=function(){function b(a){this._response=a,b.current=this}return b.prototype.getPlayerMessage=function(){return this._response.lang?a.Core.Lang.getPhrase(this._response.lang):a.Core.Lang.getPhrase("err_server_generic")},b.prototype.isFatal=function(){return this._response.fatal},b.prototype.getErrorObject=function(){return this._response.err},b.prototype.getErrorMessage=function(){return this._response.err?this._response.err.msg||"no error msg available":"no error object available"},b}();c.ResponseAlert=m;var n=function(){function a(){}return a.setTime=function(b){a.time.setTime(b)},a.getFormattedTime=function(){var b=new Date;return a.timeFormat.format(b)},a.time=new Date,a.timeFormat=Intl?Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"}):{
format:function(a){var b=a.toLocaleTimeString();return b.substring(0,b.lastIndexOf(":"))}},a}();c.ServerTime=n;var o=function(){function a(a,b){this.reel=a,this.row=b}return a.prototype.getReelIndex=function(){return this.reel},a.prototype.getRowIndex=function(){return this.row},a}();c.SymbolPosition=o;var p=function(){function a(a){this.symbol=g.defaultSettings.symbolMapWithServer[a.symbol]||a.symbol,this.replaceSymbol=a.replaceSymbol,this.position=new o(a.position.reel,a.position.row),a.type&&(this.type=a.type)}return a.prototype.getSymbol=function(){return this.symbol},a.prototype.getReplaceSymbol=function(){return this.replaceSymbol},a.prototype.getPosition=function(){return this.position},a.prototype.getType=function(){return this.type},a}();c.ModifierSymbolPosition=p;var q=function(){function a(a){this.symbol=g.defaultSettings.symbolMapWithServer[a.symbol]||a.symbol,this.reel=a.reel}return a.prototype.getSymbol=function(){return this.symbol},a.prototype.getReelIndex=function(){return this.reel},a}();c.ExpandingReels=q,c.createServerConnection=d}(b.Server||(b.Server={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){function b(b,c){return void 0===c&&(c=!1),null==b||void 0==b?"":a.formatAsCredits?Math.floor(b/a.creditValue).toLocaleString(void 0,{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:a.useGrouping}):!c&&a.currencyCode?b.toLocaleString(a.localeId,{currency:a.currencyCode,style:"currency",minimumFractionDigits:a.currencyDecimalPlaces||2,maximumFractionDigits:a.currencyDecimalPlaces||2,useGrouping:a.useGrouping}):b.toLocaleString(a.localeId,{style:"decimal",minimumFractionDigits:a.currencyDecimalPlaces||2,maximumFractionDigits:a.currencyDecimalPlaces||2,useGrouping:a.useGrouping})}a.creditValue=1,a.format=b}(a.Currency||(a.Currency={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){function b(a){d=a}function c(a){if(d[a])return new e(d[a]);throw"Scene id doesn't exist in profile : "+a}var d;a.init=b,a.getSceneProfile=c;var e=function(){function a(a){this._profile=a}return a.prototype.get=function(){return this._profile},a}();a.SceneProfile=e}(a.SceneProfile||(a.SceneProfile={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var DO;!function(a){!function(a){var b=function(){function a(){}return a.ON_GAME_INITIALIZED="on_game_initialized",a.ON_GET_GAME_RESULTS="on_get_game_results",a.ON_GET_CLEAR_ALL_SCREEN="on_clear_screen",a.ON_RESULTS_READY="on_results_ready",a.ON_RESULTS_DISPLAYED="on_results_displayed",a.ON_PLAYER_PROMPT="on_player_prompt",a.ON_PLAYER_PROMPT_WIN="on_player_prompt_win",a.ON_GAME_CHANGED="on_game_change",a.ON_GAME_ACCEPTED="on_game_accepted",a.ON_UPDATE_GAMBLE="on_update_gamble",a.GAMBLE_EXIT="on_gamble_exit",a.ON_GAME_READY="on_game_ready",a.ON_CONTINUE_GAME="on_continue_game",a.ON_FATAL_ERROR="on_game_fatal_error",a.ON_LOAD_PROGRESS="on_game_load_progress",a.UPDATE_BALACE="update_balace",a.HISTORY_RESPONSE="history_data",a.SET_FORCE_VALUES="set_force_values",a.EVENT_QUIT_GAME="on_quit_game",a.ADD_CELEBRATIONS="on_add_celebrations",a}();a.GameEvents=b}(a.Common||(a.Common={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Renderer.Scene,d=a.Common.GameEvents,e=a.Common.Server,f=a.Common.Server.ResponseResult,g=function(c){function g(a,b,d,e){return c.call(this,a,b,d,e)||this}return __extends(g,c),g.prototype.onCreate=function(){c.prototype.onCreate.call(this),b.ApplicationBase.instance.on(d.ON_RESULTS_READY,this.onResultsReady,this),b.ApplicationBase.instance.on(e.REQUEST_RESULTS,this.onResultsRequested,this),b.ApplicationBase.instance.on(d.ON_CONTINUE_GAME,this.onContinueGame,this),b.ApplicationBase.instance.on(d.ON_GAME_READY,this.onGameReady,this),b.ApplicationBase.instance.on(a.Slots.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinsShown,this),b.ApplicationBase.instance.on(a.Slots.WinManager.EVENT_SHOW_BROKEN_FEATURE_WIN_SUMMARY,this.showBrokenFeatureWinSummary,this),b.ApplicationBase.instance.on(d.ON_PLAYER_PROMPT,this.onPlayerPrompt,this),this.on(a.Core.Events.ON_INTERACTION,this.onInteraction,this),this._promptMsgPanel=this._layout.getComponent("player_prompt"),this._sceneAnimations=this._layout.getLayoutParams().sceneAnimations,this.createAnimationInterval()},g.prototype.onDestroy=function(){c.prototype.onDestroy.call(this),b.ApplicationBase.instance.off(d.ON_RESULTS_READY,this.onResultsReady),b.ApplicationBase.instance.off(d.ON_GAME_READY,this.onGameReady),b.ApplicationBase.instance.off(d.ON_CONTINUE_GAME,this.onContinueGame),b.ApplicationBase.instance.off(e.REQUEST_RESULTS,this.onResultsRequested),b.ApplicationBase.instance.off(a.Slots.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinsShown),b.ApplicationBase.instance.off(a.Slots.WinManager.EVENT_SHOW_BROKEN_FEATURE_WIN_SUMMARY,this.showBrokenFeatureWinSummary,this),b.ApplicationBase.instance.off(d.ON_PLAYER_PROMPT,this.onPlayerPrompt),this.off(a.Core.Events.ON_INTERACTION,this.onInteraction),this._animationInterval&&clearInterval(this._animationInterval)},g.prototype.onResultsRequested=function(c){"BASE"!==f.current.getNextAction()||c.isBroken||b.ApplicationBase.instance.emit(a.Common.GameEvents.UPDATE_BALACE,f.current.getBalance()-a.Slots.SettingsPages.BettingSetup.getTotalBetCash())},g.prototype.onResultsReady=function(){},g.prototype.onGameReady=function(){this.onResize()},g.prototype.onInteraction=function(a,b){},g.prototype.onSummaryAccepted=function(){b.ApplicationBase.instance.emit(d.ON_RESULTS_DISPLAYED)},g.prototype.onGameAccepted=function(){var a=this;b.ApplicationBase.instance.emit(d.ON_GAME_ACCEPTED),this._announcer&&TweenLite.to(this._announcer,.5,{alpha:0,onComplete:function(){a._announcer.parent.removeChild(a._announcer)}}),setTimeout(function(){b.ApplicationBase.instance.emit(d.ON_GET_GAME_RESULTS)},1e3)},g.prototype.onContinueGame=function(a){},g.prototype.showAnnouncer=function(a){this._layout.getComponent(a)&&(this.interactive=!0,this.interactiveChildren=!0,this._announcer=this._layout.getComponent(a),this._announcer.visible=!0,this._announceTimeout=setTimeout(function(){},1e4))},g.prototype.onWinsShown=function(){},g.prototype.showBrokenFeatureWinSummary=function(){a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!0)},g.prototype.onPlayerPrompt=function(a){this._promptMsgPanel&&(a&&a.length?this._promptMsgPanel.showMessagePanel(a.toUpperCase()):this._promptMsgPanel.hideMessagePanel())},g.prototype.createAnimationInterval=function(){var a=this;this._sceneAnimations&&this._sceneAnimations.length>0&&(this._animationInterval=setInterval(function(){a.playSceneAnimation()},1e4/this._sceneAnimations.length))},g.prototype.playSceneAnimation=function(){if(this._sceneAnimations&&this._sceneAnimations.length>0){var a=Math.floor(Math.random()*this._sceneAnimations.length);this._layout.getComponent(this._sceneAnimations[a]).clip.gotoAndPlay(0)}},g}(c);b.CommonSceneBase=g}(a.Common||(a.Common={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(c){function d(){l(),b.ApplicationBase.instance.on(b.Server.HANDLE_RESULT_RESPONSE,function(){A+=t.current.getTotalBet(),B+=t.current.getTotalWin(),x=t.current.getTotalBet(),t.current.getAction()===b.Server.FREE_SPINS&&y<t.current.getTotalWin()&&(y=w),t.current.getAction()===b.Server.BASE&&(w=t.current.getTotalWin())},this),b.ApplicationBase.instance.on(b.Server.REQUEST_RESULTS,function(a){a.isBroken||z++},this),b.ApplicationBase.instance.on(b.GameEvents.ON_RESULTS_DISPLAYED,function(){t.current.getAction()===b.Server.BASE&&t.current.getNextAction()==b.Server.BASE&&b.ApplicationBase.instance.emit(c.EVENT_CHECK_ALARMS)}),b.ApplicationBase.instance.on(c.EVENT_CHECK_ALARMS_AT_FS,function(){b.ApplicationBase.instance.emit(c.EVENT_CHECK_ALARMS)}),b.ApplicationBase.instance.on(b.GameEvents.ON_GAME_CHANGED,function(){t.current.getNextAction()!=b.Server.BASE&&u&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_FEATURE_STOP),l())},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_REALITY_CHECK_CHANGE,function(a){h(a)},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_LOSS_LIMIT_CHANGE,function(a){a=a||9999999999,i(a)},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_SINGLE_WIN_LIMIT_CHANGE,function(a){a=a||9999999999,j(a)},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_TOTAL_WIN_LIMIT_CHANGE,function(a){a=a||9999999999,k(a)},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_AUTO_SPIN_COUNT_CHANGE,function(a){a||l()},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_FEATURE_WIN_CHANGE,function(a){u=a},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_ANY_WIN,function(a){v=a},this),b.ApplicationBase.instance.on(c.EVENT_CHECK_ALARMS,function(){s()>=D&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_CASH_LOSS,D),l()),w&&w>=E&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_SINGLE_CASH_WIN,E),l()),y&&y>=E&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_SINGLE_CASH_WIN,E),l()),B>=F&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_TOTAL_CASH_WIN,F),l()),w&&w>=E&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_SINGLE_CASH_WIN,E),l()),w&&v&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_STOP_ON_ANY_WIN,E),l());var a=(new Date).getTime();t.current.getGameConfig().isRealityCheckSettingsAllowed()&&(a-H)/6e4>=G&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_REALITY_CHECK,G),H=a)},this)}function e(){return G}function f(a){u=a}function g(a){v=a}function h(a){G=a,H=(new Date).getTime()}function i(a){D=a}function j(a){E=a}function k(a){F=a}function l(){z=0,A=0,B=0,y=0,D=9007199254740991,E=9007199254740991,F=9007199254740991,u=!1,v=!1,C=(new Date).getTime()}function m(){return w}function n(){return((new Date).getTime()-C)/1e3}function o(){return z}function p(){return A}function q(){return B}function r(){return B/A*100}function s(){return A-B}var t=a.Common.Server.ResponseResult;c.EVENT_ALARM_CASH_LOSS="monitoring_cash_loss_alarm",c.EVENT_ALARM_SINGLE_CASH_WIN="monitoring_single_cash_win_alarm",c.EVENT_ALARM_TOTAL_CASH_WIN="monitoring_total_cash_win_alarm",c.EVENT_ALARM_STOP_ON_ANY_WIN="monitoring_stop_on_any_win",c.EVENT_ALARM_REALITY_CHECK="monitoring_reality_check",c.EVENT_ALARM_FEATURE_STOP="monitoring_feature_stop",c.EVENT_ALARM_BROKEN_MSG="broken_alarm",c.EVENT_CHECK_ALARMS="monitoring_check_alarms",c.EVENT_CHECK_ALARMS_AT_FS="monitoring_check_alarms_at_fs",c.EVENT_CHECK_MAX_CAP="monitoring_max_cap",c.INSUFFICIENT_FUND="insufficient_fund";var u,v,w,x,y,z=0,A=0,B=0,C=0,D=9999999,E=9999999,F=9999999,G=60,H=(new Date).getTime();c.init=d,c.getRealityCheckDuration=e,c.setFeatureStop=f,c.setWinStop=g,c.setLimitRealityCheck=h,c.setLimitCashLoss=i,c.setLimitSingleWin=j,c.setLimitTotalWin=k,c.reset=l,c.getCurrentLastCashWin=m,c.getCurrentDuration=n,c.getCurrentBetCount=o,c.getCurrentTotalBetCash=p,c.getCurrentTotalWin=q,c.getCurrentRTP=r,c.getCurrentLossCash=s}(b.PlayerMonitoring||(b.PlayerMonitoring={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=a.Core.Time.Juggler,e=function(c){function e(e){var f=c.call(this)||this;return f._assets=e,f._juggler=new d(!0),f.once(a.Core.Events.ON_CREATE,function(){f.setImage(0)}),b.ApplicationBase.instance.on(a.Core.Events.ON_APP_EXCEPTION,function(){f._juggler._isActive=!1}),f}return __extends(e,c),e.prototype.setImage=function(a){var b=this._assets.getPIXISprite(this._config.params.sprites[a]);this.addChild(b)},e}(PIXI.Container);c.SpriteBanner=e}(b.FX||(b.FX={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=a.Core.HTML.Page,e=a.Core.Events,f=a.Core.Environment,g=a.Core.Lang,h=a.Common.PlayerMonitoring,i=a.Core.HTML,j=a.Core.SoundManager,k=a.Common.GameEvents,l=a.Common.Server,m=a.Common.Currency,n=a.Common.SceneProfile,o=a.Core.Utils.formatTime,p=a.Common.Server.ResponseResult,q=function(){function a(){}return a.ON_REALITY_CHECK_CHANGE="settings_reality_check_change",a.ON_AUTO_SPIN_COUNT_CHANGE="settings_auto_spin_count_change",a.ON_LOSS_LIMIT_CHANGE="settings_loss_limit_change",a.ON_SINGLE_WIN_LIMIT_CHANGE="settings_single_win_limit_change",a.ON_TOTAL_WIN_LIMIT_CHANGE="settings_total_win_limit_change",a.ON_STOP_ON_FEATURE_WIN_CHANGE="settings_stop_on_feature",a.ON_STOP_ON_ANY_WIN="settings_stop_on_any_win",a.ON_SETTINGS_OPEN="settings_shown",a.ON_SETTINGS_CLOSED="settings_closed",a.ON_BET_CHANGE="settings_bet_change",a.ON_LEFT_HANDED_MODE="settings_left_handed",a.ON_QUICK_SPIN="settings_quick_spin",a.ON_DISPLAY_FORMAT_CHANGE="settings_coins_or_cash",a.ON_SOUND_EFFECTS="settings_sound_effects",a.ON_MUSIC="settings_music",a.ON_BET_EVENT_OUTER="on_bet_load_outer",a.ON_AUTOPLAY_EVENT_OUTER="on_autoplay_load_outer",a.PAYTABLE_STATUS_CHANGED="paytable_status_change",a.OPTION_STATUS_CHANGED="option_status_change",a}();c.SettingsEvents=q;var r=function(){function a(){}return a.setBetLevels=function(b){a.betLevels=b},a.setFixedBet=function(b){a.fixedBet=b},a.getTotalBetCash=function(){return a.currentBetLevel*a.fixedBet},a.betLevels=[],a.currentBetLevel=1,a}();c.BettingSetup=r;var s=function(d){function s(c,n){var s=d.call(this,c,n)||this;s.prevID=void 0,s.firstLoad=0,s.paytablePages=[],s.paytablePagesClassIds="",s.paytablePages=[],s.paytablePagesClassIds="";for(var v=1;v<=f.defaultSettings.totalPaytablePages;v++)s.paytablePagesClassIds+=".paginatonIndexOver"+v+", .paginatonIndex"+v,v!=f.defaultSettings.totalPaytablePages&&(s.paytablePagesClassIds+=", "),s.paytablePages.push("page"+v);return s._$settingsHolder=$("#settings"),s._$menu=$("#settings_menu"),s._$pages=$("#settings_pages"),s._$header=$("#settings_header"),s._$footer=$("#settings_footer"),s._$buttonAudio=$("#button_settings_audio"),s._$buttonAudio.on("click",function(){e.coreEvents.emit(j.EVENT_SET_MUTE,!j.globalSounds.isMuted)}),s._$buttonHome=$("#button_settings_home"),s._$buttonHome.on("click",function(){$("#button_exit_settings").click(),window.vex.dialog.buttons.YES.text=g.getPhrase("yes_caps"),window.vex.dialog.buttons.NO.text=g.getPhrase("no_caps"),window.vex.dialog.confirm({message:g.getPhrase("confirm_exit"),callback:function(c){c&&a.Common.ApplicationBase.instance.emit(b.ControlPanel.EVENT_QUIT_GAME)}})}),a.Common.ApplicationBase.instance.once(k.ON_GAME_READY,function(){this._stopOnFeature.setValue(!1),this._stopOnAnyWin.setValue(!1),p.current.getGameConfig().isQuickSpinAllowed()?this._quickSpin.setValue(1==a.Common.ApplicationBase.getAppValue("quickSpin",!0)):this._quickSpin.setValue(0==a.Common.ApplicationBase.getAppValue("quickSpin",!1)),this._gamble.setValue(1==a.Common.ApplicationBase.getAppValue("gamble",!0)),this._splashScreen.setValue(1==a.Common.ApplicationBase.getAppValue("splashScreen",!0)),this._spaceBar.setValue(1==a.Common.ApplicationBase.getAppValue("spaceToSpin",!0)),this._leftHanded.setValue(!1),this._sounds.setValue(this.stringtoBoolean(f.launchVariables.sfx)),this._music.setValue(this.stringtoBoolean(f.launchVariables.music))}.bind(s)),a.Common.ApplicationBase.instance.on(l.CONFIGURE_BET_DETAILS,function(b){r.setBetLevels(b.getBetValues()),r.setFixedBet(b.getFixedBet()),r.currentBetLevel=b.getBetValues()[b.getDefaultBetIndex()],s._totalBet=new w("stepper_total_bet"),new w("cp_stepper_total_bet"),a.Common.ApplicationBase.instance.on(q.ON_BET_CHANGE,function(){return s.updatePays()}),a.Common.ApplicationBase.instance.on(q.ON_BET_EVENT_OUTER,function(){return s.showBetPage()}),a.Common.ApplicationBase.instance.on(q.ON_AUTOPLAY_EVENT_OUTER,function(){return s.showAutoplayPage()}),a.Common.ApplicationBase.instance.emit(q.ON_BET_CHANGE,{betLevel:r.currentBetLevel,totalBet:r.getTotalBetCash()})}),e.coreEvents.on(j.EVENT_SET_MUTE,function(a){var b=s._$buttonAudio;a?b.removeClass("audio_on").addClass("audio_off"):b.removeClass("audio_off").addClass("audio_on")}),s._sessionLimitSlider=new z("slider_session_limit",1,120,o,2),s._sessionLimitSlider.setValue(h.getRealityCheckDuration()),s._sessionLimitSlider.onChange=function(b){a.Common.ApplicationBase.instance.emit(q.ON_REALITY_CHECK_CHANGE,b)},$("#session_time_limit").hide(),s._autoSpinsSlider=new z("slider_autospin_count",0,100,null,5),s._autoSpinsSlider.onChange=function(b){a.Common.ApplicationBase.instance.emit(q.ON_AUTO_SPIN_COUNT_CHANGE,b);var c=p.current.getGameConfig().isUKGC();if(b&&c){var d=s._$inputLossLimit,e=$("#autoplayStartButton");$("#settings_autospin_inputs").show(),d.getValue()?(d.getDiv().fadeIn(),d.getDiv().removeClass("flash-item"),e.removeClass("disabled_settings_item"),e.css("pointer-events","all"),e.css("background-image",f.defaultSettings.autoplayStartButton_enable)):(d.getDiv().addClass("flash-item"),e.addClass("disabled_settings_item"),e.css("pointer-events","none"),e.css("background-image",f.defaultSettings.autoplayStartButton_disable))}else $("#settings_autospin_inputs").hide(),$("#autoplayStartButton").removeClass("disabled_settings_item"),$("#autoplayStartButton").css("pointer-events","all"),$("#autoplayStartButton").css("background-image",f.defaultSettings.autoplayStartButton_enable);0===b?($("#autoplayStartButton").css("pointer-events","none"),$("#autoplayStartButton").css("background-image",f.defaultSettings.autoplayStartButton_disable)):$("#autoplayStartButton").css("background-image",f.defaultSettings.autoplayStartButton_enable)},s._$inputLossLimit=new t("input_loss_limit",function(b){var c=a.Slots.SettingsPages.BettingSetup.getTotalBetCash()/100,d=s._$inputLossLimit,e=$("#autoplayStartButton");a.Common.ApplicationBase.instance.emit(q.ON_LOSS_LIMIT_CHANGE,b/100),b/100>=c?(d.getDiv().removeClass("flash-item"),e.removeClass("disabled_settings_item"),e.css("pointer-events","all"),e.css("background-image",f.defaultSettings.autoplayStartButton_enable)):d&&(d.getDiv().addClass("flash-item"),e.addClass("disabled_settings_item"),e.css("pointer-events","none"),e.css("background-image",f.defaultSettings.autoplayStartButton_disable))},"keypad"),s._$inputSingleWinLimit=new t("input_single_win_limit",function(b){a.Common.ApplicationBase.instance.emit(q.ON_SINGLE_WIN_LIMIT_CHANGE,b/100)},"keypad"),s._$inputTotalWinLimit=new t("input_total_win_limit",function(b){a.Common.ApplicationBase.instance.emit(q.ON_TOTAL_WIN_LIMIT_CHANGE,b/100)},"keypad"),s._stopOnFeature=new y("checkbox_stop_on_feature",function(b){a.Common.ApplicationBase.instance.emit(q.ON_STOP_ON_FEATURE_WIN_CHANGE,b)}),s._stopOnAnyWin=new y("checkbox_stop_on_any",function(b){a.Common.ApplicationBase.instance.emit(q.ON_STOP_ON_ANY_WIN,b)}),s._quickSpin=new y("checkbox_quickspin",function(b){p.current.getGameConfig().isQuickSpinAllowed()&&(a.Common.ApplicationBase.instance.emit(q.ON_QUICK_SPIN,b),a.Common.ApplicationBase.saveAppValue("quickSpin",b))}),s._gamble=new y("checkbox_gamble",function(b){a.Common.ApplicationBase.saveAppValue("gamble",b)}),s._splashScreen=new y("checkbox_splash",function(b){a.Common.ApplicationBase.saveAppValue("splashScreen",!0)}),s._spaceBar=new y("checkbox_spacebar",function(b){a.Common.ApplicationBase.saveAppValue("spaceToSpin",b)}),s._valuesInCoins=new y("checkbox_coin_values",function(b){a.Common.ApplicationBase.saveAppValue("showWinsAsCoins",b),m.formatAsCredits=b,a.Common.ApplicationBase.instance.emit(q.ON_DISPLAY_FORMAT_CHANGE,b),a.Common.ApplicationBase.instance.emit(q.ON_BET_CHANGE,{betLevel:this.betLevel,coinLevel:this.coinLevel})}),s._leftHanded=new y("checkbox_left_handed",function(b){a.Common.ApplicationBase.saveAppValue("leftHandedMode",b),a.Common.ApplicationBase.instance.emit(q.ON_LEFT_HANDED_MODE,b)}),s._sounds=new y("checkbox_soundeffects",function(b){a.Common.ApplicationBase.saveAppValue("soundEffects",b),a.Common.ApplicationBase.instance.emit(q.ON_SOUND_EFFECTS,b),e.coreEvents.emit(j.EVENT_SET_FX_VOLUME,b),e.coreEvents.emit(j.EVENT_ON_FX_VOLUME,b)}),s._music=new y("checkbox_music",function(b){a.Common.ApplicationBase.saveAppValue("music",b),a.Common.ApplicationBase.instance.emit(q.ON_MUSIC,b),e.coreEvents.emit(j.EVENT_SET_MUSIC_VOLUME,b),a.Common.Server.SoundVolume=b}),s._paysPager=new u("pay_page_pager",s.paytablePages),$(s._$div).find("#settings_autospins").on("click",s.onMenuClick.bind(s)),$(s._$div).find("#settings_pays").on("click",s.onMenuClick.bind(s)),$(s._$div).find("#settings_rules").on("click",s.onMenuClick.bind(s)),$(s._$div).find("#settings_history").on("click",s.onMenuClick.bind(s)),$(s._$div).find("#settings_bets").on("click",s.onMenuClick.bind(s)),$(s._$div).find("#settings_general").on("click",s.onMenuClick.bind(s)),$(s._$div).find("#button_exit_settings").on("click",function(){a.Core.Environment.playVibrate(),s._$buttonSpin=$("#button_spin"),document.getElementById("historyData").innerHTML="",document.getElementById("history_info").innerHTML="",document.getElementById("history_info").style.display="none",document.getElementById("historyData").style.display="block",$("#history_table_wrapper")[0].children.length>0&&$(".tableOuter").remove(),f.isMobile()&&!f.isDesktop()&&$("#settings_pages").css("overflow-y","scroll"),s._$buttonSpin.removeClass("disabled_settings_item"),j.globalSounds.playCue("GENERIC_CLICK"),$("#button_help").removeClass("disabled"),f.isDesktop()&&$("#balance_wrapper, #bet_wrapper, #win_wrapper").css("color","white"),p.current.getGameConfig().isAutoPlayDisplay()&&($("#button_auto_cp").removeClass("disabled_settings_item"),$("#button_auto_cp").removeClass("disabled"),$("#button_auto_cp").css("pointer-events","all")),$("#button_settings").css("pointer-events","all"),$("#button_settings").removeClass("disabled"),$("#button_bet_button").removeClass("disabled"),$("#button_bet_button").css("pointer-events","all"),$("#button_settings").removeClass("disabled_settings_item"),$("#info_bar").css("z-index","9"),f.isMobile()&&($("#main_button_wrapper, #bet_button_wrapper").show(),$("#menu_mobile").show(),p.current.getGameConfig().isAutoPlayDisplay()&&(p.current.getFreeRoundsLeft()?($("#Autoplay_button_wrapper, #Autoplay_btn").show(),$("#Autoplay_button_wrapper, #Autoplay_btn").addClass("disabled"),$("#Autoplay_btn").css("pointer-events","none")):$("#Autoplay_button_wrapper").show()),f.isDesktop()||(document.getElementById("green-base").style.visibility="hidden")),a.Common.Server.isPaytableVisible=!1,s._$buttonSpin.css("pointer-events","all"),s._$buttonSpin.fadeIn(),p.current.getFreeRoundsLeft()?($("#button_bet_button, #button_auto_cp, #button_home").addClass("disabled"),$("#button_bet_button").css("pointer-events","none"),$("#button_home").css("pointer-events","all")):($("#button_bet_button, #button_home").removeClass("disabled"),$("#button_bet_button, #button_home").css("pointer-events","all")),$("#button_buy_credit").removeClass("disabled"),$("#button_buy_credit").css("pointer-events","all"),$("#button_max").removeClass("disabled"),$("#button_max").css("pointer-events","all"),i.getPageManager("MAIN").closeOverlay(),i.getPageManager("MAIN").showPage("main"),a.Common.ApplicationBase.instance.emit(q.PAYTABLE_STATUS_CHANGED,!1),a.Common.ApplicationBase.instance.emit(q.OPTION_STATUS_CHANGED,!1),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!1)}),$("#autoplayStartButton").on("click",function(){j.globalSounds.playCue("GENERIC_CLICK"),i.getPageManager("MAIN").closeOverlay(!0),$("#button_stop_autospin").css("pointer-events","all")}),s.on(a.Core.Events.ON_HIDDEN,function(b){b?a.Common.ApplicationBase.instance.emit(q.ON_SETTINGS_CLOSED,{autoSpins:s._autoSpinsSlider.getValue()}):a.Common.ApplicationBase.instance.emit(q.ON_SETTINGS_CLOSED,{autoSpins:0})}),$("#settings_page_autospins").hide(),$("#settings_page_general").hide(),$("#settings_page_bets").hide(),$("#settings_page_rules").hide(),$("#settings_page_pays").hide(),$("#settings_page_history").hide(),s.on(a.Core.Events.ON_SHOWN,s.onShown,s),a.Core.Events.coreEvents.on(a.Core.Events.ON_APP_RESIZE,s.resize,s),s.resize(),s}return __extends(s,d),s.loadGameRules=function(b){f.defaultSettings.languages.indexOf(f.launchVariables.language)<0&&(f.launchVariables.language="en");var c=f.launchVariables.language.toLowerCase();c&&$("#"+c).css("display","block"),$.ajax({type:"GET",url:"assets/locale/rules/rules_"+c+".html?v=##version##",success:function(c){$("#settings_page_rules").append(c.replace("{version}","<small><strong>"+a.Common.ApplicationBase.version+"</strong></small>")),b()},error:function(){throw"Can't load game rules"}})},s.prototype.stringtoBoolean=function(a){return"1"===a||"true"===a||"0"!==a&&"false"!==a&&void 0},s.prototype.onShown=function(){this.resize(),this._autoSpinsSlider.setValue(0),this.updatePays(),this._$inputLossLimit.setValue(null),this._$inputTotalWinLimit.setValue(null),this._$inputSingleWinLimit.setValue(null),this._stopOnAnyWin.setValue(!1),this._stopOnFeature.setValue(!1),a.Common.ApplicationBase.instance.emit(q.ON_SETTINGS_OPEN)},s.prototype.onMenuClick=function(b){var d=b.target;if(a.Core.Environment.playVibrate(),void 0!==this.prevID&&this.prevID===d.id||!f.isDesktop()){if(void 0===this.prevID||this.prevID!==d.id)switch(this.prevID=d.id,$(this._$div).find("#settings_pays").removeClass("icon_selected"),$(this._$div).find("#settings_general").removeClass("icon_selected"),$(this._$div).find("#settings_page_history").removeClass("icon_selected"),$("#settings_page_history_more").css("display","none"),$("#settings_autospins").hide(),$("#settings_general").show(),$("#settings_pays").show(),$("#settings_page_history").show(),d.id){case"settings_general":p.current.getGameConfig().isQuickSpinAllowed()?$("#quick_spin").show():$("#quick_spin").hide(),$(this._$div).find("#settings_general").addClass("icon_selected"),$("#settings_page_history").hide(),this.showPage("settings_page_general","settings_general_mob"),a.Common.ApplicationBase.instance.emit(q.PAYTABLE_STATUS_CHANGED,!1);break;case"settings_pays":this.updatePays(),$(this._$div).find("#settings_pays").addClass("icon_selected"),this.showPage("settings_page_pays","settings_pays_caps"),$("#settings_page_history").hide(),a.Common.ApplicationBase.instance.emit(q.PAYTABLE_STATUS_CHANGED,!0);break;case"settings_rules":$(this._$div).find("#settings_rules").addClass("icon_selected"),this.showPage("settings_page_rules","settings_rules_mob"),$("#settings_page_history").hide();break;case"settings_history":$(this._$div).find("#settings_history").addClass("icon_selected");var e=$("#historyData")[0],g=[".tableOuter","#historyData","#coinTableData","#coinInfoPageContainer","#history_info","#coinTableData","#coinInfoPageContainer","#historyData"];g.forEach(function(a){return $(a).empty().hide()}),e.style.display="block",$(".pager-btn.pager-left, .pager-btn.pager-right").css("display","none"),$(this.paytablePagesClassIds).css("display","none"),this.showPage("settings_page_history","History"),$("#settings_page_history").show()}}else switch(this.prevID=d.id,$("#button_exit_settings").removeClass("disabled_settings_item"),$(this._$div).find("#settings_autospins").removeClass("icon_selected"),$(this._$div).find("#settings_rules").removeClass("icon_selected"),$(this._$div).find("#settings_pays").removeClass("icon_selected"),$(this._$div).find("#settings_history").removeClass("icon_selected"),$(this._$div).find("#settings_general").removeClass("icon_selected"),$(this._$div).find("#settings_bets").removeClass("icon_selected"),d.id){case"settings_autospins":$(this._$div).find("#settings_autospins").addClass("icon_selected"),this.showPage("settings_page_autospins","settings_autoplay_mob"),this._autoSpinsSlider.setValue(0);break;case"settings_general":$(".pager-btn.pager-left, .pager-btn.pager-right, "+this.paytablePagesClassIds).css("display","none"),0!==Object.keys(j.globalSounds.getAtlas()).length&&j.globalSounds.playCue("Click_Toggle_Button"),p.current.getGameConfig().isQuickSpinAllowed()?$("#quick_spin").show():$("#quick_spin").hide(),$("#bet_wrapper").css("pointer-events","none"),$(this._$div).find("#settings_general").addClass("icon_selected"),this.showPage("settings_page_general","settings_general_mob"),a.Common.ApplicationBase.instance.emit(c.SettingsEvents.OPTION_STATUS_CHANGED,!0),a.Common.ApplicationBase.instance.emit(q.PAYTABLE_STATUS_CHANGED,!1);break;case"settings_bets":$(this._$div).find("#settings_bets").addClass("icon_selected"),this.showPage("settings_page_bets","settings_bet_mob");break;case"settings_pays":$(".pager-btn.pager-left, .pager-btn.pager-right, "+this.paytablePagesClassIds).css("display","block"),0!==Object.keys(j.globalSounds.getAtlas()).length&&j.globalSounds.playCue("Click_Toggle_Button"),this.updatePays(),$("#bet_wrapper").removeClass("disabled"),$(this._$div).find("#settings_pays").addClass("icon_selected"),this.showPage("settings_page_pays","settings_pays_caps"),a.Common.ApplicationBase.instance.emit(q.PAYTABLE_STATUS_CHANGED,!0),a.Common.ApplicationBase.instance.emit(c.SettingsEvents.OPTION_STATUS_CHANGED,!1);break;case"settings_rules":$(".pager-btn, "+this.paytablePagesClassIds).css("display","none"),$(this._$div).find("#settings_rules").addClass("icon_selected"),this.showPage("settings_page_rules","settings_rules_mob"),0!=Object.keys(j.globalSounds.getAtlas()).length&&j.globalSounds.playCue("Click_Toggle_Button");break;case"settings_history":$(this._$div).find("#settings_history").addClass("icon_selected"),$("#history_table_wrapper")[0].children.length>0&&($(".tableOuter, #allSpinsRecord, #fgtableOuter, #freeGameData").remove(),document.getElementById("historyData").innerHTML="",document.getElementById("historyData").style.display="block",document.getElementById("history_info").innerHTML="",document.getElementById("history_info").style.display="none"),$(".pager-btn.pager-left, .pager-btn.pager-right, "+this.paytablePagesClassIds).css("display","none"),this.showPage("settings_page_history","History"),$("#history_table_wrapper")[0].children.length>0&&$(".tableOuter").remove(),j.globalSounds.playCue("Click_Toggle_Button"),a.Common.ApplicationBase.instance.emit(l.SEND_HISTORY_REQUEST)}},s.prototype.showPage=function(b,c){var d=this;$(this._$header).find("#settings_page_title").text(g.getPhrase(c)),this._$currentPage&&this._$currentPage.fadeOut(100),a.Core.Time.juggler.setTimeout(function(){var a=$(d._$div).find("#"+b);a.show(),d._$currentPage=a,d._$currentPage.fadeIn()},250)},s.prototype.updatePays=function(){var c=n.getSceneProfile(l.BASE);for(var d in c.get().paytable){var e=c.get().paytable[d];if(e.oak)for(var f in e.oak){var g=e.oak[f].multiplier;g&&("SCATTER"!=e.name?$("#symbol-pays_"+d+f).text(m.format(r.currentBetLevel*g)):$("#symbol-pays_"+d+f).text(m.format(r.getTotalBetCash()*g)))}}2==this.firstLoad?a.Common.ApplicationBase.instance.emit(b.WinManager.STOP_SYMBOLS_ANIMATION,!0):this.firstLoad++},s.prototype.showBetPage=function(){a.Core.HTML.getPageManager("MAIN").toggleOverlay("settings"),$(this._$div).find("#settings_bets").addClass("icon_selected"),this.showPage("settings_page_bets","settings_bet_mob"),$(this._$div).find("#settings_autospins").removeClass("icon_selected"),
$(this._$div).find("#settings_general").removeClass("icon_selected")},s.prototype.showAutoplayPage=function(){a.Core.HTML.getPageManager("MAIN").toggleOverlay("settings"),$("#settings_page_rules").hide(),$("#settings_general").hide(),$("#settings_pays").hide(),f.isMobile()&&(this.prevID="settings_autospins"),$(this._$div).find("#settings_autospins").addClass("icon_selected"),this.showPage("settings_page_autospins","settings_autoplay_mob"),$(this._$div).find("#settings_general").removeClass("icon_selected"),$(this._$div).find("#settings_bets").removeClass("icon_selected"),this._autoSpinsSlider.setValue(0)},s.prototype.resize=function(){var a=0,b=0;f.isDesktop()?$("body").append(this._$settingsHolder):(this._$settingsHolder.css("z-index",99999),$("body").append(this._$settingsHolder),a=$(window).width(),b=$(window).height(),this._$settingsHolder.css("width",a+"px"),f.isLandscape()?(this._$header.css("width",a-80+"px"),this._$pages.css("width",a-100+8+"px"),this._$footer.css("width",a-80+"px"),this._$pages.css("left","90px"),this._$pages.css("height",b-124+"px"),this._$menu.css("height",b+"px"),this._$menu.css("width","80px")):(this._$header.css("width","100%"),this._$footer.css("width","100%"),this._$pages.css("left","10px"),this._$pages.css("width",a-20+8+"px"),this._$pages.css("height",b-204+"px"),this._$menu.css("width",a-10),this._$menu.css("height","80px")))},s}(d);c.Settings=s;var t=function(){function a(b,c,d){this._value=0,this._currentKeypadValue="",this._clickCount=0,this._$div=$("#"+b),this._$keypadDiv=$("#"+d),this._$keypadDisplay=this._$keypadDiv.find(".keypad_display"),this._onChange=c,this._value=0,a.isKeypadInitialized||this.initKeypad(),this._$div.on("click",function(){a.currentInput=this,this.clearKeypad(),this._$keypadDiv.show()}.bind(this)),this.setValue()}return a.prototype.getDiv=function(){return this._$div},a.prototype.getValue=function(){return 100*this._value},a.prototype.setValue=function(a){if(a!=this._value&&this._onChange(this._value=a?100*a:a),a){var b=m.formatAsCredits;m.formatAsCredits=!1,this._$div.text(m.format(100*a||0)),m.formatAsCredits=b}else this._$div.text("0")},a.prototype.clearKeypad=function(){this._clickCount=0,this._currentKeypadValue="0",this._$keypadDisplay.text(this._currentKeypadValue)},a.prototype.addCharacter=function(a){0==this._clickCount&&(this._currentKeypadValue=""),this._currentKeypadValue.length+1<7&&(this._clickCount++,this._currentKeypadValue+=a,this._$keypadDisplay.text(this._currentKeypadValue))},a.prototype.initKeypad=function(){this._$keypadDiv.find(".keypad_1").on("click",function(){this.addCharacter("1")}.bind(this)),this._$keypadDiv.find(".keypad_2").on("click",function(){this.addCharacter("2")}.bind(this)),this._$keypadDiv.find(".keypad_3").on("click",function(){this.addCharacter("3")}.bind(this)),this._$keypadDiv.find(".keypad_4").on("click",function(){this.addCharacter("4")}.bind(this)),this._$keypadDiv.find(".keypad_5").on("click",function(){this.addCharacter("5")}.bind(this)),this._$keypadDiv.find(".keypad_6").on("click",function(){this.addCharacter("6")}.bind(this)),this._$keypadDiv.find(".keypad_7").on("click",function(){this.addCharacter("7")}.bind(this)),this._$keypadDiv.find(".keypad_8").on("click",function(){this.addCharacter("8")}.bind(this)),this._$keypadDiv.find(".keypad_9").on("click",function(){this.addCharacter("9")}.bind(this)),this._$keypadDiv.find(".keypad_0").on("click",function(){this.addCharacter("0")}.bind(this)),this._$keypadDiv.find(".keypad_dout").on("click",function(){this.addCharacter(".")}.bind(this)),this._$keypadDiv.find(".keypad_cancel").on("click",function(){this.clearKeypad(),this._$keypadDiv.hide()}.bind(this)),this._$keypadDiv.find(".keypad_ok").on("click",function(){this._$keypadDiv.hide(),0==this._currentKeypadValue.length?a.currentInput.setValue(null):a.currentInput.setValue(parseFloat(this._currentKeypadValue)),this.clearKeypad()}.bind(this)),a.isKeypadInitialized=!0},a.isKeypadInitialized=!1,a}();c.NumericInput=t;var u=function(){function a(a,b){var c=this;this._idx=0,this.hideAll=function(){return c._$pages.forEach(function(a){return a.hide()})},this.updatePage=this.updatePage.bind(this),this._$div=$("#"+a),this._$nextBtn=this._$div.find(".pager-right"),this._$prevBtn=this._$div.find(".pager-left"),this._$text=this._$div.find(".pager-text"),this._$pages=b.map(function(a){return $("#"+a)}),this._$nextBtn.on("click",function(a){return c.updatePage(c._idx+1)},this.paginationNum()),this._$prevBtn.on("click",function(a){return c.updatePage(c._idx-1)},this.paginationNum()),this.hideAll(),this.updatePage(this._idx)}return a.prototype.updatePage=function(a){var b=j.globalSounds.getAtlas();0===Object.keys(b).length||j.globalSounds.playCue("Click_Toggle_Button"),this._$pages[this._idx].hide(),this._idx=a,this._idx<0?this._idx=this._$pages.length-1:this._idx>=this._$pages.length&&(this._idx=0),this._$pages[this._idx].show(),this._$text.text(this._idx+1+"/"+this._$pages.length)},a.prototype.paginationNum=function(){function a(){j.globalSounds.playCue("GENERIC_CLICK"),$("#index"+c).removeClass("paginatonIndexOver"+c),$("#index"+c).addClass("paginatonIndex"+c),c--,0===c&&(c=d),$("#index"+c).addClass("paginatonIndexOver"+c)}function b(){j.globalSounds.playCue("GENERIC_CLICK"),$("#index"+c).removeClass("paginatonIndexOver"+c),$("#index"+c).addClass("paginatonIndex"+c),c%=d,c++,$("#index"+c).addClass("paginatonIndexOver"+c)}var c=1,d=f.defaultSettings.totalPaytablePages;$(".pager-left").on("click",a),$(".pager-right").on("click",b)},a}();c.PagerWidget=u;var v=function(){function b(b){this._currentIndex=0,this._$div=$("#"+b),this._$value=$(this._$div.find(".value")),this._$buttonNext=$(this._$div.find(".button_next")),this._$buttonPrev=$(this._$div.find(".button_prev")),this._$buttonPrev.on("click",function(){var b=this;this._currentIndex>0&&(a.Core.Environment.playVibrate(),j.globalSounds.playCue("plus_minus"),this.setValue(this._values[this._currentIndex-1]),f.isMobile()&&(this._$buttonPrev.css("visibility","hidden"),a.Core.Time.juggler.setTimeout(function(){b._$buttonPrev.css("visibility","visible")},100)))}.bind(this)),this._$buttonNext.on("click",function(){var b=this;this._currentIndex<this._values.length-1&&(a.Core.Environment.playVibrate(),j.globalSounds.playCue("plus_minus"),this.setValue(this._values[this._currentIndex+1]),f.isMobile()&&(this._$buttonNext.css("visibility","hidden"),a.Core.Time.juggler.setTimeout(function(){b._$buttonNext.css("visibility","visible")},100)))}.bind(this))}return b.prototype.getValue=function(){return this._values[this._currentIndex]},b.prototype.setMax=function(){this.setValue(this._values[this._values.length-1])},b.prototype.setValue=function(a,b){var c=a!=this.getValue();this._currentIndex=this._values.indexOf(a),this.showValue(),!b&&c&&this.onChange&&this.onChange(a)},b.prototype.setIndex=function(a,b){this._currentIndex=a,this.showValue(),!b&&this.onChange&&this.onChange()},b.prototype.setValues=function(a,b){this._values=a,this._valueLabels=b,this._currentIndex=0,this.setValue(this._values[0])},b.prototype.setText=function(a){this._$value.text(a)},b.prototype.showValue=function(){this._$value.text(this._valueLabels[this._currentIndex]),this._$buttonNext.removeClass("disabled"),this._$buttonPrev.removeClass("disabled"),this._$buttonNext.css("pointer-events","all"),this._$buttonPrev.css("pointer-events","all"),this._currentIndex===this._values.length-1?(this._$buttonNext.addClass("disabled"),this._$buttonNext.css("pointer-events","none")):0===this._currentIndex&&(this._$buttonPrev.addClass("disabled"),this._$buttonPrev.css("pointer-events","none"))},b}();c.StepperWidget=v;var w=function(b){function c(c){var d=b.call(this,c)||this;return d.calculateValues=function(){var a=d.calculateTotalBetCombos(r.betLevels),b=[];a.forEach(function(a){b.push(m.format(a.totalBet))}),d.setValues(a,b)},d.calculateValues(),d.onChange=function(b){r.currentBetLevel=b.betLevel,a.Common.ApplicationBase.instance.emit(q.ON_BET_CHANGE,b)},a.Common.ApplicationBase.instance.on(q.ON_BET_CHANGE,function(a){a.betLevel&&(r.currentBetLevel=a.betLevel);var b=r.getTotalBetCash();this.setValue(b,!0)}.bind(d)),d}return __extends(c,b),c.prototype.showValue=function(){b.prototype.showValue.call(this),this._values.length>0&&(this._$value.text(m.format(this._values[this._currentIndex].totalBet)),f.isMobile()&&a.Common.Server.isbetSelect&&$("#cp_bet").text(m.format(this._values[this._currentIndex].totalBet)))},c.prototype.setValue=function(a,b){for(var c=a!=this.getValue(),d=0;d<this._values.length;d++)if(this._values[d].totalBet==a){this._currentIndex=d;break}this.showValue(),!b&&c&&this.onChange&&this.onChange(a)},c.prototype.calculateTotalBetCombos=function(a){for(var b=[],c=0;c<a.length;c++)b.push({betLevel:a[c],totalBet:a[c]*r.fixedBet});b.sort(function(a,b){return a.totalBet>b.totalBet?1:a.totalBet<b.totalBet?-1:0});var d=0,e=[];return b.forEach(function(a){a.totalBet!=d&&e.push(a),d=a.totalBet}),JSON.parse(JSON.stringify(e))},c}(v);c.StepperTotalBet=w;var x=function(){function b(a){this._value=a.betLevel,this._valueLabel=a.totalBet;var b=this.getIndexOfBet(this._value);this._$div='<div class="show-bet" id='+b+">"+m.format(Number(this._valueLabel))+"</div>"}return b.prototype.selectedBet=function(){a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_BET_CHANGE,{betLevel:this._value,totalBet:this._valueLabel})},b.prototype.changeSelectedBet=function(a){a.betLevel==this._value?this._$div.addClass("current-bet"):this._$div.removeClass("current-bet")},b.prototype.getValue=function(){return this._value},b.prototype.getIndexOfBet=function(a){return p.current.getGameConfig().getBetValues().indexOf(a)+1},b.prototype.setValue=function(a,b){this.getValue();this.showValue()},b.prototype.setValues=function(a){this._value=a.betLevel,this._valueLabel=a.totalBet,this.setValue(this._value)},b.prototype.getDiv=function(){return this._$div},b.prototype.showValue=function(){this._$div.text(this._valueLabel)},b}();c.BetButtonWidget=x;var y=function(){function a(a,b){this._$div=$("#"+a),this._onChange=b,this._$div.addClass("checkbox"),this._$div.append("<div class='checkbox_handle'></div>"),this._$handle=this._$div.find(".checkbox_handle"),this._$div.on("click",function(a){j.globalSounds.playCue("GENERIC_CLICK"),this.setValue(!this._value)}.bind(this))}return a.prototype.setValue=function(a){this._value=a,this._value?(this._$handle.animate({left:"35px"},200),this._$div.removeClass("checkbox_off"),this._$div.addClass("checkbox_on")):(this._$handle.animate({left:"4px"},200),this._$div.removeClass("checkbox_on"),this._$div.addClass("checkbox_off")),this._onChange(this._value)},a.prototype.getValue=function(){return this._value},a}();c.CheckboxWidget=y;var z=function(){function b(a,c,d,e,g){this._minValue=0,this._maxValue=1,this._isMouseDown=!1,this._$div=$("#"+a),this._$div.addClass("slider"),this._$div.append('\n            <div class="value_label">Label</div>\n            <div class="groove-container">\n                <div class="min_label">0</div>\n                <div class="groove">\n                    <div class="lit"></div>\n                    <div class="handle"></div>\n                </div>\n                <div class="max_label">1</div>\n            </div>'),this._onDisplay=e||function(a){return a},this._clamp=g||1,this._minValue=c,this._maxValue=d,this._$handle=$(this._$div.find(".handle")),this._$litBar=$(this._$div.find(".lit")),this._$groove=$(this._$div.find(".groove")),this._$labelMin=$(this._$div.find(".min_label")),this._$labelMax=$(this._$div.find(".max_label")),this._$labelValue=$(this._$div.find(".value_label")),this._$labelMin.text(this._onDisplay(c)),this._$labelMax.text(this._onDisplay(d)),this._$div.on("mouseup",function(a){this._isMouseDown=!1}.bind(this)),this._$div.on("mousedown",function(a){this._isMouseDown=!0;var c=this._$groove.offset();f.isDesktop()?this.calcValue((a.clientX-c.left)*(1/b.scaleFactor)):this.calcValue(a.clientX-c.left)}.bind(this)),this._$div.on("touchmove",function(a){var b=this._$groove.offset();this.calcValue(a.originalEvent.touches[0].clientX-b.left)}.bind(this)),f.isDesktop()&&this._$div.on("mousemove",function(a){if(this._isMouseDown){var c=this._$groove.offset();this.calcValue((a.originalEvent.clientX-c.left)*(1/b.scaleFactor))}}.bind(this)),this.setValue(0)}return b.prototype.getValue=function(){return this._value},b.prototype.setValue=function(a){this._value=a,this._$labelValue.text(this._onDisplay(a));var b=(a-this._minValue+1)/(this._maxValue-this._minValue+1)*100;this._$litBar.css("width",b+"%"),this._$handle.css("left",b+"%"),this.onChange&&this.onChange(a)},b.prototype.enable=function(a){a?this._$div.removeClass("disabled"):this._$div.addClass("disabled")},b.prototype.calcValue=function(b){var c=b/this._$groove.outerWidth()*(this._maxValue-this._minValue)+this._minValue,d=this._clamp;c<this._minValue+d?c=this._minValue:c>this._maxValue-d&&(c=this._maxValue),this.setValue(a.Core.Maths.roundToNearest(c,d))},b.scaleFactor=1,b}();c.SliderWidget=z}(b.SettingsPages||(b.SettingsPages={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Time.Juggler,d=a.Common.GameEvents,e=a.Common.SceneProfile,f=a.Core.Renderer.Stage,g=a.Core.Lang,h=a.Common.Currency,i=PIXI.Graphics,j=a.Common.Server.ResponseResult,k=a.Common.Server,l=a.Core.SoundManager,m=function(h){function k(f,g){var i=h.call(this)||this;if(i._reels=[],i._allSymbols=[],i._wasSpinInterrupted=!1,i._symbolProfiles={},i._reelsSpinning=0,i._assets=f,i._juggler=new c(!0),!g)throw"[Aperture] Required parameter 'sceneId' missing in Aperture constructor in layout.  Valid constructor is : Aperture(assets, sceneId)";return i._sceneProfile=e.getSceneProfile(g),i.once(a.Core.Events.ON_DESTROY,i.onDestroy),i.once(a.Core.Events.ON_CREATE,i.onCreate),a.Common.ApplicationBase.instance.on(b.ControlPanel.EVENT_INTERRUPT_SPIN,i.onInterruptSpin,i),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_WIN_PRESENTATION_END,i.onWinsShown,i),a.Common.ApplicationBase.instance.on(d.ON_GET_GAME_RESULTS,i.onGameResults,i),a.Common.ApplicationBase.instance.on(d.ON_GET_CLEAR_ALL_SCREEN,i.onGameResults,i),a.Common.ApplicationBase.instance.on(a.Core.Events.ON_APP_EXCEPTION,function(){this._juggler._isActive=!1}.bind(i)),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_QUICK_SPIN,function(a){j.current&&j.current.getGameConfig().isQuickSpinAllowed()?k.isQuickSpin=a:k.isQuickSpin=!1}.bind(i)),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_MODIFY_APERTURE_START,i.hideReel,i),a.Common.ApplicationBase.instance.on(a.Slots.Aperture.STOP_REEL_SPINNING,function(){i._wasSpinInterrupted=!0,i._juggler.timeMultiplier=.5}),i}return __extends(k,h),k.prototype.onDestroy=function(){a.Common.ApplicationBase.instance.off(b.ControlPanel.EVENT_INTERRUPT_SPIN,this.onInterruptSpin),a.Common.ApplicationBase.instance.off(d.ON_GET_GAME_RESULTS,this.onGameResults),a.Common.ApplicationBase.instance.off(d.ON_RESULTS_DISPLAYED,this.onWinsShown),a.Common.ApplicationBase.instance.off(b.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinsShown),a.Common.ApplicationBase.instance.off(b.WinManager.EVENT_MODIFY_APERTURE_START,this.hideReel),this._reels.forEach(function(a){a.destroy(),a=null})},k.prototype.onCreate=function(b){var c=this;if(this._setup=b.params,!this._setup.symbols)throw"[Aperture] Missing 'symbols' property in Aperture setup";for(var d in this._sceneProfile.get().paytable)this._symbolProfiles[d]=new t(d,this._setup.symbols[d],this._sceneProfile.get().paytable[d]);this._behindReels=new PIXI.Container,this.addChild(this._behindReels);var e=this._setup.reel_spacing/2,f=0;this._allSymbols=[],this._setup.reels.forEach(function(b){var d=b.strip.split(","),g=new a.Slots.Reel(c,c._assets,b,d,c._juggler,c._setup.isCascadeSpin,c._setup.reelStopSequence);c._reels.push(g),g.x=e,c._setup.alignTop&&b.top_margin?g.y=b.top_margin:g.y=0,e+=c._setup.reel_spacing,c.addChild(g),g.mask=new i,g.mask.beginFill(16777215),g.mask.drawRect(-c._setup.reel_spacing/2,b.top_margin,c._setup.reel_spacing,b.height),g.mask.endFill(),g.mask.pivot.set(.5,.5),g.addChild(g.mask),c._allSymbols=c._allSymbols.concat(g.getVisibleSymbols()),g.reelIndex=f++})},k.prototype.onWinsShown=function(){this._juggler.timeMultiplier=1,this.stopSymbolAnimations()},k.prototype.onGameResults=function(){this.stopSymbolAnimations()},k.prototype.getBackContainer=function(){return this._behindReels},k.prototype.stopSymbolAnimations=function(){this.applyToSymbols(function(a){a.stopAnimation()})},k.prototype.startSpin=function(b){var c=this;void 0===b&&(b=!1),l.globalSounds.playCue("ReeL_spin"),this._spinTime=(new Date).getTime(),this._wasSpinInterrupted=!1,a.Common.ApplicationBase.instance.emit(d.ON_PLAYER_PROMPT,g.getPhrase("@footer_no_win")),this.applyToSymbols(function(a){a.fadeIn()}),this._juggler.timeMultiplier=k.isQuickSpin?this._setup.quickSpinMultiplier:this._setup.spinMultiplier,this._reels.forEach(function(a){c._setup.isCascadeSpin?a.startCascadeSpin():a.startSpin(),a.alpha=1}),a.Common.ApplicationBase.instance.emit(k.EVENT_REELS_SPIN_START,b)},k.prototype.dropSymbols=function(b,c){var d=this;this.alpha=1;var e=(new Date).getTime(),f=100;this._spinTime&&(f=(j.current.getGameConfig().getSpinDuration()||1e3)-(e-this._spinTime));for(var g=0;g<this._setup.reels.length;g++)f-=1e3*this._setup.reels[g].animation.drop.bounce_time,f-=1e3*this._setup.reels[g].animation.drop.back_delay,f-=1e3*this._setup.reels[g].animation.drop.delay;(f<0||!b.isNextGameBase()||!b.isBaseGame())&&(f=k.isQuickSpin?100:500),a.Core.Time.juggler.setTimeout(function(){d.showResults(b,c)},f)},k.prototype.getSymbolProfile=function(a){if(this._symbolProfiles[a])return this._symbolProfiles[a];throw"[Aperture] Symbol id does not exist in aperture symbols setup : "+a},k.prototype.getSymbolCounts=function(){var a={};return this.applyToSymbols(function(b){a[b.symbolId]=a[b.symbolId]||0,a[b.symbolId]++}),a},k.prototype.getReel=function(a){return this._reels[a]},k.prototype.getAllSymbols=function(){return this._allSymbols},k.prototype.getSpinningReelsCount=function(){var a=0;return this.applyToReels(function(b){b.isSpinning()&&a++}),a},k.prototype.getSymbols=function(a){var b=[];return a.forEach(function(a){b.push(this.getSymbolAtPosition(a.getReelIndex(),a.getRowIndex()))}.bind(this)),b},k.prototype.getAbsolutePositionCentre=function(a){var b=this._setup.reel_spacing,c=this._reels[a.getReelIndex()].getSymbol(a.getRowIndex()+1).height-50;return new PIXI.Point(b/2+a.getReelIndex()*b,-c/2+a.getRowIndex()*c)},k.prototype.getSymbolAtPosition=function(a,b){return this._reels[a].getSymbol(b+1)},k.prototype.getPositionCentre=function(a,b,c){return c=c||f.instance,this.getSymbolAtPosition(a,b).getLocalCoords(c)},k.prototype.getPositionCentreList=function(a,b){b=b||f.instance;var c=[];return a.forEach(function(a){c.push(this.getPositionCentre(a.getReelIndex(),a.getRowIndex(),b))}.bind(this)),c},k.prototype.restoreAperture=function(a){var b=0;a.forEach(function(a){this._reels[b++].setSymbols(a)}.bind(this))},k.prototype.updateAperture=function(a,b){var c=this;a&&a.length>0&&a.forEach(function(a){c._reels[a.getPosition().getReelIndex()].changeSymbols(a.getSymbol(),a.getPosition().getRowIndex())}),b&&b.length>0&&b.forEach(function(a){for(var b=c._reels[a.getReelIndex()]._setup.symbols_per_reel;b>0;)c._reels[a.getReelIndex()].changeSymbols(a.getSymbol(),--b)})},k.prototype.onInterruptSpin=function(){this._wasSpinInterrupted=!0,this._juggler.timeMultiplier=this._setup.interruptSpinMultiplier},k.prototype.onStopReelSpinning=function(){this._wasSpinInterrupted=!0,this._reels.forEach(function(a){a.isSpinning()&&a.animateReelStop()})},k.prototype.applyToSymbols=function(a){this._allSymbols.forEach(a)},k.prototype.applyToReels=function(a){this._reels.forEach(a)},k.prototype.showResults=function(b,c){function d(){if(k.isQuickSpin&&(j=0),f._wasSpinInterrupted){j=0;for(var b=0;b<f._reels.length;b++)h=f._setup.reelStopSequence[b],e();a.Common.ApplicationBase.instance.emit(k.EVENT_REEL_DROPPED,f._reels,f._wasSpinInterrupted)}else f._setup.reelStopSequence.indexOf(h)!=f._setup.reelStopSequence.length-1&&(h=f._setup.reelStopSequence[f._setup.reelStopSequence.indexOf(h)+1],j=i,e())}function e(e){var i,l=f._reels[h];if(g=f.getSymbolCounts(),f._wasSpinInterrupted&&a.Common.ApplicationBase.instance.emit(k.EVENT_REELS_DROPPED,b),!f._setup.hideAnticipation&&!f._wasSpinInterrupted&&h>1)for(var m in g){var n=g[m],o=f.getSymbolProfile(m);o.doTease(f._setup.teaseSymbolIds,m,n)&&function(b){i=b,j=0,f._juggler.timeMultiplier=4,a.Common.ApplicationBase.instance.emit(k.EVENT_TEASE_REEL,l,i)}(o)}l.dropSymbols(i,b.aperture.getStrip(h+1),function(e){f._allSymbols=f._allSymbols.concat(l.getVisibleSymbols()),--f._reelsSpinning>0?f._juggler.setTimeout(function(){d()},j):f._juggler.setTimeout(function(){a.Common.ApplicationBase.instance.emit(k.EVENT_REELS_DROPPED,b),c&&c()},i?550:j)})}var f=this;this._allSymbols=[];var g,h=f._setup.reelStopSequence[0],i=1e3*this._reels[0]._setup.animation.drop.delay,j=i;this._reelsSpinning=this._reels.length,e()},k.prototype.hideReel=function(a){this._reels[a].alpha=0},k.prototype.showReel=function(a){this._reels[a].alpha=1},Object.defineProperty(k.prototype,"isSpinning",{get:function(){return this._reelsSpinning>0},enumerable:!0,configurable:!0}),k.EVENT_REEL_DROPPED="aperture_reel_dropped",k.EVENT_SYMBOL_DROPPED="aperture_symbol_dropped",k.EVENT_TEASE_REEL="aperture_tease_reel",k.EVENT_TEASE_REEL_END="aperture_tease_reel_end",k.EVENT_REELS_DROPPED="aperture_all_reels_dropped",k.EVENT_REELS_SPIN_START="aperture_reels_start",k.STOP_REEL_SPINNING="stop_reel_spinning",k}(PIXI.Container);b.Aperture=m;var n=function(b){function c(a,c,d){var e=b.call(this)||this;return e._setup=d,e._assets=c,e._aperture=a,e._static=new PIXI.Sprite,e.addChild(e._static),e.scale.set(e._setup.default_symbol_scale||1),e._originalPosition=e.position,e}return __extends(c,b),c.prototype.getSymbolProfile=function(){return this._symbolProfile},c.prototype.fadeOut=function(){this.alpha=.4},c.prototype.fadeIn=function(){this.alpha=1},c.prototype.onDropped=function(){},c.prototype.setSymbol=function(a){this.symbolId=a,this._symbolProfile=this._aperture.getSymbolProfile(this.symbolId),this._static.texture=this._assets.getPIXITexture(this._symbolProfile.getTextureId()),this._static.anchor.x=.5,this._static.anchor.y=.5,this._symbolProfile.isInFront()&&this.parent.addChild(this)},c.prototype.getLocalCoords=function(b){return b=b||a.Core.Renderer.Stage.instance,b.toLocal(this.toGlobal(new PIXI.Point(0,0)))},c.prototype.stopAnimation=function(){this.alpha=1,this.visible=!0,this._originalPosition&&(this.position=this._originalPosition)},c.prototype.symbolRemoveAnimate=function(a){var b;return this.stopAnimation(),a=a||this._symbolProfile.getRemoveClipId(),a&&(b=this._assets.getMovieClip(a,!0),b.scale.set(this._setup.default_symbol_scale||1),this.visible=!1),b},c.prototype.animate=function(a,b){var c,d,e=this;if(this.stopAnimation(),b=b||this._symbolProfile.getMovieClipId(),this._symbolProfile.getFrameClipId()&&(c=this._assets.getMovieClip(this._symbolProfile.getFrameClipId(),!0)),b)d=this._assets.getMovieClip(b,!0),this.visible=!1;else var f=!1,g=5,h=setInterval(function(){e.alpha=f?1:.1,f=!f,0==g--&&clearInterval(h)},250);return{animationClip:d,frameClip:c}},c}(PIXI.Container);b.Symbol=n;var o=function(b){function c(c,d,e,f,g,h,i){var j=b.call(this)||this;j.rowIndex=0,j._symbols=[],j._speedM=1,j._isSpinning=!1,j._wasInterrupted=!1,j.spinDuration=0,j._section=0,j.isCascadeWinSpin=!1,j._assets=d,j._setup=e,j._strip=f,j._juggler=g,j._aperture=c,j.isCascadeSpin=h,j.reelStopSequence=i,j._container=new PIXI.Container,j.addChild(j._container),j._symbolHeight=j._setup.height/j._setup.symbols_per_reel;for(var k=a.Core.Maths.getRandomRange(1,f.length-(j._setup.symbols_per_reel+3),!0),l=-1;l<=j._setup.symbols_per_reel;l++){var m=new a.Slots.Symbol(c,j._assets,j._setup);j._container.addChild(m),m.y=(l+1.5)*j._symbolHeight+(j._setup.top_margin||0),j._symbols.push(m),m.setSymbol(f[l+k])}return j._section=0,j.isCascadeSpin?j.changeCascadeSection():j.changeSection(!0),j._symbolTransitionUpto=j.isCascadeSpin||j._setup.down?0:-j._symbolHeight,j._blur=new PIXI.filters.BlurFilter,j._blur.blurX=0,j._blur.blurY=0,j}return __extends(c,b),c.prototype.destroy=function(){this._juggler.remove(this)},c.prototype.dropInstant=function(a,b){if(this._isSpinning){this._juggler.remove(this),this._container.filters=null,this._isSpinning=!1;for(var c=-1;c<=this._setup.symbols_per_reel;c++)this._symbols[c+1].setSymbol(a[c+1]);this._container.y=1*-this._symbolHeight,TweenLite.to(this._container,1,{y:-this._symbolHeight,ease:Linear.easeIn,onComplete:function(){void 0!==b&&b()}})}},c.prototype.isSpinning=function(){return this._isSpinning},c.prototype.getLocalCoords=function(b){return b=b||a.Core.Renderer.Stage.instance,b.toLocal(this.toGlobal(new PIXI.Point(0,0)))},c.prototype.getCentroid=function(b){return b=b||a.Core.Renderer.Stage.instance,b.toLocal(this.toGlobal(new PIXI.Point(0,this._setup.height/2)))},c.prototype.getVisibleSymbols=function(){return this._symbols.slice(1,this._symbols.length-1)},c.prototype.getSymbolIds=function(){var a=[];return this._symbols.forEach(function(b){a.push(b.symbolId)}),a},c.prototype.startSpin=function(){var a=this;this._isSpinning||(this.spinDuration=0,this._wasInterrupted=!1,this._finalSymbols=null,this.position.y=0,this._isSpinning=!0,TweenLite.to(this._container,this._setup.animation.start.ramp_time||0,{y:this._container.y+(this._setup.animation.start.ramp_distance||0)*(this._setup.down?-1:1),ease:Power1.easeIn,delay:this._setup.animation.start.delay,onComplete:function(){a._setup.motion_blur&&(a._container.filters=[a._blur]),a._juggler.add(a),a._speedM=0,TweenLite.to(a,a._setup.animation.start.back_delay||1,{_speedM:m.isQuickSpin?1:a._setup.animation.accel_speed||1,ease:Power1.easeOut,onComplete:function(){}})}}))},c.prototype.startCascadeSpin=function(){var a=this;this._isSpinning||(this._wasInterrupted=!1,this._finalSymbols=null,this.position.y=0,this._isSpinning=!0,this.isCascadeWinSpin=j.current.getNextAction()==k.RE_SPIN||j.current.isFreeReSpin(),this.isCascadeWinSpin?(this._juggler.add(this),TweenLite.to(this,1,{_speedM:m.isQuickSpin?1:this._setup.animation.accel_speed||1})):TweenLite.to(this._container,this._setup.animation.start.ramp_time||0,{y:2*this._container.y,ease:Power1.easeInOut,delay:this._setup.animation.start.delay,onComplete:function(){a._juggler.add(a),TweenLite.to(a,1,{_speedM:m.isQuickSpin?1:a._setup.animation.accel_speed||1})}}))},c.prototype.getSymbolCount=function(a){var b=0;return this.applyToSymbols(function(c){c.symbolId===a&&b++}),b},c.prototype.setSymbols=function(a){var b=0;this._symbols.forEach(function(c){c.setSymbol(a[b++])})},c.prototype.changeSymbols=function(a,b){this._symbols[b+1].setSymbol(a)},c.prototype.getSymbol=function(a){return this._symbols[a]},c.prototype.dropSymbols=function(b,c,d){var e=this;this._onStopped=d,this._teaseSymbolProfile=b,b?(a.Core.Time.juggler.setTimeout(function(){e._finalSymbols=c.slice()},b.getTeaseDuration(this.reelIndex)),b.mimicNearMiss()&&(TweenLite.to(this,1,{y:this.y-this._symbolHeight*(this._setup.animation.tease_peek||1),ease:Linear.easeIn}),c[0]=b.getId())):this._finalSymbols=c.slice()},c.prototype.applyToSymbols=function(a){this.rowIndex=0,this.getVisibleSymbols().forEach(a)},c.prototype.onUpdate=function(a){this.spinDuration+=a,this.isCascadeSpin?this.isCascadeWinSpin?this.changeCascadeSection():(this._container.y+=this._setup.animation.spin_speed*a*this._speedM,this._container.y>this._symbolTransitionUpto&&this.changeCascadeSection()):(this._setup.down?(this._container.y+=this._setup.animation.spin_speed*a*this._speedM,this._container.y>this._symbolTransitionUpto&&(this._container.y=this._symbolTransitionUpto),this._container.y>=0&&this.changeSection()):(this._container.y-=this._setup.animation.spin_speed*a*this._speedM,this._container.y<this._symbolTransitionUpto&&(this._container.y=this._symbolTransitionUpto),this._container.y<=this._symbolTransitionUpto&&this.changeSection()),this._setup.motion_blur&&(this._blur.blurY=this._setup.motion_blur))},c.prototype.changeSection=function(a){if(void 0===a&&(a=!1),this._setup.down||a){this._container.y-=this._symbolHeight,this._section--,this._section<0&&(this._section=this._strip.length-1);for(var b=void 0,c=void 0,d=this._symbols.length-1;d>0;d--)b=this._symbols[d-1],c=this._symbols[d],b&&c.setSymbol(b.symbolId);if(this._finalSymbols){if(this._setup.animation.stop_speed&&this._setup.animation.stop_speed>0){var e=this._setup.animation.stop_speed;this._speedM=this._speedM>e?this._speedM-e:.1,this._blur.blurY=1}this._symbols[0].setSymbol(this._finalSymbols.pop()),this._finalSymbols.length||this.animateReelStop()}else this._symbols[0].setSymbol(this._strip[this._section])}else{this._container.y+=this._symbolHeight,this._section++,this._section>=this._strip.length&&(this._section=0);for(var b=void 0,c=void 0,d=0;d<this._symbols.length-1;d++)b=this._symbols[d+1],c=this._symbols[d],b&&c.setSymbol(b.symbolId);if(this._finalSymbols){if(this._setup.animation.stop_speed&&this._setup.animation.stop_speed>0){var e=this._setup.animation.stop_speed;this._speedM=this._speedM>e?this._speedM-e:.1,this._blur.blurY=1}var f=this._finalSymbols[0];this._finalSymbols=this._finalSymbols.slice(1,this._finalSymbols.length),this._symbols[this._symbols.length-1].setSymbol(f),this._finalSymbols.length||this.animateReelStop()}else this._symbols[this._symbols.length-1].setSymbol(this._strip[this._section])}},c.prototype.changeCascadeSection=function(){if(this._finalSymbols&&this._finalSymbols.length>0){if(this.isCascadeWinSpin){var a=this._symbols.length-this._finalSymbols.length;this._symbols[a].setSymbol(this._finalSymbols[0]),this._finalSymbols=1==this._finalSymbols.length?[]:this._finalSymbols.slice(1,this._finalSymbols.length)}else{for(var b=void 0,c=void 0,d=this._symbols.length-1;d>0;d--)b=this._symbols[d-1],c=this._symbols[d],b&&c.setSymbol(b.symbolId);this._symbols[0].setSymbol(this._finalSymbols.pop())}this._finalSymbols.length||this.animateCascadeReelStop()}},c.prototype.animateCascadeReelStop=function(){function b(){a.Common.ApplicationBase.instance.emit(m.EVENT_REEL_DROPPED,c,c._wasInterrupted),c.applyToSymbols(function(b){b.onDropped(),a.Common.ApplicationBase.instance.emit(m.EVENT_SYMBOL_DROPPED,b,c),c.rowIndex++})}var c=this;this._isSpinning=!1,this._juggler.remove(this),this._container.filters=null,this.isCascadeWinSpin?(b(),c._onStopped(c)):(this._container.y=-2*this._setup.symbols_per_reel*c._symbolHeight,TweenLite.to(this._container,this._setup.animation.drop.bounce_time||1,{y:-c._symbolHeight,ease:Power1.easeInOut,onStart:function(){c.reelIndex<c._aperture._setup.reels.length-1&&(b(),c._onStopped(c))},onComplete:function(){c.reelIndex==c._aperture._setup.reels.length-1&&(b(),c._onStopped(c))}}))},c.prototype.animateReelStop=function(){function b(){a.Common.ApplicationBase.instance.emit(m.EVENT_REEL_DROPPED,d,d._wasInterrupted),d.applyToSymbols(function(b){b.onDropped(),a.Common.ApplicationBase.instance.emit(m.EVENT_SYMBOL_DROPPED,b,d),d.rowIndex++})}var c=this,d=this;this._isSpinning=!1,this._juggler.remove(this),this._container.filters=null,this._setup.animation.drop?(a.Core.SoundManager.globalSounds.playCue("REEL_DROP"),this._container.y=-d._symbolHeight+this._setup.animation.drop.bounce_distance*(this._setup.down?1:-1),this.reelStopSequence[this.reelStopSequence.length-1]!=this.reelIndex&&d._onStopped(d),
TweenLite.to(this._container,this._setup.animation.drop.bounce_time,{y:-d._symbolHeight,delay:this._setup.animation.drop.back_delay,ease:Power1.easeInOut,onComplete:function(){b(),c.reelStopSequence[c.reelStopSequence.length-1]==c.reelIndex&&(d._onStopped(d),a.Common.ApplicationBase.instance.emit(m.EVENT_TEASE_REEL_END,c))}})):(this._container.y=-d._symbolHeight,b(),d._onStopped(d),a.Common.ApplicationBase.instance.emit(m.EVENT_TEASE_REEL_END,this))},c}(PIXI.Container);b.Reel=o;var p=function(){function a(a){this._aperture=a}return a.prototype.getStrip=function(a){return this._aperture[a-1]},a.prototype.getReelCount=function(){return this._aperture.length},a.prototype.getVisibleStrip=function(a){var b=this.getStrip(a);return b.slice(1,b.length-1)},a.prototype.getAperture=function(){return this._aperture},a.prototype.getVisibleAperture=function(){var b=[];return this._aperture.forEach(function(a){b.push(a.slice(1,a.length-1))}),new a(b)},a.prototype.isSymbolVisible=function(a,b){return this.getVisibleStrip(b).indexOf(a)>-1},a.prototype.getOccurrences=function(a,b){var c=[];b=b||this._aperture.length;for(var d=1;d<b;d++)this.isSymbolVisible(a,d)&&c.push(d);return c},a}();b.ApertureResponse=p;var q=function(){function a(a){this._wins=[],this.result=a,this.aperture=new p(a.getGrid()),a.getWinDetails()&&a.getWinDetails().length>0&&(a.getWinDetails().sort(function(a,b){return b.win-a.win}),a.getWinDetails().forEach(function(a){this._wins.push(new r(a))}.bind(this)))}return a.prototype.hasScatterWin=function(){for(var a=0;a<this._wins.length;a++)if(this._wins[a].getType()==r.TYPE_SCATTER)return!0;return!1},a.prototype.getResult=function(){return this.result},a.prototype.getFeatureWin=function(){var a;return this.applyToAllWins(function(b){b.getFeatureId()&&(a=b)}),a},a.prototype.applyToAllWins=function(a){this.getWins().forEach(a)},a.prototype.getWins=function(){return this._wins.slice()},a.prototype.getSingleWin=function(){return this._wins[0]},a.prototype.getWinCount=function(){return this._wins.length},a.prototype.getAction=function(){return this.result.getAction()},a.prototype.getNextAction=function(){return this.result.getNextAction()},a.prototype.getTotalWin=function(){return this.result.getTotalWin()},a.prototype.isBaseGame=function(){return this.result.getAction()==k.BASE},a.prototype.isNextGameBase=function(){return this.result.getNextAction()==k.BASE},a.prototype.isFreeSpinGame=function(){return this.result.getAction()==k.FREE_SPINS},a.prototype.isActionMatch=function(a){return this.result.getAction()===a},a.prototype.getGameRoundWin=function(){return this.result.getGameRoundWin()},a.prototype.getMultiplier=function(){return this.result.getMultiplier()||1},a.prototype.getExpandingReels=function(){return this.result.getExpandingReels()},a.prototype.getModifierSymbolPosition=function(){return this.result.getModifierSymbolPosition()},a.prototype.isRoundFinished=function(){return this.result.isGameRoundOver()},a}();b.SpinResults=q;var r=function(){function a(a){this._data=a}return a.prototype.getFeatureId=function(){return this._data.feature},a.prototype.getPositions=function(){return this._data.positions},a.prototype.getLine=function(){return this._data.line||0},a.prototype.getType=function(){return this._data.type},a.prototype.getWinCash=function(){return this._data.win||0},a.prototype.getSymbolId=function(){return this._data.symbol},a.prototype.getOAK=function(){return this._data.oak},a.prototype.getDescription=function(){var b;switch(this.getType()){case a.TYPE_LINE:b=g.getPhrase("line_x_wins_caps",{line:this.getLine(),win:h.format(this.getWinCash())});break;default:b=g.getPhrase("way_wins_caps",{symbol:this.getSymbolId(),win:h.format(this.getWinCash())})}return b},a.TYPE_LINE="LINE",a.TYPE_WAY="WAY",a.TYPE_SCATTER="SCATTER",a}();b.SlotWin=r;var s=function(){function a(a){this.rule=a.rule,this._oak=a.oak}return a.prototype.getOAKMultiplier=function(a){return this._oak?this._oak["x"+a]:0},a}();b.SymbolPays=s;var t=function(){function a(a,b,c){this._data=b,this._data.id=a,this._data.pays=c}return a.prototype.isInFront=function(){return this._data.bring_to_front},a.prototype.getAnimationDuration=function(){return this._data.animation.duration},a.prototype.getId=function(){return this._data.id},a.prototype.getTextureId=function(){return this._data.texture},a.prototype.getMovieClipId=function(){return this._data.animation.clip?this._data.animation.clip:null},a.prototype.getRemoveClipId=function(){return this._data.animation.remove},a.prototype.getMovieClipOffsets=function(){return this._data.animation.offsets||{x:0,y:0}},a.prototype.getDropClipId=function(){return this._data.animation.drop},a.prototype.getReelDropClipId=function(){return this._data.animation.reelDrop},a.prototype.getActiveClipId=function(){return this._data.animation.active},a.prototype.getSpineId=function(){return this._data.animation.spineId},a.prototype.getFrameClipId=function(){return this._data.animation.frame},a.prototype.getAudioDropId=function(){return this._data.audio.drop},a.prototype.getAudioWinId=function(){return this._data.audio.win},a.prototype.getPays=function(){return new s(this._data.pays)},a.prototype.mimicNearMiss=function(){return!!this._data.tease&&Math.random()<=(this._data.tease.near_miss||0)},a.prototype.getTeaseDuration=function(a){return this._data.tease.duration[a]||1e3},a.prototype.getTeaseAudioId=function(a){return this._data.tease&&this._data.tease.audio?this._data.tease.audio[a]?this._data.tease.audio[a]:this._data.tease.audio[0]:null},a.prototype.doTease=function(a,b,c){return this._data.tease&&Object.keys(a).indexOf(b)>=0&&a[b]==c},a}();b.SymbolProfile=t}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Utils.Queue,d=a.Common.SceneProfile,e=a.Common.GameEvents,f=a.Core.Lang,g=a.Common.Currency,h=a.Core.Time.Juggler,i=a.Common.Server.ResponseResult,j=a.Core.Utils.convertToAmount,k=a.Core.Utils,l=a.Core.Environment,m=a.Common.Server,n=function(n){function o(c,f){var g=n.call(this)||this;if(g._isSkip=!1,g._idleCycling=!1,g._currentWinMultiplier=1,g._assets=c,g._juggler=new h(!0),!f)throw"[WinManager] Required parameter 'gameId' missing in WinManager constructor in layout.  Valid constructor is : WinManager(assets, gameId)";return g._sceneProfile=d.getSceneProfile(f),g.once(a.Core.Events.ON_DESTROY,g.onDestroy,g),g.once(a.Core.Events.ON_CREATE,g.onCreate,g),a.Common.ApplicationBase.instance.on(e.ON_GAME_CHANGED,g.onGameChanged,g),a.Common.ApplicationBase.instance.on(e.ON_GET_GAME_RESULTS,g.onPlayerBet,g),a.Common.ApplicationBase.instance.on(e.ADD_CELEBRATIONS,g.addCelebrationAnimations,g),a.Common.ApplicationBase.instance.on(o.STOP_SYMBOLS_ANIMATION,g.buttonClicked,g),a.Common.ApplicationBase.instance.on(b.ControlPanel.EVENT_AUTO_SPINS_START,g.onAutoStart,g),a.Common.ApplicationBase.instance.on(b.ControlPanel.EVENT_AUTO_SPINS_END,g.onAutoEnd,g),a.Common.ApplicationBase.instance.on(b.ControlPanel.EVENT_AUTO_SPINS_ENDS,g.onAutoEnd,g),a.Common.ApplicationBase.instance.on(e.ON_GET_CLEAR_ALL_SCREEN,g.onPlayerBet,g),a.Common.ApplicationBase.instance.on(o.EVENT_FREE_SPINS_END,g.onAutoStart,g),a.Common.ApplicationBase.instance.on(b.Aperture.EVENT_REELS_SPIN_START,g.onSpinStart,g),a.Common.ApplicationBase.instance.on(a.Core.Events.ON_APP_EXCEPTION,function(){g._juggler._isActive=!1}),g.setupWinTypes({BIG_WIN:l.defaultSettings.bigWinRange,MEGA_WIN:l.defaultSettings.megaWinRange,SUPER_WIN:l.defaultSettings.superWinRange}),g}return __extends(o,n),o.prototype.onCreate=function(b,c){var d=this;this._layout=c,this._setup=b.params,this._sceneObject=c.getParentScene(),this._aperture=c.getComponent(this._setup.aperture),this._paylineRenderer=c.getComponentPlugin(this,this._setup.payline_renderer),this._symbolAnimation=c.getComponentPlugin(this,this._setup.symbol_animator),this._movingWild=c.getComponentPlugin(this,this._setup.moving_wild_animator),this._modifiedSymbols=c.getComponentPlugin(this,this._setup.modifier_symbol_animator),this._expandingSymbolReels=c.getComponentPlugin(this,this._setup.expanding_reel_animator),this._animationLayer=new PIXI.Container,this._aperture.addChild(this._animationLayer),a.Core.Utils.touchToSkip(function(){d._isSkip&&d.stopWinDisplay()}),this.winSummaryDelay=3e3,this._setup.win_summary_duration&&(this.winSummaryDelay=this._setup.win_summary_duration)},o.prototype.getSceneObject=function(){return this._sceneObject},o.prototype.onDestroy=function(){this.removeAllListeners(),a.Common.ApplicationBase.instance.off(e.ON_GAME_CHANGED,this.onGameChanged),a.Common.ApplicationBase.instance.off(e.ON_GET_GAME_RESULTS,this.onPlayerBet),a.Common.ApplicationBase.instance.off(b.Aperture.EVENT_REELS_SPIN_START,this.onSpinStart,this),a.Common.ApplicationBase.instance.off(b.ControlPanel.EVENT_AUTO_SPINS_START,this.onAutoStart),a.Common.ApplicationBase.instance.off(b.ControlPanel.EVENT_AUTO_SPINS_END,this.onAutoEnd),a.Common.ApplicationBase.instance.off(b.ControlPanel.EVENT_AUTO_SPINS_ENDS,this.onAutoEnd),a.Common.ApplicationBase.instance.off(o.STOP_SYMBOLS_ANIMATION,this.buttonClicked),a.Common.ApplicationBase.instance.off(e.ON_GET_CLEAR_ALL_SCREEN,this.onPlayerBet),a.Common.ApplicationBase.instance.off(e.ADD_CELEBRATIONS,this.addCelebrationAnimations)},o.prototype.setupWinTypes=function(a){this._winBandSetup=a},o.prototype.onSpinStart=function(a){!a&&this._movingWild&&i.current.getFeatureReelModifiersSymbols()&&this._movingWild.addMovingWildSymbol(i.current.getFeatureReelModifiersSymbols()),this._modifiedSymbols&&i.current.getFeatureReelModifiersSymbols()&&this._modifiedSymbols.addModifierSymbols(i.current.getFeatureReelModifiersSymbols()),this._expandingSymbolReels&&i.current.getFeatureExpandingReels()&&this._expandingSymbolReels.addExpandingSymbolReels(i.current.getFeatureExpandingReels()),this._animationLayer.removeChildren()},o.prototype.getWinBand=function(b){var c=j(b),d=null;for(var e in this._winBandSetup){if(!(c>=this._winBandSetup[e]*a.Slots.SettingsPages.BettingSetup.getTotalBetCash()))break;d=e}return d},o.prototype.onAutoEnd=function(){this._idleCycling=!0,this._isAutoPlay=!1},o.prototype.onAutoStart=function(){this._idleCycling=!1,this._isAutoPlay=!0},o.prototype.onGameChanged=function(){this.stopWinDisplay(),this._idleCycling=i.current.getAction()==m.BASE||i.current.getAction()==m.RE_SPIN},o.prototype.onPlayerBet=function(){this.stopWinDisplay()},o.prototype.getAperture=function(){return this._aperture},o.prototype.addModifySymbolBeforeReelStop=function(a,b){this._modifiedSymbols&&a.getModifierSymbolPosition()?this._modifiedSymbols.addModifierSymbols(a.getModifierSymbolPosition(),b):b()},o.prototype.displaySpinResults=function(b,d){var h=this,j=new k.Queue(this._juggler);this.visible=!0,a.Common.ApplicationBase.instance.emit(e.ON_PLAYER_PROMPT,"");var l=k.touchToSkip(function(){j.skip()}.bind(this)),n=b.getTotalWin(),p=b.getWins(),q=b.getWins(),r=b.getFeatureWin();this._expandingSymbolReels&&b.getExpandingReels()&&j.add(function(a){h._expandingSymbolReels.addExpandingSymbolReels(i.current.getExpandingReels(),a)}),b.getModifierSymbolPosition()&&j.add(function(a){h.updateGridFeatureAfterReelStop(i.current.getModifierSymbolPosition(),a)}),j.add(function(a){h._aperture.updateAperture(b.getModifierSymbolPosition(),i.current.getExpandingReels()),h._currentWinMultiplier=b.getMultiplier(),h._modifiedSymbols&&h._modifiedSymbols.removeAnimations(),h._movingWild&&h._movingWild.removeAnimations(),h._expandingSymbolReels&&h._expandingSymbolReels.removeAnimations(),h._animationLayer.removeChildren(),a()}),b.isRoundFinished()&&(b.getAction()==m.RE_SPIN||b.isBaseGame())&&b.getGameRoundWin()>0&&this.addCelebrationAnimations(b.getGameRoundWin(),j),p.length>0?(this.visible=!0,j.add(function(c){a.Common.ApplicationBase.instance.emit(o.EVENT_SHOW_WIN_SUMMARY,b),a.Common.ApplicationBase.instance.emit(o.EVENT_WIN_PRESENTATION_START),h._setup.showPlayerMessages&&n>0&&h._juggler.setTimeout(function(){p.length>1?a.Common.ApplicationBase.instance.emit(e.ON_PLAYER_PROMPT,f.getPhrase("player_wins_x_caps",{win:g.format(n)})):a.Common.ApplicationBase.instance.emit(e.ON_PLAYER_PROMPT_WIN,p[0])},h.winSummaryDelay-1e3),h._juggler.setTimeout(function(){h.winSummaryEnd=!0,h._paylineRenderer.onWinPresentationComplete(),c()},h.winSummaryDelay)})):(this.visible=!1,this.winSummaryEnd=!0);var s;!this._setup.hideWinToggle&&q.length>1&&!this._isAutoPlay&&!b.isFreeSpinGame()&&j.add(function(b){var d=new c(h._juggler);q.forEach(function(b){b.getFeatureId()&&b.getWinCash()<=0||d.add(function(c){a.Common.ApplicationBase.instance.emit(o.EVENT_SHOW_WIN,b,!0,h._aperture.getSymbolProfile(b.getSymbolId()),!1),h._setup.showPlayerMessages&&b.getWinCash()&&b.getWinCash()>0?a.Common.ApplicationBase.instance.emit(e.ON_PLAYER_PROMPT_WIN,b):a.Common.ApplicationBase.instance.emit(e.ON_PLAYER_PROMPT," "),s=h._juggler.setTimeout(c,h._aperture.getSymbolProfile(b.getSymbolId()).getAnimationDuration()||h._setup.win_display_duration)})}),d.start(b)},!0),j.add(function(a){s&&s.stop(),a()}),r&&j.add(function(b){h._isSkip=!0,r.getPositions().length>0&&(a.Common.ApplicationBase.instance.emit(o.EVENT_SHOW_WIN,r,!0,h._aperture.getSymbolProfile(r.getSymbolId()),!1),a.Common.ApplicationBase.instance.emit(e.ON_PLAYER_PROMPT,f.getPhrase("@congratulations_caps")),s=h._juggler.setTimeout(b,h._aperture.getSymbolProfile(r.getSymbolId()).getAnimationDuration()||h._setup.win_display_duration))},!0),j.add(function(a){s&&s.stop(),a()}),j.add(function(c){a.Common.ApplicationBase.instance.emit(o.EVENT_WIN_PRESENTATION_END,b),c()}),q.length>0&&this._aperture._setup.isCascadeSpin&&j.add(function(c){a.Common.ApplicationBase.instance.emit(o.EVENT_REMOVE_WIN_SYMBOLS,b),h._juggler.setTimeout(c,h._setup.win_remove_duration||1e3)}),j.add(function(a){(b.getAction()===m.BASE||b.getAction()===m.RE_SPIN)&&b.getNextAction()===m.BASE&&h._isAutoPlay,a()}),j.start(function(){l(),j.wasSkipped&&this.stopWinDisplay(),d()}.bind(this))},o.prototype.updateGridFeatureAfterReelStop=function(a,b){b()},o.prototype.stopWinDisplay=function(){this._isSkip=!1,this._aperture.stopSymbolAnimations(),this._cycleDelay&&this._cycleDelay.stop(),this.visible=!1,this._juggler.purge()},o.prototype.buttonClicked=function(){this._idleCycling=!1,this.stopWinDisplay()},o.prototype.addCelebrationAnimations=function(b,c){var d=this.getWinBand(b),e=this._winBandSetup.MEGA_WIN*a.Slots.SettingsPages.BettingSetup.getTotalBetCash(),f=this._winBandSetup.SUPER_WIN*a.Slots.SettingsPages.BettingSetup.getTotalBetCash();if(d)switch(d){case"BIG_WIN":c.add(function(c){a.Core.Time.juggler.setTimeout(function(){a.Core.Renderer.SceneManager.showSceneAsOverlay(d,{win:b,celebrationEnd:!0,callback:c,OnComplete:function(){a.Core.Environment.playVibrate(1e3);var b=a.Core.SoundManager.globalSounds.startMusic("music_base",1500);void 0!=b&&b.volume(.4)}})},250)});break;case"MEGA_WIN":c.add(function(b){a.Core.Time.juggler.setTimeout(function(){a.Core.Renderer.SceneManager.showSceneAsOverlay("BIG_WIN",{win:e,celebrationEnd:!1,callback:b,OnComplete:function(){}})},250)}),c.add(function(c){a.Core.Renderer.SceneManager.showSceneAsOverlay(d,{win:b,celebrationEnd:!0,tickupStart:e,callback:c,OnComplete:function(){a.Core.Environment.playVibrate(1e3);var b=a.Core.SoundManager.globalSounds.startMusic("music_base",1500);void 0!=b&&b.volume(.4)}})});break;case"SUPER_WIN":c.add(function(b){a.Core.Time.juggler.setTimeout(function(){a.Core.Renderer.SceneManager.showSceneAsOverlay("BIG_WIN",{win:e,celebrationEnd:!1,callback:b,OnComplete:function(){}})},250)}),c.add(function(b){a.Core.Renderer.SceneManager.showSceneAsOverlay("MEGA_WIN",{win:f,celebrationEnd:!1,tickupStart:e,callback:b,OnComplete:function(){}})}),c.add(function(c){a.Core.Renderer.SceneManager.showSceneAsOverlay(d,{win:b,celebrationEnd:!0,tickupStart:f,callback:c,OnComplete:function(){a.Core.Environment.playVibrate(1e3);var b=a.Core.SoundManager.globalSounds.startMusic("music_base",1500);void 0!=b&&b.volume(.4)}})})}},o.EVENT_SHOW_WIN="win_manager_show_win",o.EVENT_SHOW_WIN_SUMMARY="win_manager_show_win_summary",o.EVENT_WIN_PRESENTATION_END="win_manager_presentation_complete",o.EVENT_MODIFY_APERTURE_START="win_manager_modifier_start",o.EVENT_WIN_PRESENTATION_START="win_manager_display_win",o.EVENT_FREE_SPINS_END="free_spins_feature_end",o.STOP_SYMBOLS_ANIMATION="stop_symbols_animation",o.EVENT_SHOW_FEATURE_WIN_SUMMARY="show_feature_win_summary",o.EVENT_SHOW_BROKEN_FEATURE_WIN_SUMMARY="show_broken_feature_win_summary",o.EVENT_REMOVE_WIN_SYMBOLS="remove_win_symbols",o}(PIXI.Container);b.WinManager=n}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),__assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},DO;!function(a){!function(b){!function(c){var d=a.Core.HTML.Page,e=a.Core.Events,f=a.Core.Environment,g=a.Common.Server,h=a.Common.GameEvents,i=a.Core.Lang,j=a.Core.SoundManager,k=a.Common.Currency,l=a.Common.Server.ServerTime,m=a.Common.PlayerMonitoring,n=a.Slots.SettingsPages.BettingSetup,o=a.Core.Time.Juggler,p=a.Core.Utils.formatTime,q=a.Common.Server.ResponseResult,r=a.Slots.SettingsPages.BetButtonWidget,s=a.Slots.SettingsPages.StepperTotalBet;c.EVENT_HIDE="panel_hide",c.EVENT_SHOW="panel_show",c.EVENT_SHOW_WIN="panel_show_win",c.EVENT_UPDATE_FEATURE_DISPLAY="panel_update_feature_display",c.EVENT_DISABLE="panel_disable",c.EVENT_NO_TOUCHES="panel_no_touches",c.EVENT_INTERRUPT_SPIN="panel_interrupt_spin",c.EVENT_STOP_SPIN="panel_stop_spin",c.EVENT_AUTO_SPIN="panel_auto_spin",c.EVENT_AUTO_SPIN_STOP="auto_spin_stop",c.EVENT_AUTO_SPINS_START="panel_auto_spins_start",c.EVENT_AUTO_SPINS_END="panel_auto_spins_end",c.EVENT_AUTO_SPINS_ENDS="panel_auto_spins_ends",c.EVENT_QUIT_GAME="panel_quit_game",c.EVENT_SPACE_BAR="panel_space_bar",c.EVENT_RE_SPIN_BUTTON_HIDE="re_spin_button_disable",c.EVENT_BET_PANEL_CLOSE="bet_panel_close",c.HIDE_PANEL_IN_BROKEN="hide_panel_in_broken",c.SHOW_PANEL_IN_BROKEN="show_panel_in_broken",c.PAYTABLE_SHOW_HIDE_BUTTONPANEL="hide button panel",c.DIV_POINTER="hide button panel",c.RESPIN="hide button panel",c.AUTO_SPINS_BUTTON_ENABLE="auto_spins_button_enable",c.PLAY_IDLE_ANIMATIONS="play_idle_animations";var t=function(d){function r(l,n){var p=d.call(this,l,n)||this;return p._autoSpins=0,p.firstLoad=!0,p._juggler=new o(!0),p._isLeftHanded=1==a.Common.ApplicationBase.getAppValue("leftHandedMode"),e.coreEvents.on(e.ON_APP_RESIZE,p.onResize,p),p.onResize(),a.Common.ApplicationBase.instance.on(h.ON_GAME_INITIALIZED,function(){q.current.isBrokenGameSate()?(q.current.getGameConfig().isAutoPlayDisplay()&&$("#button_auto_cp").addClass("disabled").css("display","block"),q.current.getAction()!=g.BASE&&q.current.getGameRoundWin()>0?(p._$textWin.text(k.format(q.current.getGameRoundWin())),p._$textWin.show(),p._$winWrapper.css("visibility","visible")):(p._$textWin.hide(),p._$winWrapper.css("visibility","visible"))):(p._$textWin.hide(),p._$winWrapper.css("visibility","visible"));var b=q.current.getGameConfig().getAutoPlayValues();p.autoSettingsPanel=new u("cp_auto_settings_panel"),p.betSettingsPanel=new w("cp_bet_settings_panel"),p._$autoSpinsSlider=new a.Slots.SettingsPages.SliderWidget("cp_slider_autospin_count",b[0],b[b.length],null,5),p._$autoSpinsSlider.onChange=function(b){a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_AUTO_SPIN_COUNT_CHANGE,b)},setInterval(p.updateTimeDisplay.bind(p),15e3),p.updateTimeDisplay(),""==f.launchVariables.homeUrl&&$("#button_home").css("display","none")}),a.Common.ApplicationBase.instance.on(m.EVENT_ALARM_CASH_LOSS,p.onCashLossAlarm,p),a.Common.ApplicationBase.instance.on(m.EVENT_ALARM_SINGLE_CASH_WIN,p.onSingleWinAlarm,p),a.Common.ApplicationBase.instance.on(m.EVENT_ALARM_TOTAL_CASH_WIN,p.onTotalWinAlarm,p),a.Common.ApplicationBase.instance.on(m.EVENT_ALARM_FEATURE_STOP,p.onFeatureStopAlarm,p),a.Common.ApplicationBase.instance.on(m.EVENT_ALARM_STOP_ON_ANY_WIN,p.onAnyWinAlarm,p),a.Common.ApplicationBase.instance.on(m.EVENT_ALARM_REALITY_CHECK,p.onRealityCheck,p),a.Common.ApplicationBase.instance.on(m.INSUFFICIENT_FUND,p.oninsufficientFund,p),a.Common.ApplicationBase.instance.on(m.EVENT_ALARM_BROKEN_MSG,p.onBrokenAlarm,p),a.Common.ApplicationBase.instance.on(c.RESPIN,p.startSpin,p),a.Common.ApplicationBase.instance.on(c.PAYTABLE_SHOW_HIDE_BUTTONPANEL,p.paytableShowHidePanel,p),a.Common.ApplicationBase.instance.on(m.EVENT_CHECK_MAX_CAP,p.onMaxCap,p),a.Common.ApplicationBase.instance.on(a.Common.GameEvents.HISTORY_RESPONSE,function(a){new v(a)},p),a.Common.ApplicationBase.instance.on(c.PLAY_IDLE_ANIMATIONS,p.playIdleAnimation,p),a.Common.ApplicationBase.instance.on(c.EVENT_HIDE,p.hidePanel,p),a.Common.ApplicationBase.instance.on(c.EVENT_SHOW,p.showPanel,p),a.Common.ApplicationBase.instance.on(c.EVENT_UPDATE_FEATURE_DISPLAY,p.onUpdateFeatureDisplay,p),a.Common.ApplicationBase.instance.on(h.ON_GET_GAME_RESULTS,p.onGetGameResults,p),a.Common.ApplicationBase.instance.on(h.ON_GET_CLEAR_ALL_SCREEN,p.onGetGameResults,p),a.Common.ApplicationBase.instance.on(h.ON_RESULTS_READY,p.onResultsReady,p),a.Common.ApplicationBase.instance.on(b.Aperture.EVENT_REELS_DROPPED,p.onReelsDropped,p),a.Common.ApplicationBase.instance.on(b.Aperture.EVENT_TEASE_REEL,p.onReelTease,p),a.Common.ApplicationBase.instance.on(c.EVENT_AUTO_SPIN_STOP,p.stopAutoSpinsukgc,p),a.Common.ApplicationBase.instance.on(c.EVENT_RE_SPIN_BUTTON_HIDE,p.disable,p),a.Common.ApplicationBase.instance.on(c.EVENT_BET_PANEL_CLOSE,p.removeBet,p),a.Common.ApplicationBase.instance.on(c.HIDE_PANEL_IN_BROKEN,p.hidePanelInBrokenPopUp,p),a.Common.ApplicationBase.instance.on(c.SHOW_PANEL_IN_BROKEN,p.showPanelInBrokenPopUp,p),a.Common.ApplicationBase.instance.on(c.AUTO_SPINS_BUTTON_ENABLE,p.enableButtonAutoSpins,p),a.Common.ApplicationBase.instance.on(h.ON_PLAYER_PROMPT,p.onPlayerPrompt,p),a.Common.ApplicationBase.instance.on(c.DIV_POINTER,p.divpointer,p),a.Common.ApplicationBase.instance.on(h.UPDATE_BALACE,p.updateBalance,p),a.Common.ApplicationBase.instance.on(h.ON_CONTINUE_GAME,p.onContinueGame,p),a.Common.ApplicationBase.instance.on(a.Slots.ControlPanel.EVENT_DISABLE,function(a){a?p.disable():p.enable()}),a.Common.ApplicationBase.instance.on(a.Core.Events.ON_APP_EXCEPTION,function(){p._juggler._isActive=!1}),a.Common.ApplicationBase.instance.on(c.EVENT_SHOW_WIN,function(a){a&&(p._$textWin.text(k.format(a)),p._$textWin.show(),p._$winWrapper.css("visibility","visible"),p._$textWin.addClass("win_update_throb"))}),a.Common.ApplicationBase.instance.on(c.EVENT_QUIT_GAME,function(){var b=decodeURIComponent(a.Core.Environment.launchVariables.homeUrl);b?"close"===b||"exit"===b?window.close():window.open(b,"_parent"):window.close()}),a.Common.ApplicationBase.instance.on(c.EVENT_NO_TOUCHES,p.onNoTouches,p),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_SETTINGS_CLOSED,p.onSettingsClosed,p),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_SETTINGS_OPEN,p.onSettingsOpen,p),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_DISPLAY_FORMAT_CHANGE,function(b){p._$textBalance.text(k.format(q.current.getBalance())),q.current&&q.current.getTotalWin()&&p._$textWin.text(k.format(q.current.getTotalWin())),p._$textBet.text(k.format(a.Slots.SettingsPages.BettingSetup.getTotalBetCash()))}),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_WIN_PRESENTATION_START,function(){a.Core.Time.juggler.setTimeout(function(){p.onDisplayWin()},q.current.getAction().includes(g.BONUS)?100:2250)}),a.Common.ApplicationBase.instance.on(h.ON_GAME_CHANGED,p.onGameChanged,p),a.Common.ApplicationBase.instance.on(h.ON_GAME_READY,p.onGameReady,p),a.Common.ApplicationBase.instance.on(h.ON_GET_GAME_RESULTS,p.disable,p),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_BET_CHANGE,function(b){f.isDesktop()&&p._$autoSettingsPanel.hide(),f.isMobile()&&!a.Common.Server.isbetSelect&&p._$textBet.text(k.format(b.totalBet)),f.isDesktop()&&p._$textBet.text(k.format(b.totalBet)),a.Common.ApplicationBase.instance.emit(g.SEND_UPDATE_STAKE,b.totalBet)}),e.coreEvents.on(j.EVENT_SET_MUTE,function(a){a?(p.soundON=!1,$(document).find("#button_audio").removeClass("audio_on"),$(document).find("#button_audio").addClass("audio_off"),$(document).find("#button_audio_screen").removeClass("audio_on_screen"),$(document).find("#button_audio_screen").addClass("audio_off_screen")):(p.soundON=!0,$(document).find("#button_audio").removeClass("audio_off"),$(document).find("#button_audio").addClass("audio_on"),$(document).find("#button_audio_screen").removeClass("audio_off_screen"),$(document).find("#button_audio_screen").addClass("audio_on_screen"))}),$(document).on("click","#fullScreen",function(a){j.globalSounds.playCue("GENERIC_CLICK"),document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_LEFT_HANDED_MODE,function(a){p._isLeftHanded=a,p.onResize()}),a.Core.Environment.isDesktop()&&$(document).on("keyup",function(b){32!=b.keyCode||a.Common.Server.isPaytableVisible||a.Core.Time.juggler.setTimeout(function(){},0)}),a.Common.ApplicationBase.instance.on(c.EVENT_SPACE_BAR,function(){a.Common.ApplicationBase.getAppValue("spaceToSpin")&&("none"==p._$buttonSpin.css("display")||p._$buttonSpin.hasClass("disabled")?"none"==p._$buttonStopSpin.css("display")||p._$buttonStopSpin.hasClass("disabled")||(a.Common.ApplicationBase.instance.emit(c.EVENT_INTERRUPT_SPIN),p._$buttonStopSpin.hide()):p.onButtonSpin())}),a.Common.ApplicationBase.instance.on(g.HANDLE_INIT_RESPONSE,function(){return $("#info_bar .left-info .right_text_title").text(i.getPhrase("game_title_"+f.launchVariables.gameModeType))}),$(document).on("click",function(b){"click"!=b.type||"renderer_canvas"!=b.target.id&&"banner1"!=b.target.id&&"control_panel"!=b.target.id||(f.isDesktop()?"block"==$("#cp_bet_settings_panel").css("display")&&"click"==b.type&&a.Common.ApplicationBase.instance.emit(c.EVENT_BET_PANEL_CLOSE):"visible"!=$("#mobileBetPanel").css("visibility")&&"visible"!=$("#green-base").css("visibility")||($("#green-base").css("visibility","hidden"),f.isMobile()&&p._$div.css("pointer-events","none"),p._$buttonWrapper.show(),p._$betbtnWrapper.show(),p._$buttonSettings.show(),p.removeBet(),q.current.getGameConfig().isAutoPlayDisplay()&&p._$autoWrapper.show(),$(document).find("#menu_mobile").removeClass("disabled"),j.globalSounds.playCue("GENERIC_CLICK"))),"block"==$("#cp_auto_settings_panel").css("display")&&"click"==b.type&&"button_auto_cp"!=b.target.id&&"block"==$("#cp_auto_settings_panel").css("display")&&"click"==b.type&&""!=b.target.id&&"cp_auto_loss_limit"!=b.target.id&&"cp_auto_single_win_limit"!=b.target.id&&"cp_auto_total_win_limit"!=b.target.id&&"cp_auto_stop_on_any_win"!=b.target.id&&"spin_count_chooser"!=b.target.id&&"spin_count_chooser_items"!=b.target.id&&(console.log("new val",b),p.closeAllPanels(),$("#cp_auto_start_button").css("background-color","#000000"),$("#control_panel").css("background-color",""),$("#cp_auto_start_button").css("box-shadow",""),p._$paytableButton.removeClass("disabled"),p._$paytableButton.css("pointer-events","all"),p._$buttonSpin.removeClass("disabled"),p._$buttonBetSettings.css("pointer-events","all"),p._$buttonSpin.css("pointer-events","all"))}),$(document).on("click","#menu_mobile",function(b){var c=document.getElementById("green-base");f.isMobile()&&!f.isDesktop()&&$(p._$div).find(".local_time").css("z-index","100000"),j.globalSounds.playCue("Common_PopUp"),"hidden"==c.style.visibility||""==c.style.visibility?(a.Core.Environment.playVibrate(),c.style.visibility="visible",f.isMobile()&&p._$div.css("pointer-events","all"),p._$buttonWrapper.hide(),p._$betbtnWrapper.hide(),p._$buttonSettings.hide(),q.current.getGameConfig().isAutoPlayDisplay()&&p._$autoWrapper.hide(),$(document).find("#menu_mobile").removeClass("disabled"),$(document).find("#button_help").removeClass("disabled"),$("#button_home").addClass("disabled"),$("#button_home").css("pointer-events","none"),$("#button_exit_settings").css("pointer-events","all"),j.globalSounds.playCue("GENERIC_CLICK")):(c.style.visibility="hidden",$("#info_bar").css("z-index","9"),f.isMobile()&&p._$div.css("pointer-events","none"),p._$buttonWrapper.show(),p._$betbtnWrapper.show(),p._$buttonSettings.show(),q.current.getGameConfig().isAutoPlayDisplay()&&p._$autoWrapper.show(),$(document).find("#menu_mobile").removeClass("disabled"),$("#button_home").removeClass("disabled"),$("#button_home").css("pointer-events","all"),j.globalSounds.playCue("GENERIC_CLICK"))}),$(document).on("click","#gen_setting",function(){f.isMobile()&&$("#info_bar").css("z-index","9"),j.globalSounds.playCue("GENERIC_CLICK"),a.Common.Server.isPaytableVisible=!0,$("#button_bet_button").addClass("disabled"),$("#settings_general").trigger("click"),$("#checkbox_quickspin").css("pointer-events","all"),$("#checkbox_left_handed").css("pointer-events","all"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.OPTION_STATUS_CHANGED,!0),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.PAYTABLE_STATUS_CHANGED,!1),$("#settings_general").hide(),$("#settings_pays").hide(),a.Common.ApplicationBase.instance.emit(b.WinManager.STOP_SYMBOLS_ANIMATION,!0),a.Common.ApplicationBase.instance.emit(h.ON_PLAYER_PROMPT,i.getPhrase(" ")),a.Core.HTML.getPageManager("MAIN").toggleOverlay("settings")}),$(document).on("click","#history_setting",function(){f.isMobile()&&a.Common.ApplicationBase.instance.emit(g.SEND_HISTORY_REQUEST),a.Core.HTML.getPageManager("MAIN").showOverlay("settings"),$("#settings_history").trigger("click"),$("#settings_pays").hide(),$("#settings_general").hide()}),$(document).on("click","#button_help",function(b){a.Core.Environment.playVibrate(),j.globalSounds.isMuted||j.globalSounds.playCue("GENERIC_CLICK"),a.Common.Server.isPaytableVisible=!0,a.Core.HTML.getPageManager("MAIN").showOverlay("settings"),$("#settings_rules").trigger("click"),$(document).find("#button_help").addClass("disabled"),$("#button_bet_button").addClass("disabled"),f.isMobile()&&$("#info_bar").css("z-index","9"),p._$buttonSpin.addClass("disabled_settings_item"),p._$buttonSpin.css("pointer-events","none"),q.current.getGameConfig().isAutoPlayDisplay()&&p._$buttonAuto.addClass("disabled_settings_item"),$("#button_settings").addClass("disabled_settings_item"),$("#settings_rules").show(),$("#settings_general").hide(),$("#settings_pays").hide()}),$.getJSON("./package.json?v=##version##",function(a){$("#info_bar .version").text("V "+a.version),$(".right_text").text("V "+a.version)}),p._$buttonSettings=$("#menu_mobile"),p._$settingPanel=$("#green-base"),p._$paytableButton=$("#button_settings"),p.$_displayBetPanel=$(".bet_mobile"),p._$removeBetPanel=$(".close-bet"),p.$_betPanelMobile=$("#mobileBetPanel"),p._$buttonNext=$(p._$div.find(".button_next")),p._$buttonPrev=$(p._$div.find(".button_prev")),$(document).on("click","#button_home",function(){j.globalSounds.playCue("GENERIC_CLICK"),a.Core.Environment.playVibrate(),window.vex.dialog.buttons.YES.text=i.getPhrase("yes"),window.vex.dialog.buttons.NO.text=i.getPhrase("no"),window.vex.dialog.confirm({message:i.getPhrase("confirm_exit"),callback:function(b){
b&&a.Common.ApplicationBase.instance.emit(c.EVENT_QUIT_GAME)}})}),p._$paytableButton.on("click",p.onButtonSettings.bind(p)),p._$removeBetPanel.on("click",p.removeBet.bind(p)),p._$buttonSpin=$("#button_spin"),p._$betMobile=$("#dot"),p._$buttonSpin.on("click",p.onButtonSpin.bind(p)),p._$buttonbet=$("#settings_bets1"),p._$buttonbet.on("click",p.onButtonBet.bind(p)),p._$btnautoplayouter=$("#Autoplay_btn"),p._$btnautoplayouter.on("click",p.onAutoplay.bind(p)),p._$gameWrapper=$("#game_wrapper"),p._$footer=$("#footer"),p._$info_bar=$("#info_bar"),f.isDesktop()&&p._$gameWrapper.append($("#control_panel")),p._$buttonStopAutoSpin=$("#button_stop_autospin"),p._$buttonStopAutoSpin.on("click",function(){j.globalSounds.isMuted||j.globalSounds.playCue("GENERIC_CLICK"),a.Common.ApplicationBase.instance.emit(c.EVENT_INTERRUPT_SPIN),p.stopAutoSpins(),$("#info_bar").css("z-index","")}),p._$buttonStopSpin=$("#button_stop_spin"),p._$buttonStopSpin.on("click",function(){j.globalSounds.isMuted||j.globalSounds.playCue("GENERIC_CLICK"),a.Common.ApplicationBase.instance.emit(c.EVENT_INTERRUPT_SPIN),p._autoSpins?p._$buttonStopSpin.addClass("disabled"):p._$buttonStopSpin.hide()}),p._$buttonWrapper=$("#main_button_wrapper"),p._$betbtnWrapper=$("#bet_button_wrapper"),p._$autoWrapper=$("#Autoplay_button_wrapper"),p._$buttonMax=$("#button_max"),p._$buttonBuyCredit=$("#button_buy_credit"),p._$featurePanel=$("#feature_panel"),p._$panelBackground=$("#panel_background"),p._$panelBackground2=$("#panel_background2"),p._$panelBgShape=$("#panel_bg_shape"),$(document).on("click","#button_audio",function(){e.coreEvents.emit(j.EVENT_SET_MUTE,!j.globalSounds.isMuted),j.globalSounds.isMuted||j.globalSounds.playCue("GENERIC_CLICK")}),$(document).on("click","#button_audio_screen",function(){e.coreEvents.emit(j.EVENT_SET_MUTE,!j.globalSounds.isMuted),j.globalSounds.isMuted||j.globalSounds.playCue("GENERIC_CLICK")}),p._$buttonAuto=$("#button_auto_cp"),p._$buttonBet=$("#button_bet_button"),p._$buttonAuto.on("click",function(){p._$textWin.text(" "),j.globalSounds.playCue("GENERIC_CLICK"),$(".currencyData").text(a.Common.Currency.currencyCode),a.Common.ApplicationBase.instance.emit(b.WinManager.STOP_SYMBOLS_ANIMATION,!0),j.globalSounds.playCue("Common_PopUp"),"none"==p._$autoSettingsPanel.css("display")?($("#control_panel").css("background-color","#000000bd"),p._$div.css("pointer-events","all"),p.closeAllPanels(),p.autoSettingsPanel.reset(),p._$autoSettingsPanel.show(),p._$paytableButton.addClass("disabled"),p._$paytableButton.css("pointer-events","none"),p._$buttonSpin.addClass("disabled"),p._$buttonBet.addClass("disabled"),p._$buttonSettings.css("pointer-events","none"),p._$buttonBetSettings.css("pointer-events","none"),p._$buttonSpin.css("pointer-events","none"),p._$buttonBet.css("pointer-events","none"),p._$buttonPrev.addClass("disabled"),p._$buttonPrev.css("pointer-events","none"),p._$buttonNext.addClass("disabled"),p._$buttonNext.css("pointer-events","none")):($("#control_panel").css("background-color",""),p._$div.css("pointer-events","none"),p.closeAllPanels(),p._$paytableButton.removeClass("disabled"),p._$paytableButton.css("pointer-events","all"),p._$buttonSpin.removeClass("disabled"),p._$buttonBet.removeClass("disabled"),p._$buttonSettings.css("pointer-events","all"),p._$buttonBetSettings.css("pointer-events","all"),p._$buttonSpin.css("pointer-events","all"),p._$buttonBet.css("pointer-events","all"))}),$(document).on("click","#autoplay_exit",function(){p._$div.css("pointer-events","none"),j.globalSounds.playCue("GENERIC_CLICK"),p.closeAllPanels(),p._$buttonSpin.removeClass("disabled"),p._$buttonSettings.removeClass("disabled"),p._$buttonSettings.css("pointer-events","all"),p._$buttonBetSettings.css("pointer-events","all"),p._$buttonSpin.css("pointer-events","all"),p._$paytableButton.removeClass("disabled"),p._$paytableButton.css("pointer-events","all"),$("#cp_auto_start_button").css("background-color","#000000"),$("#cp_auto_start_button").css("box-shadow",""),$("#control_panel").css("background-color","")}),p._$buttonBetSettings=f.isDesktop()?$("#button_bet_button"):$(".bet_mobile"),p._$buttonBetSettings.on("click",function(){j.globalSounds.isMuted||j.globalSounds.playCue("GENERIC_CLICK");var a=f.isDesktop()?"display":"visibility";"none"==p._$betSettingsPanel.css(a)||"hidden"==p._$betSettingsPanel.css(a)?(p._$betSettingsPanel.show(),p._$buttonBetSettings.addClass("contract_icon"),"visibility"==a&&(p._$betSettingsPanel.css("visibility","visible"),f.isMobile()&&(f.isPortrait()?$("#mobileBetPanel").css("height",document.documentElement.offsetHeight/2+"px").css("left","0px").css("top","auto").css("width","100%"):$("#mobileBetPanel").css("height",p._$gameWrapper.height()/2+100+"px").css("top",(p._$gameWrapper.height()-p.$_betPanelMobile.height())/2+"px").css("width","66%").css("left",(p._$gameWrapper.width()-p.$_betPanelMobile.width())/2-1+"px"))),p._$paytableButton.addClass("disabled"),p._$buttonSpin.addClass("disabled"),p._$buttonSpin.css("pointer-events","none"),p._$paytableButton.css("pointer-events","none"),$("#Autoplay_btn").addClass("disabled"),$("#Autoplay_btn").css("pointer-events","none"),$("#button_auto_cp").addClass("disabled"),$("#button_auto_cp").css("pointer-events","none"),$("#button_home").addClass("disabled"),$("#button_home").css("pointer-events","none"),$("#menu_mobile").addClass("disabled"),$("#menu_mobile").css("pointer-events","none")):(p._$buttonBetSettings.removeClass("contract_icon"),"visibility"==a&&p._$betSettingsPanel.css("visibility","hidden"),p.closeAllPanels(),p._$paytableButton.removeClass("disabled"),p._$buttonSpin.removeClass("disabled"),p._$buttonSpin.css("pointer-events","all"),p._$paytableButton.css("pointer-events","all"),$("#Autoplay_btn").removeClass("disabled"),$("#Autoplay_btn").css("pointer-events","all"),$("#button_auto_cp").removeClass("disabled"),$("#button_auto_cp").css("pointer-events","all"),$("#button_home").removeClass("disabled"),$("#button_home").css("pointer-events","all"),$("#menu_mobile").removeClass("disabled"),$("#menu_mobile").css("pointer-events","all"))}),p._$betSettingsPanel=f.isDesktop()?$("#cp_bet_settings_panel"):$("#mobileBetPanel"),p._$autoSettingsPanel=$("#cp_auto_settings_panel"),p._$spinBackground=$("#spin_background"),p._$featureSpinsWrapper=$("#feature_spins_wrapper"),p._$scatterWrapper=$("#scatter_wrapper"),p._$extraSpinWrapper=$("#extraSpin_wrapper"),p._$freeSpinWrapper=$("#freespin_wrapper"),p._$betWrapper=$("#bet_wrapper"),p._$winWrapper=$("#win_wrapper"),p._$balanceWrapper=$("#balance_wrapper"),p._$accumulatedWrapper=$("#accumulatedWin_wrapper"),p._$uiButtons=$("#ui_buttons"),p._$textBalance=$("#cp_balance"),p._$accumulatedBalance=$("#accumulated_amount"),p._$textWin=$("#cp_win"),p._$freeSpintextWin=$("#free_spin_win"),p._$textBet=$("#cp_bet"),p._$textAutoSpins=$("#cp_autocount_label"),p._$featureSpins=$("#cp_feature_spins"),p._$extraSpin=$("#extraSpin_collect"),p._$fscollect=$("#freespin_collect"),p._$featureWin=$("#cp_feature_win"),p.onNoTouches(!0),p}return __extends(r,d),r.prototype.onResultsReady=function(){q.current.getAction()!=g.BASE||this._autoSpins&&!f.isDesktop()?this._autoSpins?q.current.getGameConfig().isSlamStopAllowed()&&(this._$buttonStopSpin.show(),this._$buttonStopSpin.css("pointer-events","all")):(this._$buttonStopSpin.fadeOut(),this._$betMobile.fadeOut()):q.current.getGameConfig().isSlamStopAllowed()&&(this._$buttonStopSpin.show(),this._$buttonStopSpin.css("pointer-events","all"))},r.prototype.onBigWinEnd=function(){this.disable(),this._$buttonWrapper.hide()},r.prototype.onReelTease=function(){this._$buttonStopSpin.hide()},r.prototype.onGetGameResults=function(){this.closeAllPanels()},r.prototype.closeAllPanels=function(){this._$betSettingsPanel.hide(),this._$autoSettingsPanel.hide(),this._$buttonBetSettings.removeClass("contract_icon"),this._$buttonBetSettings.css("pointer-events","all"),this._$buttonSpin.removeClass("disabled"),this._$buttonSpin.css("pointer-events","all"),this._$buttonBet.removeClass("disabled"),this._$buttonBet.css("pointer-events","all"),this._$buttonPrev.removeClass("disabled"),this._$buttonPrev.css("pointer-events","all"),this._$buttonNext.removeClass("disabled"),this._$buttonNext.css("pointer-events","all"),q.current.getGameConfig().isAutoPlayDisplay()&&(this._$buttonAuto.removeClass("disabled"),this._$buttonAuto.css("pointer-events","all"))},r.prototype.onUpdateFeatureDisplay=function(a){"NONE"==a.label?($("#feature_spins_wrapper").hide(),$("#cp_feature_win").hide()):($("#feature_spins_wrapper").show(),$("#cp_feature_win").show(),a.label&&(this._$featureSpinsWrapper.find(".meter_title").text(a.label),this._$scatterWrapper.find(".meter_title").text(a.label),this._$extraSpinWrapper.find(".meter_title").text(a.label),this._$freeSpinWrapper.find(".meter_title").text(a.label))),(a.spins||0==a.spins)&&(this._$featureSpins.text(a.spins),this._$fscollect.text(a.spins)),(a.extraSpin||0==a.extraSpin)&&this._$extraSpin.text(a.extraSpin),(a.win||0==a.win)&&this._$featureWin.text(k.format(a.win))},r.prototype.onNoTouches=function(a,b){a?(this._$div.css("pointer-events","none"),this.disable(),$(document).find("#button_audio").css("pointer-events","all"),$(document).find("#button_audio_screen").css("pointer-events","all")):(this._$div.css("pointer-events","none"),this.enable())},r.prototype.onGameReady=function(a){q.current.getAction()==g.BASE&&(this._$featureSpins.text(""),this._$extraSpin.text(""),this._$fscollect.text(""),this._$featureWin.text(""))},r.prototype.onGameChanged=function(a){this.onResize(),q.current.getNextAction()==g.BASE||q.current.getNextAction()==g.RE_SPIN?(this._$footer.hide(),this._$featurePanel.fadeOut(),this._$buttonWrapper.fadeIn(),this._$betWrapper.fadeIn(),this._$info_bar.removeClass("bright"),f.isDesktop()&&(this._$panelBackground.show(),this._autoSpins?(q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.hide(),this._$buttonStopAutoSpin.show(),this._$textAutoSpins.show(),this._$panelBgShape.css("width","104%")):(q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.fadeIn(),this._$buttonStopAutoSpin.hide(),this._$textAutoSpins.hide(),this._$panelBgShape.css("width","100%")))):(this._$footer.show(),q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.show(),this.onNoTouches(!0),this._$featurePanel.fadeIn(),this._$featureSpinsWrapper.fadeIn(),this._$scatterWrapper.fadeIn(),this._$extraSpinWrapper.fadeIn(),this._$freeSpinWrapper.fadeIn(),this._$info_bar.addClass("bright"),f.isDesktop()?($("#allbutton_wapper").hide(),this._$buttonSpin.fadeOut(),this._$buttonStopAutoSpin.hide(),this._$textAutoSpins.hide(),this._$paytableButton.hide(),this._$featureSpinsWrapper.hide(),this._$panelBgShape.css("width","100%"),this._$buttonSettings.fadeOut(),q.current.getGameConfig().isAutoPlayDisplay()&&this._$autoWrapper.fadeOut()):(this._$buttonSpin.fadeOut(),this._$betbtnWrapper.hide(),this._$buttonSettings.fadeOut(),q.current.getGameConfig().isAutoPlayDisplay()&&this._$autoWrapper.fadeOut())),e.coreEvents.emit(j.EVENT_SET_MUTE,j.globalSounds.isMuted)},r.prototype.onReelsDropped=function(a){this._autoSpins>1||(this._$buttonStopSpin.hide(),this.stopAutoSpins())},r.prototype.onSettingsOpen=function(a){f.isDesktop()&&(this._$info_bar.addClass("bright"),$("div#settings").prepend($("#control_panel")),this._$autoSettingsPanel.hide(),this.onResize())},r.prototype.onSettingsClosed=function(b){this.showPanel(),f.isDesktop()?($(document).find("button_help").removeClass("disabled"),this._$buttonSettings.removeClass("disabled"),this._$buttonNext.removeClass("disabled"),this._$buttonPrev.removeClass("disabled"),q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.removeClass("disabled"),this._$buttonSpin.removeClass("disabled"),this._$info_bar.removeClass("bright"),$("div#game_wrapper").append($("#control_panel")),this.onResize()):($(document).find("button_help").removeClass("disabled"),this._$buttonSettings.removeClass("disabled"),q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.removeClass("disabled"),this._$buttonSpin.removeClass("disabled"),b.autoSpins&&"number"==typeof b.autoSpins?this._$textAutoSpins.text(b.autoSpins.toString()):this._$textAutoSpins.text(""),this._$textAutoSpins.show()),this._autoSpins=b.autoSpins,this._autoSpins?(a.Common.ApplicationBase.instance.emit(c.EVENT_AUTO_SPINS_START),a.Common.Server.isAutoplay=!0,this.onButtonSpin()):this._$textAutoSpins.hide()},r.prototype.onContinueGame=function(b){var d=this;(q.current.getAction()==g.BASE||q.current.getAction()==g.RE_SPIN||!a.Common.Server.stopContinueCallRespin&&q.current.getNextAction()==g.RE_SPIN)&&("number"!=typeof this._autoSpins?(a.Common.ApplicationBase.instance.emit(c.EVENT_AUTO_SPIN,this._autoSpins),this.onButtonSpin(),this.onPlayerPrompt(i.getPhrase("n_autospins_remaining",{spins:this._autoSpins})),this._$textAutoSpins.text("")):this._autoSpins>0?this._autoSpins?("RE_SPIN"!=q.current.getNextAction()&&(--this._autoSpins,this._$textAutoSpins.text(this._autoSpins)),a.Core.Time.juggler.setTimeout(function(){a.Common.ApplicationBase.instance.emit(c.EVENT_AUTO_SPIN,d._autoSpins),0!=d._autoSpins&&(d._autoSpins<=5&&a.Core.Environment.playVibrate(),a.Core.Time.juggler.setTimeout(function(){d.onButtonSpin()},100)),d.onPlayerPrompt(i.getPhrase("n_autospins_remaining",{spins:d._autoSpins})),0==d._autoSpins&&(d.enable(),d._$buttonSpin.css("pointer-events","all"),d._$buttonSpin.fadeIn(),d.stopAutoSpins(),d._$buttonStopSpin.removeClass("disabled"),a.Common.ApplicationBase.instance.emit(c.EVENT_AUTO_SPINS_END))},750)):(this._$buttonSpin.fadeIn(),this.stopAutoSpins(),q.current.getAction()==g.BASE&&a.Core.Time.juggler.setTimeout(function(){d.enable()},750),this._$buttonSpin.css("pointer-events","all"),a.Common.ApplicationBase.instance.emit(c.EVENT_AUTO_SPINS_END)):q.current.getNextAction()!=g.RE_SPIN||q.current.isBrokenGameSate()?(this._$buttonStopSpin.hide(),q.current.getNextAction()==g.BASE&&this._$textBalance.text(k.format(q.current.getBalance()))):a.Core.Time.juggler.setTimeout(this.startSpin.bind(this),1500))},r.prototype.stopAutoSpinsukgc=function(){this.stopAutoSpins()},r.prototype.stopAutoSpins=function(){a.Common.ApplicationBase.instance.emit(c.EVENT_AUTO_SPINS_END),this._autoSpins=0,a.Common.Server.isAutoplay=!1,m.reset(),this._$textAutoSpins.hide(),this._$buttonStopAutoSpin.hide(),this._$div.css("pointer-events","none"),m.reset(),f.isMobile()&&$("#info_bar").css("z-index","9"),f.isDesktop()&&(this._$buttonStopSpin.hide(),q.current.getGameConfig().isAutoPlayDisplay()&&(this._$buttonAuto.show(),this._$buttonStopAutoSpin.hide()),this._$panelBgShape.css("width","100%"))},r.prototype.onButtonSpin=function(b){j.globalSounds.stopCue("TickUp_Sound"),this.closeAllPanels(),f.isDesktop()&&($("#cp_auto_start_button").css("background-color","#000000"),$("#cp_auto_start_button").css("box-shadow",""),$("#control_panel").css("background-color","")),this._juggler.purge(),this._$winWrapper.css("visibility","visible"),q.current.getNextAction()===g.BASE&&(this._$textWin.fadeOut(),this._$textWin.text(" ")),this._autoSpins||m.reset(),this._$buttonSpin.css("pointer-events","none"),f.isMobile()?a.Core.Time.juggler.setTimeout(this.startSpin.bind(this),250):this.startSpin()},r.prototype.onButtonBet=function(b){j.globalSounds.isMuted||j.globalSounds.playCue("GENERIC_CLICK"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_BET_EVENT_OUTER)},r.prototype.onAutoplay=function(b){a.Core.Environment.playVibrate(),j.globalSounds.playCue("Common_PopUp"),$(".keypad_currency").text(a.Common.Currency.currencyCode),$(".currencyData").text(a.Common.Currency.currencyCode),$("#info_bar").css("z-index","9"),j.globalSounds.isMuted||j.globalSounds.playCue("GENERIC_CLICK"),$("#autoplayStartButton").css("pointer-events","all"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_AUTOPLAY_EVENT_OUTER)},r.prototype.startSpin=function(){q.current&&(q.current.getBalance()>=n.getTotalBetCash()?(q.current.getNextAction()!=g.RE_SPIN&&a.Common.ApplicationBase.instance.emit(g.SEND_ROUND_START),a.Common.ApplicationBase.instance.emit(h.ON_GET_GAME_RESULTS,{bet:n.currentBetLevel})):a.Common.ApplicationBase.instance.emit(m.INSUFFICIENT_FUND,i.getPhrase("err_insufficient_funds"))),this._autoSpins?("number"!=typeof this._autoSpins?this._$textAutoSpins.text(""):this._$textAutoSpins.text(this._autoSpins-1),this._$textAutoSpins.show(),q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.hide(),this._$buttonStopAutoSpin.show(),this._$buttonStopSpin.removeClass("disabled"),this._$panelBgShape.css("width","104%"),f.isDesktop()?(q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.hide(),this._$buttonStopAutoSpin.show(),this._$buttonStopSpin.removeClass("disabled"),this._$panelBgShape.css("width","104%")):(this._$buttonStopAutoSpin.fadeIn(),this._$buttonStopAutoSpin.show(),this._$buttonStopSpin.removeClass("disabled"))):f.isDesktop()?(q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.show(),this._$buttonStopAutoSpin.hide(),this._$panelBgShape.css("width","100%")):this._$buttonStopAutoSpin.fadeOut()},r.prototype.updateBalance=function(a){this._$textBalance.text(k.format(a)),this._$accumulatedWrapper.css("visibility","hidden"),q.current.getGameConfig().isSweepStakeGame()&&(this._$accumulatedWrapper.css("visibility","visible"),this._$accumulatedBalance.text(k.format(q.current.getAccumulatedWin())))},r.prototype.pushBalance=function(a){var b=100*Number(a);this._$textBalance.text(k.format(b))},r.prototype.updateTimeDisplay=function(){var a=l.getFormattedTime(),b=$(this._$div).find(".local_time");f.isMobile()&&f.isLandscape()?b.html('<span id="local-time-land">'+a+"</span>"):b.text(a)},r.prototype.onButtonSettings=function(){a.Core.Environment.playVibrate(),j.globalSounds.isMuted||j.globalSounds.playCue("GENERIC_CLICK"),j.globalSounds.playCue("Common_PopUp"),f.isMobile()&&!f.isDesktop()&&($(this._$div).find(".local_time").css("z-index","100000"),$("#info_bar").css("z-index","9")),f.isDesktop()?(a.Common.Server.isPaytableVisible=!0,$("#button_bet_button").addClass("disabled"),$("#button_bet_button").css("pointer-events","none"),this._$paytableButton.addClass("disabled"),this._$paytableButton.css("pointer-events","none"),$("#balance_wrapper, #bet_wrapper, #win_wrapper").css("color","gray"),$("#settings_general").trigger("click"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.OPTION_STATUS_CHANGED,!0),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.PAYTABLE_STATUS_CHANGED,!1),$("#settings_general").show(),$("#settings_pays").show(),$("#settings_rules").show(),$(document).find("#button_help").addClass("disabled"),this._$buttonSpin.addClass("disabled"),this._$buttonSettings.addClass("disabled"),q.current.getGameConfig().isAutoPlayDisplay()&&(this._$buttonAuto.addClass("disabled"),this._$buttonAuto.css("pointer-events","none")),this._$buttonBetSettings.css("pointer-events","none"),this._$buttonMax.addClass("disabled"),this._$buttonMax.css("pointer-events","none"),this._$buttonBuyCredit.addClass("disabled"),this._$buttonBuyCredit.css("pointer-events","none"),this._$buttonSpin.css("pointer-events","none"),a.Common.ApplicationBase.instance.emit(b.WinManager.STOP_SYMBOLS_ANIMATION,!0),a.Common.ApplicationBase.instance.emit(h.ON_PLAYER_PROMPT,i.getPhrase(" ")),a.Core.HTML.getPageManager("MAIN").toggleOverlay("settings"),this.disable()):(f.isMobile()&&!f.isDesktop()&&$(this._$div).find(".local_time").css("z-index","100000"),$("#settings_pays").trigger("click"),$("#settings_pays").hide(),$("#settings_general").hide(),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.OPTION_STATUS_CHANGED,!0),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.PAYTABLE_STATUS_CHANGED,!1),this._$buttonSpin.css("pointer-events","none"),a.Common.ApplicationBase.instance.emit(b.WinManager.STOP_SYMBOLS_ANIMATION,!0),a.Common.ApplicationBase.instance.emit(h.ON_PLAYER_PROMPT,i.getPhrase(" ")),a.Core.HTML.getPageManager("MAIN").toggleOverlay("settings"))},r.prototype.removeBet=function(){j.globalSounds.playCue("GENERIC_CLICK"),f.isDesktop()&&this.closeAllPanels(),this._$buttonSpin.removeClass("disabled"),this._$buttonSpin.css("pointer-events","all"),this._$buttonMax.removeClass("disabled"),this._$buttonMax.css("pointer-events","all"),this._$paytableButton.removeClass("disabled"),this._$paytableButton.css("pointer-events","all"),this._$buttonPrev.css("pointer-events","all"),this._$buttonNext.css("pointer-events","all"),this._$buttonPrev.removeClass("disabled"),this._$buttonNext.removeClass("disabled"),$("#Autoplay_btn").removeClass("disabled"),$("#menu_mobile").removeClass("disabled"),$("#Autoplay_btn").css("pointer-events","all"),$("#menu_mobile").removeClass("disabled"),$("#menu_mobile").css("pointer-events","all"),$("#mobileBetPanel").css("visibility","hidden"),$("#mobileBetPanel_background").css("visibility","hidden"),$("#button_home").removeClass("disabled"),$("#button_home").css("pointer-events","all"),$("#menu_mobile").removeClass("disabled"),$("#menu_mobile").css("pointer-events","all")},r.prototype.onDisplayWin=function(){var b=this,c=1;if(this._autoSpins&&(c=.25),q.current.getTotalWin()>0){var d=q.current.getGameRoundWin()-q.current.getTotalWin();j.globalSounds.playCue("TickUp_Sound"),this._$textWin.show(),this._$textWin.css("display","block"),this._$winWrapper.css("visibility","visible"),this._$textWin.addClass("win_update_throb"),q.current.getAction()===g.BASE?this._$textWin.text(""):q.current.getAction()===g.FREE_SPINS&&this._$freeSpintextWin.addClass("win_update_throb");var e={win:d};TweenLite.to(e,c,{win:q.current.getGameRoundWin(),onUpdate:function(){b._$textWin.text(k.format(e.win)),q.current.getAction()==g.FREE_SPINS&&b._$freeSpintextWin.text(k.format(e.win))},onComplete:function(){b._$textWin.removeClass("win_update_throb"),b.updateBalance(q.current.getBalance()),j.globalSounds.stopCue("TickUp_Sound"),j.globalSounds.playCue("TickUp_End"),q.current.isMaxWinCapped()&&a.Common.ApplicationBase.instance.emit(m.EVENT_CHECK_MAX_CAP)}})}},r.prototype.hasValue=function(a,b){return a.hasOwnProperty(b)},r.prototype.onPlayerPrompt=function(a){var b=$(this._$div).find(".prompt");b.html(a),b.show()},r.prototype.disable=function(){g.isIdleMode=!1,this._$buttonSettings.addClass("disabled"),$(document).find("#button_help").addClass("disabled"),this._$buttonNext.addClass("disabled"),this._$buttonPrev.addClass("disabled"),$(document).find("#button_home").addClass("disabled"),$(document).find("#button_home").css("pointer-events","none"),this._$buttonBet.addClass("disabled"),this._$buttonBet.css("pointer-events","none"),q.current&&q.current.getGameConfig().isAutoPlayDisplay()&&(this._$buttonAuto.addClass("disabled"),this._$buttonAuto.css("pointer-events","none")),this._$buttonSpin.addClass("disabled"),this._$buttonSpin.css("pointer-events","none"),this._$buttonMax.addClass("disabled"),this._$buttonMax.css("pointer-events","none"),this._$buttonBuyCredit.addClass("disabled"),this.$_displayBetPanel.addClass("disabled"),this.$_displayBetPanel.css("pointer-events","none"),this._$buttonBuyCredit.css("pointer-events","none"),this._$betbtnWrapper.css("pointer-events","none"),this._$buttonBetSettings.css("pointer-events","none"),this._$paytableButton.css("pointer-events","none"),this._$buttonSettings.css("pointer-events","none"),this._$btnautoplayouter.addClass("disabled"),this._$btnautoplayouter.css("pointer-events","none"),this._$paytableButton.addClass("disabled"),this._$buttonPrev.addClass("disabled"),this._$buttonNext.addClass("disabled"),this._$buttonNext.css("pointer-events","none"),this._$buttonPrev.css("pointer-events","none")},r.prototype.enableButtonAutoSpins=function(){$("#main_button_wrapper").show(),q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.removeClass("disabled")},r.prototype.enable=function(b){this._$buttonBet.css("pointer-events","all"),this._$buttonBet.removeClass("disabled"),this._$buttonBetSettings.css("pointer-events","all"),this._$buttonSpin.fadeIn(),this._$buttonMax.removeClass("disabled"),this._$buttonMax.css("pointer-events","all"),this._$buttonBuyCredit.removeClass("disabled"),this._$buttonBuyCredit.css("pointer-events","all"),this._autoSpins||(this._$buttonSpin.removeClass("disabled"),this._$buttonSpin.css("pointer-events","all"),this._$paytableButton.removeClass("disabled"),this._$paytableButton.css("pointer-events","all"),this._$buttonSettings.css("pointer-events","all"),this._$buttonSettings.removeClass("disabled")),this._$betbtnWrapper.removeClass("disabled"),this._$betbtnWrapper.css("pointer-events","all"),this.$_displayBetPanel.removeClass("disabled"),this.$_displayBetPanel.css("pointer-events","all"),$(document).find("#button_help").removeClass("disabled"),$(document).find("#button_home").removeClass("disabled"),$(document).find("#button_home").css("pointer-events","all"),a.Slots.SettingsPages.BettingSetup.currentBetLevel===a.Slots.SettingsPages.BettingSetup.betLevels[a.Slots.SettingsPages.BettingSetup.betLevels.length-1]?(this._$buttonPrev.removeClass("disabled"),this._$buttonNext.addClass("disabled")):a.Slots.SettingsPages.BettingSetup.currentBetLevel===a.Slots.SettingsPages.BettingSetup.betLevels[0]?(this._$buttonPrev.addClass("disabled"),this._$buttonNext.removeClass("disabled")):(this._$buttonNext.removeClass("disabled"),this._$buttonPrev.removeClass("disabled")),q.current.getGameConfig().isAutoPlayDisplay()?(this._$buttonAuto.removeClass("disabled"),this._$autoWrapper.removeClass("disabled"),this._$buttonAuto.show(),this._$btnautoplayouter.removeClass("disabled")):this._$buttonAuto.hide(),f.isMobile()&&(this._$btnautoplayouter.removeClass("disabled"),this._$btnautoplayouter.css("pointer-events","all")),this._$buttonSpin.removeClass("disabled"),this._$buttonSpin.css("pointer-events","all"),this._$buttonBetSettings.removeClass("disabled"),this._$buttonSpin.fadeIn(),q.current.getGameConfig().isAutoPlayDisplay()&&(this._$buttonAuto.removeClass("disabled"),this._$buttonAuto.css("pointer-events","all")),this._$buttonSettings.css("pointer-events","all"),a.Slots.SettingsPages.BettingSetup.currentBetLevel===a.Slots.SettingsPages.BettingSetup.betLevels[a.Slots.SettingsPages.BettingSetup.betLevels.length-1]?(this._$buttonPrev.removeClass("disabled"),this._$buttonNext.addClass("disabled"),this._$buttonNext.css("pointer-events","none"),this._$buttonPrev.css("pointer-events","all"),this._$buttonBet.css("pointer-events","none"),this._$buttonBet.addClass("disabled")):a.Slots.SettingsPages.BettingSetup.currentBetLevel===a.Slots.SettingsPages.BettingSetup.betLevels[0]?(this._$buttonPrev.addClass("disabled"),this._$buttonNext.removeClass("disabled"),this._$buttonNext.css("pointer-events","all"),this._$buttonPrev.css("pointer-events","none"),this._$buttonBet.css("pointer-events","all"),this._$buttonBet.removeClass("disabled")):(this._$buttonNext.removeClass("disabled"),this._$buttonPrev.removeClass("disabled"),this._$buttonNext.css("pointer-events","all"),this._$buttonPrev.css("pointer-events","all"),this._$buttonBet.css("pointer-events","all"),this._$buttonBet.removeClass("disabled")),g.isIdleMode=!0},r.prototype.hidePanelInBrokenPopUp=function(){this._$panelBackground.hide()},r.prototype.showPanelInBrokenPopUp=function(){this._$panelBackground.show()},r.prototype.hidePanel=function(){this._$div.hide(),$("#panel_background").hide(),$("#info_bar").hide(),f.isMobile()&&$("#control_panel").css("z-index","-1")},r.prototype.divpointer=function(){this._$div.css("pointer-events","none")},r.prototype.showPanel=function(){this._$div.fadeIn(),$("#panel_background").show(),$("#info_bar").show(),f.isMobile()&&$("#control_panel").css("z-index","0")},r.prototype.onAnyWinAlarm=function(){window.vex.dialog.buttons.YES.text=i.getPhrase("ok_caps"),window.vex.dialog.alert(i.getPhrase("auto_play_limit_any_win")),this.stopAutoSpins()},r.prototype.onFeatureStopAlarm=function(){window.vex.dialog.buttons.YES.text=i.getPhrase("ok_caps"),window.vex.dialog.alert(i.getPhrase("auto_play_feature_stop")),this.stopAutoSpins(),f.isDesktop&&q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.hide()},r.prototype.onSingleWinAlarm=function(a){window.vex.dialog.buttons.YES.text=i.getPhrase("ok_caps"),window.vex.dialog.alert(i.getPhrase("auto_play_limit_single_win")),this.stopAutoSpins()},r.prototype.onTotalWinAlarm=function(a){window.vex.dialog.buttons.YES.text=i.getPhrase("ok_caps"),window.vex.dialog.alert(i.getPhrase("auto_play_limit_total_win")),this.stopAutoSpins()},r.prototype.onCashLossAlarm=function(a){window.vex.dialog.buttons.YES.text=i.getPhrase("ok_caps"),window.vex.dialog.alert(i.getPhrase("auto_play_limit_loss")),this.stopAutoSpins()},r.prototype.onRealityCheck=function(a){window.vex.dialog.buttons.YES.text=i.getPhrase("continue_caps"),window.vex.dialog.buttons.NO.text=i.getPhrase("home_caps"),window.vex.dialog.confirm({message:i.getPhrase("reality_check_msg",{minutes:p(a)}),callback:function(a){}})},r.prototype.paytableShowHidePanel=function(a){"visible"==a?(f.isMobile()&&this._$div.css("pointer-events","all"),this._$buttonWrapper.hide(),this._$betbtnWrapper.hide(),q.current.getGameConfig().isAutoPlayDisplay()&&this._$autoWrapper.hide(),$(document).find("#menu_mobile").removeClass("disabled")):"hidden"==a?(f.isMobile()&&this._$div.css("pointer-events","none"),this._$buttonWrapper.show(),this._$betbtnWrapper.show(),this._$buttonSettings.show(),q.current.getGameConfig().isAutoPlayDisplay()&&this._$autoWrapper.show(),$(document).find("#menu_mobile").removeClass("disabled")):"close"==a&&(f.isMobile()&&this._$div.css("pointer-events","none"),this._$buttonWrapper.show(),this._$betbtnWrapper.show(),this._$buttonSettings.show(),q.current.getGameConfig().isAutoPlayDisplay()&&this._$autoWrapper.show(),f.isDesktop()||(document.getElementById("green-base").style.visibility="hidden"))},r.prototype.onMaxCap=function(){this._autoSpins&&this.stopAutoSpins(),window.vex.dialog.buttons.YES.text=i.getPhrase("ok_caps"),window.vex.dialog.alert({message:i.getPhrase("msg_congratulation").concat(i.getPhrase("err_max_cap").replace("winvalue",""+k.format(q.current.getCappedWinAmount()))),callback:function(a){}})},r.prototype.oninsufficientFund=function(b){var d=this;window.vex.dialog.buttons.YES.text=i.getPhrase("continue_caps"),window.vex.dialog.buttons.NO.text=i.getPhrase("deposit"),window.vex.dialog.buttons.HOME.text=i.getPhrase("home_caps"),this.stopAutoSpins(),a.Common.ApplicationBase.instance.emit(c.EVENT_STOP_SPIN),this._$buttonStopSpin.hide(),window.vex.dialog.confirm({message:b,callback:function(b){if($(".vex-dialog-button").css("cssText","display:none!important"),1==b){var f=(new Date).getTime();e.coreEvents.emit(a.Core.Events.ON_APP_GET_FOCUS,null,f),a.Common.ApplicationBase.instance.emit(h.ON_PLAYER_PROMPT,i.getPhrase("click_spin_to_start")),a.Common.ApplicationBase.instance.emit(h.ON_PLAYER_PROMPT_WIN,""),d._$buttonStopSpin.hide(),d.enable()}else"home"==b&&a.Common.ApplicationBase.instance.emit(c.EVENT_QUIT_GAME)}}),$(".vex-dialog-button").css("cssText","display:none"),$(".vex-first").css("cssText","display:block!important"),f.launchVariables.homeUrl?$(".vex-last").css("cssText","display:block!important"):$(".vex-last").css("cssText","display:none!important")},r.prototype.onBrokenAlarm=function(){q.current.getAction()==g.BASE?a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.UPDATE_BALACE,q.current.getBalance()-q.current.getTotalWin()):a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.UPDATE_BALACE,q.current.getBalance()),q.current.getAction()!=g.RE_SPIN&&q.current.getAction()!=g.BASE&&q.current.getNextAction()==g.BASE?a.Common.ApplicationBase.instance.emit(a.Slots.WinManager.EVENT_SHOW_BROKEN_FEATURE_WIN_SUMMARY):(window.vex.dialog.buttons.YES.text=i.getPhrase("ok_caps"),window.vex.dialog.alert({message:i.getPhrase("msg_replay"),callback:function(b){
1!=b||q.current.getAction().includes(g.BONUS)||a.Common.ApplicationBase.instance.emit(h.ON_GET_GAME_RESULTS,{bet:n.currentBetLevel,isBroken:!0})}}))},r.prototype.onBetNotAvailable=function(){a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.UPDATE_BALACE,q.current.getBalance()),window.vex.dialog.buttons.YES.text=i.getPhrase("reload_caps"),window.vex.dialog.alert({message:i.getPhrase("bet_not_available"),callback:function(b){1==b&&a.Common.ApplicationBase.instance.emit(a.Common.Server.SEND_RELOAD_REQUEST)}})},r.prototype.onResponsibleGamingError=function(a){window.vex.dialog.buttons.YES.text=i.getPhrase("home_caps"),window.vex.dialog.buttons.NO.text=i.getPhrase("deposit"),this.stopAutoSpins(),this._$buttonStopSpin.hide(),window.vex.dialog.confirm({message:a,callback:function(a){}})},r.prototype.onResize=function(){if(this._$gameWrapper)if(this.updateTimeDisplay(),f.isDesktop()||(f.isLandscape()?this._$gameWrapper.append($("#control_panel")):$("body").append($("#control_panel"))),this._$div=$("#control_panel"),f.isMobile()&&this._$spinBackground)if(f.isPortrait())this._$panelBackground.css("width",this._$gameWrapper.width()),this._$spinBackground.css("top",this._$panelBackground.position().top),this._$spinBackground.css("height",this._$footer.position().top-this._$spinBackground.position().top+65+"px"),this._$buttonWrapper.css("left",this._$spinBackground.width()/1.83+"px"),this._$buttonWrapper.css("top",this._$panelBackground.position().top+this._$spinBackground.height()/2+10+"px"),this._$buttonWrapper.css("width","30vw"),this._$buttonWrapper.css("height","30vw"),this._$autoWrapper.css("width","20vw"),this._$autoWrapper.css("height","20vw"),$("#menu_mobile_button_wrapper").css("width","20vw"),$("#menu_mobile_button_wrapper").css("height","20vw"),this._$btnautoplayouter.css("font-size","5vw"),this.$_displayBetPanel.css("font-size","5vw"),this._$betbtnWrapper.css("top",this._$panelBackground.position().top+this._$spinBackground.height()/1.9+50+"px"),this._$autoWrapper.css("top",this._$panelBackground.position().top+this._$spinBackground.height()/1.9+50+"px"),this._isLeftHanded&&(this._$betbtnWrapper.css("left",""),this._$autoWrapper.css("left","72.1%")),$("#menu_mobile_button_wrapper").css("top",this._$panelBackground.position().top+this._$spinBackground.height()/1.9+50+"px"),this.$_betPanelMobile.css("height",document.documentElement.offsetHeight/2+"px").css("left","0px").css("top","auto").css("width","100%"),this._$settingPanel.css("height",document.documentElement.offsetHeight/4+"px").css("width","100%").css("top","auto").css("left","0"),this._$footer.append(this._$uiButtons);else{this._$panelBackground.css("bottom",""),this._$panelBackground.css("bottom",0),this._$buttonSettings.css("left",this._$gameWrapper.width()/1.155+12.4+"px"),this._$buttonSettings.css("bottom",this._$gameWrapper.height()/3.5-36+"px"),this._$panelBackground.css("width",this._$gameWrapper.width()),this._$panelBackground.append(this._$uiButtons),this._$buttonWrapper.css("left",this._$gameWrapper.width()/1.155-2+"px"),this._$buttonWrapper.css("top",this._$gameWrapper.height()/3.08+35+"px"),this._$buttonWrapper.css("width","22vh"),this._$buttonWrapper.css("height","22vh"),this._$autoWrapper.css("left",this._$gameWrapper.width()/1.2+33.2+"px"),this._$autoWrapper.css("top",this._$gameWrapper.height()/2.8-40.5+"px"),this._$autoWrapper.css("width","14vh"),this._$autoWrapper.css("height","14vh"),this._$betbtnWrapper.css("left",this._$gameWrapper.width()/1.2+44+"px"),this._$betbtnWrapper.css("top",this._$gameWrapper.height()/10+40+"px"),"iOS"!==a.Core.Environment.getPlatformData().os.family&&this._$gameWrapper.width()<620?this._$btnautoplayouter.css("font-size","2.2vw"):"iOS"!==a.Core.Environment.getPlatformData().os.family&&f.isMobile()?this._$btnautoplayouter.css("font-size","20px"):(navigator.userAgent.match(/Version\/[\d\. ]+.*Safari/),this._$btnautoplayouter.css("font-size","17px"));/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor);this._isLeftHanded?(this._$buttonWrapper.css("left",this._$gameWrapper.width()/(this._$gameWrapper.width()-6)+5+"px"),this._$autoWrapper.css("left",this._$gameWrapper.width()/this._$gameWrapper.width()+17+"px"),this._$buttonSettings.css("left",this._$gameWrapper.width()/this._$gameWrapper.width()+17+"px"),this._$betbtnWrapper.css("left",this._$gameWrapper.width()/this._$gameWrapper.width()+17+"px"),"iOS"!==a.Core.Environment.getPlatformData().os.family&&f.isMobile()||navigator.userAgent.match(/Version\/[\d\. ]+.*Safari/)||this._$buttonWrapper.css("right","")):(this._$buttonWrapper.css("right",""),this._$autoWrapper.css("right","")),this._$gameWrapper.width()<540?this.$_betPanelMobile.css("height",this._$gameWrapper.height()/2+100+"px").css("top",(this._$gameWrapper.height()-this.$_betPanelMobile.height())/2-15+"px").css("width","74%").css("left",(this._$gameWrapper.width()-this.$_betPanelMobile.width())/2-10+"px"):this.$_betPanelMobile.css("height",this._$gameWrapper.height()/2+100+"px").css("top",(this._$gameWrapper.height()-this.$_betPanelMobile.height())/2+"px").css("width","66%").css("left",(this._$gameWrapper.width()-this.$_betPanelMobile.width())/2-1+"px"),this._$settingPanel.css("width",this._$gameWrapper.width()/1.55+56+"px").css("height",this._$gameWrapper.height()/1.465+"px").css("top",this._$gameWrapper.height()/5.649+"px").css("left",(this._$gameWrapper.width()-this._$settingPanel.width())/4.1+35+"px")}else if(f.isDesktop()){var b=this._$gameWrapper.height()/720,c={transform:"scale("+b+")","transform-origin":"top left",width:"1280px",height:"720px"};a.Slots.SettingsPages.SliderWidget.scaleFactor=b;var d=$("div#settings");d&&"block"==d.css("display")?(this._$div.attr("style",""),this._$div.css({width:c.width,height:c.height}),d.css(__assign({},this._$gameWrapper.css(["height","width","margin-left","position","left","top","margin-top"]),c))):this._$div.css(c)}},r.prototype.playIdleAnimation=function(a){var b=this;switch(a){case 0:this._$buttonSpin.css("animation","1s rotate linear");break;case 1:this._$buttonPrev.css("animation","1s rotate linear"),this._$buttonNext.css("animation","1s rotate linear");break;default:this._$paytableButton.css("animation","1s rotate linear"),this._$buttonSettings.css("animation","1s rotate linear")}setTimeout(function(){b._$buttonSpin.css("animation",""),b._$buttonPrev.css("animation",""),b._$buttonNext.css("animation",""),b._$buttonSettings.css("animation",""),b._$paytableButton.css("animation","")},1e3)},r}(d);c.ControlPanel=t;var u=function(){function b(c){var d=this;this.AUTO_SPIN_VALUES=[],this._state=x.COLLAPSED,this.changeAutoPlayButtonState=function(b){(0==(d._spinMultiselect.value()+"").localeCompare("NoLimit")||d._spinMultiselect.value()>0)&&!q.current.getGameConfig().isUKGC()?(d._$startButton.removeClass("disabled"),b&&(d._$startButton.css("background-color",f.defaultSettings.auto_Start_Button_Enable_Color),d._$startButton.css("box-shadow",f.defaultSettings.auto_Start_Button_Shadow)),d._$lossLimit.removeClass("flash-item")):!(d._spinMultiselect.value()+"").localeCompare("NoLimit")&&parseFloat(d._$lossLimit[0].value)>=a.Slots.SettingsPages.BettingSetup.getTotalBetCash()?(d._$startButton.removeClass("disabled"),d._$startButton.css("background-color",f.defaultSettings.auto_Start_Button_Enable_Color),d._$startButton.css("box-shadow",f.defaultSettings.auto_Start_Button_Shadow),d._$lossLimit.removeClass("flash-item")):!(d._spinMultiselect.value()+"").localeCompare("")&&parseFloat(d._$lossLimit[0].value)>=a.Slots.SettingsPages.BettingSetup.getTotalBetCash()/100?(d._$startButton.removeClass("disabled"),d._$startButton.css("background-color",f.defaultSettings.auto_Start_Button_Enable_Color),d._$startButton.css("box-shadow",f.defaultSettings.auto_Start_Button_Shadow),d._$lossLimit.removeClass("flash-item")):d._$startButton.addClass("disabled"),d._noOfAutoPlaySpin=d._spinMultiselect.value().toString()},this.updateToggleButton=function(a){if(f.isDesktop()){var b=d._$toggleContainer.html(),c=i.getPhrase(d.isChecked?"settings_autoplay_advanced":"settings_autoplay_basic"),e=i.getPhrase(d.isChecked?"settings_autoplay_basic":"settings_autoplay_advanced");d._$toggleContainer.html(b.replace(e,c)+(a?c:"")),d.isChecked?$("#cp_auto_toggle_button").removeClass("down"):$("#cp_auto_toggle_button").addClass("down")}},this._$div=$(c),this.AUTO_SPIN_VALUES=q.current.getGameConfig().getAutoPlayValues(),this._$singleWinLimit=$("#cp_auto_single_win_limit"),this._$totalWinLimit=$("#cp_auto_total_win_limit"),this._$lossLimit=$("#cp_auto_loss_limit"),this._$stopOnFeatureWin=$("#cp_auto_stop_on_feature_win"),this._$stopOnAnyWin=$("#cp_auto_stop_on_any_win"),this._$startButton=$("#cp_auto_start_button"),this._$toggleContainer=$(".cp_auto_toggle_container"),this._$advancedInputs=$("#cp_auto_advanced"),q.current.getGameConfig().isAutoPlayDisplay()||($("#button_auto_cp").css("display","none"),$("#Autoplay_button_wrapper").css("display","none"));var e=q.current.getGameConfig().isUKGC();e&&(this._state=x.EXPANDED,this.updateToggleButton(!0)),this._state==x.COLLAPSED?(this._$advancedInputs.css("height","0"),$("#cp_auto_toggle_button").addClass("down")):this._$toggleContainer.on("click",function(a){a.stopImmediatePropagation(),a.preventDefault(),d._state=d.isChecked?x.EXPANDED:x.COLLAPSED,d._$advancedInputs.css("height",d.isChecked?"0":""),d.updateToggleButton()}),this._$singleWinLimit.attr("placeholder","0"),this._$totalWinLimit.attr("placeholder","0"),this._$lossLimit.attr("placeholder","0"),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_ANY_WIN,this.changeAutoPlayButtonState,this),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_FEATURE_WIN_CHANGE,this.changeAutoPlayButtonState,this),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_AUTO_SPIN_COUNT_CHANGE,this.changeAutoPlayButtonState,this),this._singleWinLimit=new z(this._$singleWinLimit,function(b){d.changeAutoPlayButtonState(),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_SINGLE_WIN_LIMIT_CHANGE,b)}),this._totalWinLimit=new z(this._$totalWinLimit,function(b){d.changeAutoPlayButtonState(),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_TOTAL_WIN_LIMIT_CHANGE,b)}),this._lossLimit=new z(this._$lossLimit,function(c){b._lossLimitValue=isNaN(c)?0:c,(Number(d._noOfAutoPlaySpin)>0||""==d._noOfAutoPlaySpin)&&(c>=a.Slots.SettingsPages.BettingSetup.getTotalBetCash()/100?(d._$lossLimit.removeClass("flash-item"),d.changeAutoPlayButtonState(),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_LOSS_LIMIT_CHANGE,c),d._$startButton.removeClass("disabled"),d._$lossLimit.removeClass("flash-item")):isNaN(c)||c<a.Slots.SettingsPages.BettingSetup.getTotalBetCash()/100?(d._$startButton.addClass("disabled"),d._$lossLimit.addClass("flash-item")):d._$lossLimit.addClass("flash-item"))}),this._spinMultiselect=new y($("#spin_count_chooser"),this.AUTO_SPIN_VALUES,function(b){b>0?parseFloat(d._$lossLimit.val())>0||!e?d._$lossLimit.removeClass("flash-item"):(d._$lossLimit.addClass("flash-item"),d._$startButton.addClass("disabled")):"NoLimit"==b?parseFloat(d._$lossLimit.val())>0||!e?d._$lossLimit.removeClass("flash-item"):(d._$lossLimit.addClass("flash-item"),d._$startButton.addClass("disabled")):d._$startButton.addClass("disabled"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_AUTO_SPIN_COUNT_CHANGE,!0)}),this._$stopOnAnyWin.on("click",function(b){var c=this.checked;m.setWinStop(c),j.globalSounds.playCue("GENERIC_CLICK"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_ANY_WIN,c)}),this._$startButton.on("click",function(b){a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_SETTINGS_CLOSED,{autoSpins:d._spinMultiselect.value()}),j.globalSounds.playCue("GENERIC_CLICK")})}return Object.defineProperty(b.prototype,"isChecked",{get:function(){return this._state==x.COLLAPSED},enumerable:!0,configurable:!0}),b.prototype.reset=function(){this._$lossLimit.removeClass("flash-item"),this._spinMultiselect.reset(),this._lossLimit.reset(),this._singleWinLimit.reset(),this._totalWinLimit.reset(),this._$stopOnAnyWin.attr("checked",!1),this._$stopOnFeatureWin.attr("checked",!1)},b}();c.AutoSettingsPanel=u;var v=function(){function a(a){var b=this;$(document).on("mouseover",".winLInfoRow",function(a){return b.winHover(a,!0)}),$(document).on("mouseout",".winLInfoRow",function(a){return b.winHover(a,!1)}),this.showHistoryMainTable(a),this.showSpinInfo(a)}return a.prototype.showHistoryMainTable=function(a){var b=new Array;b.push([""+i.getPhrase("time"),""+i.getPhrase("info"),""+i.getPhrase("bet"),""+i.getPhrase("win"),""+i.getPhrase("closing balance"),""+i.getPhrase("currency")]);for(var c="",d=0;d<b.length;d++){for(var e="",f=0;f<b[d].length;f++)e+='<div class="hh">'+b[d][f]+"</div>";c+='<div class="rr">'+e+"</div>"}for(var g=new Array,h=0;h<a.length;h++)g.push([a[h].startTime,this.getimage(),a[h].totalBet,a[h].totalWin,a[h].balanceAfter,a[h].currency,a[h].gameRoundId]);for(var j="",k=0;k<g.length;k++){for(var l="",m=0;m<g[k].length-1;m++){l+='<div id="cell-'+(k+""+m)+'" class="cellData">'+g[k][m]+"</div>"}j+='<div id="'+g[k][g[k].length-1]+'" class="spinInfo">'+l+"</div>"}var n='<div class="spinData">'+j+"</div>";$("#historyData").append(c),$("#historyData").append(n)},a.prototype.showSpinInfo=function(a){console.log("hello"),$(".spinData .spinInfo").on("click",function(a){var b;$("#history_table_wrapper")[0].children.length>0&&$(".tableOuter").remove(),f.isMobile()&&!f.isDesktop()&&$("#settings_pages").css("overflow-y","hidden");var c=new URLSearchParams(window.location.search),d=c.get("hostname"),e=a.currentTarget.id,g="https://"+d+"/round-history/"+e+"?&color=rgb(205,0,61)";f.isDesktop()&&!f.isMobile()?b='<div class="spinDatas"><iframe id="viewPort" scrolling="auto" class="scrollable" src = "'+g+'" style="margin-top: 0%; margin-left: 5%;width: 94%;height:500px;overflow: hidden;border: none;"></iframe></div>':!f.isDesktop()&&f.isLandscape()?b='<div class="spinDatas"><iframe id="viewPort" scrolling="auto" class="scrollable" src = "'+g+'" style="margin-top: 0%; margin-left: 5%;width: 94%;overflow: hidden;border: none;"></iframe></div>':!f.isDesktop()&&f.isPortrait()&&(b='<div class="spinDatas"><iframe id="viewPort" scrolling="auto" class="scrollable" src = "'+g+'" style="margin-top: 0%; margin-left: 5%;width: 94%;overflow: hidden;border: none;"></iframe></div>');var h='<div class="tableOuter" ><div id="exit_btn" style="margin-left:91%;font-size:30px;cursor:pointer">X</div>'+b+"</div>";f.isDesktop()&&!f.isMobile()?$("#history_table_wrapper").append(h):$("#settings_iframe_history").append(h),$("#exit_btn").click(function(){$("#history_table_wrapper")[0].children.length>0&&$(".tableOuter").remove(),f.isMobile()&&!f.isDesktop()&&$("#settings_pages").css("overflow-y","scroll")})}),this.exitSpinInfo()},a.prototype.exitSpinInfo=function(){document.createElement("exit_btn").onclick=function(){$("#history_table_wrapper")[0].children.length>0&&$(".tableOuter").remove()}},a.prototype.getimage=function(){return'<img class="symbolInfo" src = "./assets/html/images/settings/symbols/info_icon.png" >'},a.prototype.showGrid=function(a,b){var c=(a[b].transactions[0].response.game.grid,this.transPoseGrid(a[b].transactions[0].response.game.grid));console.log(c);for(var d="",e=0,f=0;f<c.length;f++){for(var g="",h=0;h<c[f].length;h++){var i=e++;g+='<div id="symb-'+i+'" >'+this.imageConversion(c[f][h],i)+"</div>"}d+="<div class='row' id=\"rowsymb-"+f+'" >'+g+"</div>"}return'<div class="symbolGridL">'+d+"</div>"},a.prototype.createWinHeading=function(a,b){var c=new Array;c.push([""+i.getPhrase("payline"),""+i.getPhrase("symbol"),""+i.getPhrase("win")]);for(var d="",e=0;e<c.length;e++){for(var f="",g=0;g<c[e].length;g++)f+='<div class="hrr">'+c[e][g]+"</div>";d+='<div class="wHead">'+f+"</div>"}return'<div id="leftWinHead">'+d+"</div>"},a.prototype.showGridwin=function(a,b){var c=[],d="",e=a[b].transactions[0].response.game.winDetails;if(console.log("all win details",e),e.length>0){console.log("yes i a greater");for(var f="",g=0;g<e.length;g++)f=e[g].symbol,c.push([e[g].paylineId,this.convertWinSymb(f),e[g].win]),console.log("Left grid win",c);for(var h=0;h<c.length;h++){for(var i="",j=0;j<c[h].length;j++)i+='<div   class="winInfo" >'+c[h][j]+"</div>";d+='<div class="winLInfoRow" data="'+e[h].positions+'"  id="winLine-'+j+'" >'+i+"</div>"}}return'<div class="gridLWinInfo">'+d+"</div>"},a.prototype.bgClose=function(){console.log("from bg close");var a=document.createElement("button");a.id="clsBtn",a.innerHTML="X",a.onclick=function(){$("#allSpinsRecord").remove(),$("#allSpinsRecord").hide(),$(".tableOuter").show()},$(".closeBtnCont").append(a)},a.prototype.transPoseGrid=function(a){for(var b=[],c=0;c<a[0].length;c++){for(var d=[],e=0;e<a.length;e++)d.push(a[e][c]);b.push(d)}return b},a.prototype.imageConversion=function(a,b){return'<img id="symbol-img" class="symbb-'+b+'"  src = "./assets/html/images/settings/symbols/'+{WW:"W1",AA:"H1",BB:"H2",CC:"H3",DD:"M1",EE:"M2",FF:"M3",GG:"L1",HH:"L2",JJ:"L3",KK:"L4",FG:"B1"}[a]+'.png" >'},a.prototype.showTransactionTable=function(a,b){$(".tableOuter").hide();var c=new Array;c.push([""+i.getPhrase("time"),""+i.getPhrase("info"),""+i.getPhrase("bet"),""+i.getPhrase("win"),""+i.getPhrase("closing balance"),""+i.getPhrase("currency")]);for(var d="",e=0;e<c.length;e++){for(var f="",g=0;g<c[e].length;g++)f+='<div class="hh">'+c[e][g]+"</div>";d+='<div class="fgrr">'+f+"</div>"}for(var h=new Array,e=a[b].transactions.length-1;e>=0;e--)h.push([a[b].transactions[e].time,this.getimage(),a[b].transactions[e].response.game.totalBet,a[b].transactions[e].response.game.totalWin,a[b].transactions[e].response.balance,a[b].currency]);for(var j=h.length-1,k="",l=0;l<h.length;l++){for(var m="",n=0;n<h[l].length;n++){m+='<div id="cell-'+(l+""+n)+'" class="cellData">'+h[l][n]+"</div>"}k+='<div id="'+j--+'" class="fgSpinInfo">'+m+"</div>"}var o='<div class="fgSpinData">'+k+"</div>",p="";p+='<div class="fgTableClsBtn"></div>'+d+o;var q='<div id="fgtableOuter">'+p+"</div>";$("#history_table_wrapper").append(q),this.fgTableClose()},a.prototype.showTransactionInfo=function(a,b){var c=this;$(".fgSpinData .fgSpinInfo").on("click",function(d){var e=d.currentTarget.id;if($("#fgtableOuter").hide(),console.log("in free game clicked id"+e),a[b].transactions[e].response.game.hasOwnProperty("reSpinState")){var f="";f+='<div class="fgInfoCloseBtnCont"></div><div class="gameRoundInfoHead"><p>'+i.getPhrase("respin")+'</p></div><div class="gameBasicInfo"><pre><p>'+i.getPhrase("gameroundid")+"   "+a[b].gameRoundId+"</p>\n                       <p>"+i.getPhrase("game")+"  "+a[b].game+"</p>\n                       <p>"+i.getPhrase("time")+"  "+a[b].transactions[e].time+'</p>\n                       </pre></div><div class="gameTransactionInfo"><pre><h3>'+i.getPhrase("transactions")+"</h3>\n                       <p>"+a[b].transactions[e].time+"</p>\n                       <p>"+i.getPhrase("action")+"  "+a[b].transactions[e].request.action+"</p>\n                       <p>"+i.getPhrase("bet")+" "+a[b].transactions[e].response.game.totalBet+"</p>\n                       "+c.showReSpinGrid(a,b,e)+'\n                       <div id="expendingWildGrid"></div>\n                       '+c.createLWinHeading(a,b)+"\n                       "+c.showReSpinGamewin(a,b,e)+"\n                       <hr>\n                       <p>"+a[b].transactions[e].time+"</p>\n                       <p>"+i.getPhrase("win")+"   "+a[b].transactions[e].response.game.totalWin+'</p>\n\n                       </pre></div><div class="gameSummaryInfo"><pre>\n                       <h3>'+i.getPhrase("summary")+"</h3>\n                       <p>"+i.getPhrase("bet")+"  "+a[b].transactions[0].response.game.totalBet+"</p>\n                       <p>"+i.getPhrase("win")+"   "+a[b].transactions[e].response.game.totalWin+"</p>\n                       <p>"+i.getPhrase("closing balance")+"   "+a[b].transactions[e].response.balance+"</p>\n                       <p>"+i.getPhrase("currency")+"  "+a[b].currency+"</p>\n                       </pre></div>";var g='<div id="freeGameData">'+f+"</div>";$("#history_table_wrapper").append(g);var h=a[b].transactions[e].response.game.reSpinState.reelModifiers;h.forEach(function(a){var b=(a.symbol,a.position);$(".symbb-"+b).attr("src","./assets/html/images/settings/symbols/W1.png")}),c.fgInfoClose()}else{var f="";f+='<div class="fgInfoCloseBtnCont"></div><div class="gameRoundInfoHead"><p>'+i.getPhrase("free game")+'</p></div><div class="gameBasicInfo"><pre><p>'+i.getPhrase("gameroundid")+"   "+a[b].gameRoundId+"</p>\n                       <p>"+i.getPhrase("game")+"  "+a[b].game+"</p>\n                       <p>"+i.getPhrase("time")+"  "+a[b].transactions[e].time+'</p>\n                       </pre></div><div class="gameTransactionInfo"><pre><h3>'+i.getPhrase("transactions")+"</h3>\n                       <p>"+a[b].transactions[e].time+"</p>\n                       <p>"+i.getPhrase("action")+"  "+a[b].transactions[e].request.action+"</p>\n                       <p>"+i.getPhrase("bet")+" "+a[b].transactions[e].response.game.totalBet+"</p>\n                       "+c.showFgGrid(a,b,e)+'\n                       <div id="replaceGrid"></div>\n                       '+c.createLWinHeading(a,b)+"\n                       "+c.showFreeGamewin(a,b,e)+"\n                       <hr>\n                       <p>"+a[b].transactions[e].time+"</p>\n                        <P>"+i.getPhrase("spin left")+" "+a[b].transactions[e].response.game.freeSpinState.spinsLeft+"</P>\n                         <p>"+i.getPhrase("win")+"   "+a[b].transactions[e].response.game.totalWin+'</p>\n\n                       </pre></div><div class="gameSummaryInfo"><pre>\n                       <h3>'+i.getPhrase("summary")+"</h3>\n                       <p>"+i.getPhrase("bet")+"  "+a[b].transactions[0].response.game.totalBet+"</p>\n                       <p>"+i.getPhrase("win")+"   "+a[b].transactions[e].response.game.totalWin+"</p>\n                       <p>"+i.getPhrase("closing balance")+"   "+a[b].transactions[e].response.balance+"</p>\n                       <p>"+i.getPhrase("currency")+"  "+a[b].currency+"</p>\n                       </pre></div>";var g='<div id="freeGameData">'+f+"</div>";$("#history_table_wrapper").append(g);var h=a[b].transactions[e].response.game.freeSpinState.reelModifiers;h.forEach(function(a){var b=(a.symbol,a.position);$(".symbb-"+b).attr("src","./assets/html/images/settings/symbols/W1.png")}),c.fgInfoClose()}})},a.prototype.fgTableClose=function(){var a=document.createElement("button");a.id="fgTableBtn",a.innerHTML="X",a.onclick=function(){$("#fgtableOuter").remove(),$("#fgtableOuter").hide(),$(".tableOuter").show()},$(".fgTableClsBtn").append(a)},a.prototype.fgInfoClose=function(){var a=document.createElement("button");a.id="fgTableBtn",a.innerHTML="X",a.onclick=function(){$("#freeGameData").remove(),$("#freeGameData").hide(),$("#fgtableOuter").show()},$(".fgInfoCloseBtnCont").append(a)},a.prototype.showFgGrid=function(a,b,c){var d=this.transPoseGrid(a[b].transactions[c].response.game.grid);console.log("I am free game grid"+d);for(var e="",f=0,g=0;g<d.length;g++){for(var h="",i=0;i<d[g].length;i++){var j=f++;h+='<div id="symb-'+j+'" >'+this.imageConversion(d[g][i],j)+"</div>"}e+="<div class='row'  id=\"rowsymb-"+g+'" >'+h+"</div>"}return'<div class="symbolGridL">'+e+"</div>"},a.prototype.newGrid=function(a,b,c,d){for(var e=this.transPoseGrid(a[b].transactions[c].response.game.grid),f="",g=0,h=0;h<e.length;h++){for(var j="",k=0;k<e[h].length;k++){for(var l=0;l<d.length;l++)e[h][k]==d[l]&&(e[h][k]=a[b].transactions[c].response.game.freeSpinState.convertedToSymbol);var m=g++;j+='<div id="symbl-'+m+'" >'+this.imageConversion(e[h][k],m)+"</div>"}f+="<div class='row' id=\" rowsymb-"+h+'" >'+j+"</div>"}var n="<div><p>"+i.getPhrase("grid after symbol replacement")+"</p></div>",o='<div class="symbolGridN">'+f+"</div>";$("#replaceGrid").append(n),$("#replaceGrid").append(o)},a.prototype.showReSpinGrid=function(a,b,c){var d=this.transPoseGrid(a[b].transactions[c].response.game.grid);console.log("I am respin game grid"+d);for(var e="",f=0,g=0;g<d.length;g++){for(var h="",i=0;i<d[g].length;i++){var j=f++;h+='<div id="symb-'+j+'" >'+this.imageConversion(d[g][i],j)+"</div>"}e+="<div class='row' id=\"rowsymb-"+g+'" >'+h+"</div>"}return'<div class="symbolGridL">'+e+"</div>"},a.prototype.showReSpinGrid2=function(a,b,c){var d=this.transPoseGrid(a[b].transactions[c].response.game.grid);console.log("I am respin game grid"+d);for(var e="",f=0,g=0;g<d.length;g++){for(var h="",j=0;j<d[g].length;j++){var k=f++;h+='<div id="symb-'+k+'" >'+this.imageConversion(d[g][j],k)+"</div>"}e+="<div class='row' id=\"rowsymb-"+g+'" >'+h+"</div>"}var l="<div><p>"+i.getPhrase("updated grid with expending wild")+"</p></div>",m='<div class="symbolGridN">'+e+"</div>";$("#expendingWildGrid").append(l),$("#expendingWildGrid").append(m)},a.prototype.createLWinHeading=function(a,b){var c=new Array;c.push([""+i.getPhrase("payline"),""+i.getPhrase("symbol"),""+i.getPhrase("win")]);for(var d="",e=0;e<c.length;e++){for(var f="",g=0;g<c[e].length;g++)f+='<div class="hrr">'+c[e][g]+"</div>";d+='<div class="wHead">'+f+"</div>"}return'<div id="leftWinHead">'+d+"</div>"},a.prototype.showFreeGamewin=function(a,b,c){var d=[],e="",f=a[b].transactions[c].response.game.winDetails;if(console.log("all win details",f),f.length>0){console.log("yes i a greater");for(var g="",h=0;h<f.length;h++)g=f[h].symbol,d.push([f[h].paylineId,this.convertWinSymb(g),f[h].win]),console.log("Left grid win",d);for(var i=0;i<d.length;i++){for(var j="",k=0;k<d[i].length;k++)j+='<div   class="winInfo" >'+d[i][k]+"</div>";e+='<div class="winLInfoRow" data="'+f[i].positions+'"  id="winLine-'+k+'" >'+j+"</div>"}}return'<div class="gridLWinInfo">'+e+"</div>"},a.prototype.showReSpinGamewin=function(a,b,c){var d=[],e="",f=a[b].transactions[c].response.game.winDetails;if(f.length>0){console.log("yes i a greater");for(var g="",h=0;h<f.length;h++)g=f[h].symbol,d.push([f[h].paylineId,this.convertWinSymb(g),f[h].win]),console.log("Left grid win",d);for(var i=0;i<d.length;i++){for(var j="",k=0;k<d[i].length;k++)j+='<div   class="winInfo" >'+d[i][k]+"</div>";e+='<div class="winLInfoRow" data="'+f[i].positions+'"  id="winLine-'+k+'" >'+j+"</div>"}}return'<div class="gridLWinInfo">'+e+"</div>"},a.prototype.convertWinSymb=function(a){return'<img class="symbolWin-img" src = "./assets/html/images/settings/symbols/'+{WW:"W1",AA:"H1",BB:"H2",CC:"H3",DD:"M1",EE:"M2",FF:"M3",GG:"L1",HH:"L2",JJ:"L3",KK:"L4",FG:"B2"}[a]+'.png" >'},a.prototype.winHover=function(a,b){var c=a.currentTarget.getAttribute("data").split(",");console.log(c),console.log("I am in wininfo",a),b?c.map(function(a){$("#symb-"+a).css("background-color","lightgreen"),console.log(a)}):c.map(function(a){return $("#symb-"+a).css("background-color","")})},a}();c.HistoryPanel=v;var w=function(){function d(c){if(this._$divId=$(c),a.Common.ApplicationBase.instance.emit(b.WinManager.STOP_SYMBOLS_ANIMATION,!0),0==$(".show-bet").length){var d=q.current.getGameConfig().getDefaultBetIndex()+1,e="";new s("bet-frame").calculateTotalBetCombos(q.current.getGameConfig().getBetValues()).map(function(a){var b=a.totalBet,c=a.betLevel,d=new r({betLevel:c,totalBet:b});e+=""+d.getDiv()});var g="<div class ='bet-frame'>"+e+"</div>";if(f.isDesktop()){var h=document.getElementById("tb-total");h.insertAdjacentHTML("afterend",g)}else{var h=document.getElementById("tb-total");h.insertAdjacentHTML("afterend",g),$("#betPanelValue").append($("#"+d)[0].innerText)}$("#"+d).addClass("current-bet"),f.isDesktop()&&$("#betPanelValue").append($("#"+d)[0].innerText)}this._$removeBetPanel=$(".close-bet"),this.selectBet=$(".show-bet"),this._$removeBetPanel.on("click",this.removeBet),this.selectBet.on("click",this.selectedBet),this.maxBetButton=$("#maxBet"),this.maxBetButton.on("click",this.maxBetClick)}return d.prototype.maxBetClick=function(){a.Common.Server.isbetSelect=!0;var b=n.betLevels[n.betLevels.length-1],d=$("#"+n.betLevels.length),e=Number(d[0].innerText.split(" ")[1]);a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_BET_CHANGE,{betLevel:b,totalBet:e}),$("#betPanelValue").empty(),$("#betPanelValue").append(d[0].innerText);var f=$(".current-bet")[0].id;$("#"+f).removeClass("current-bet"),d.addClass("current-bet"),j.globalSounds.playCue("GENERIC_CLICK"),a.Common.ApplicationBase.instance.emit(c.EVENT_BET_PANEL_CLOSE)},d.prototype.removeBet=function(){},d.prototype.selectedBet=function(b){var d=b.target.id,e=$(".current-bet")[0].id;$("#"+e).removeClass("current-bet"),$("#"+d).addClass("current-bet"),$("#confirmBet").css("pointer-events","all"),$("#confirmBet").removeClass("selectedConfirmButton"),$("#betPanelValue").empty();var f=Number($("#"+d)[0].innerText.split(" ")[1]);$("#betPanelValue").append($("#"+d)[0].innerText);var g=Number($(".current-bet")[0].id)-1,h=n.betLevels[g];a.Common.Server.isbetSelect=!0,a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_BET_CHANGE,{betLevel:h,totalBet:f}),$("#confirmBet").addClass("selectedConfirmButton"),j.globalSounds.playCue("GENERIC_CLICK"),a.Common.ApplicationBase.instance.emit(c.EVENT_BET_PANEL_CLOSE)},d.prototype.changeCurrentBet=function(a){$("#confirmBet").css("pointer-events","all"),$("#confirmBet").removeClass("selectedConfirmButton"),$("#betPanelValue").empty(),$("#betPanelValue").append(k.format(a.totalBet)),$("#confirmBet").addClass("selectedConfirmButton")},d}();c.BetSettingsPanel=w;var x;!function(a){a[a.COLLAPSED=0]="COLLAPSED",a[a.EXPANDED=1]="EXPANDED"}(x=c.AutoSettingsPanelState||(c.AutoSettingsPanelState={}));var y=function(){function a(a,b,c){void 0===c&&(c=null);var d=this;this._$div=a,this._values=b,this._changeHandler=c,this._idx=0,this._maxIdx=0,this._selectedIdx=-1,this._$prevBtn=a.find(".button_arrow.left"),this._$nextBtn=a.find(".button_arrow.right"),this._$items=a.find(".multiselect-items .panel_icon").toArray().map(function(a){return $(a)}),this._maxIdx=Math.floor((this._values.length-1)/this._$items.length),this._$prevBtn.on("click",function(a){j.globalSounds.playCue("GENERIC_CLICK"),d.updatePage(d._idx-1)}),this._$nextBtn.on("click",function(a){j.globalSounds.playCue("GENERIC_CLICK"),d.updatePage(d._idx+1)});var e=this;a.find(".multiselect-items .panel_icon").on("click",function(a){j.globalSounds.playCue("GENERIC_CLICK"),e._selectedIdx=e.getIdx(e._idx,$(this).index()),e.updateItems(),c&&c(e._values[e._selectedIdx])}),this.updatePage(this._idx)}return a.prototype.value=function(){return this._selectedIdx>-1?this._values[this._selectedIdx]:0},a.prototype.reset=function(){this._selectedIdx=-1,this.updatePage(0),this._changeHandler&&this._changeHandler(0)},a.prototype.updatePage=function(a){this._idx=Math.max(Math.min(a,this._maxIdx),0),this.updateButtons(),this.updateItems()},a.prototype.updateButtons=function(){0==this._idx?this._$prevBtn.addClass("disabled"):this._$prevBtn.removeClass("disabled"),this._idx==this._maxIdx?this._$nextBtn.addClass("disabled"):this._$nextBtn.removeClass("disabled")},a.prototype.updateItems=function(){var a=this;this._$items.forEach(function(b,c){var d=a.getIdx(a._idx,c),e=a._values[d],f=d==a._selectedIdx;f?b.addClass("selected"):b.removeClass("selected"),b.val(e),b.find("span").text(""+e),b.find("radio").prop("checked",f)})},a.prototype.getIdx=function(a,b){return Math.max(Math.min(a*this._$items.length,this._values.length-this._$items.length),0)+b},a.prototype.getValue=function(a,b){return this._values[this.getIdx(a,b)]},a}();c.Multiselect=y;var z=function(){function b(a,b){void 0===b&&(b=null);var c=this;this._$div=a,this._changeHandler=b,
this._$div.keydown(function(a){if(-1!==$.inArray(a.keyCode,[46,8,9,27,13,110,190])||65==a.keyCode&&(!0===a.ctrlKey||!0===a.metaKey)||67==a.keyCode&&(!0===a.ctrlKey||!0===a.metaKey)||88==a.keyCode&&(!0===a.ctrlKey||!0===a.metaKey)||a.keyCode>=35&&a.keyCode<=39){if(190==a.keyCode){var b=c._$div.val()+".",d=b.indexOf(".");if(0==d||d!=b.lastIndexOf("."))return a.preventDefault(),!1}return void c.callChangeHandler()}if((a.shiftKey||a.keyCode<48||a.keyCode>57)&&(a.keyCode<96||a.keyCode>105))return a.preventDefault(),!1;var b=c._$div.val(),d=b.indexOf(".");if(-1!=d&&b.length-d>2)return a.preventDefault(),!1;c.callChangeHandler()})}return b.prototype.reset=function(){this._changeHandler&&this._changeHandler(0),this._$div.val("")},b.prototype.callChangeHandler=function(){var b=this;a.Core.Time.juggler.setTimeout(function(){if(b._changeHandler){var a=parseFloat(b._$div.val());b._changeHandler(isNaN(a)?0:a)}},1)},b}();c.MoneyInput=z}(b.ControlPanel||(b.ControlPanel={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.HTML.Page,d=a.Common.GameEvents,e=a.Common.Server,f=a.Core.Lang,g=a.Core.Environment,h=function(b){function c(c,h){var i=b.call(this,c,h)||this;i.loaderHolder=$(".loading");for(var j=f.getPhrase("loading_txt").split(""),k=0;k<j.length;k++)i.loaderHolder.append('<span style="--i:'+(k+1)+'">'+j[k]+"</span>");return i.setHTMLBackground(g.defaultSettings.baseGameBlurBGImgURL),i.on(a.Core.Events.ON_SHOWN,function(){g.isDesktop()||g.isLandscape()?$("#loader").css("background-image",g.defaultSettings.loadingBgImgURL):$("#loader").css("background-image",g.defaultSettings.portraitLoadingBgImgURL);var b=$("#loader_progress_bar");a.Common.ApplicationBase.instance.on(d.ON_LOAD_PROGRESS,function(a){$("#loader_progress_bar")[0].dataset.label=Math.round(100*a)+"%",a>0&&i.loaderHolder.css("visibility","visible"),a<1&&a>0&&$("#logo_holder").fadeIn(),TweenLite.to(b,.1,{value:100*a,ease:Linear.easeNone})},i),a.Common.ApplicationBase.instance.emit(d.ON_LOAD_PROGRESS,0)}),i.on(a.Core.Events.ON_HIDDEN,function(){a.Common.ApplicationBase.instance.emit(e.SEND_GAME_IS_READY),$("#control_panel").show(),$("#loader_progress_bar").css("display","none"),i.loaderHolder.css("display","none")}),i}return __extends(c,b),c.prototype.setHTMLBackground=function(a){var b=$("html");b.css("background-image","url('"+a+"')"),b.css("background-size","100% 100%"),b.css("background-repeat","no-repeat"),b.css("background-position","center")},c}(c);b.Loader=h}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Renderer.StageSetup,d=a.Core.Events,e=a.Core.HTML.Page,f=a.Core.Environment,g=a.Common.GameEvents,h=a.Core.Renderer.Stage,i=function(b){function e(e,i){var j=b.call(this,e,i)||this;j.deviceMode="",j.vw=document.createElement("div"),j.vw.style.position="fixed",j.vw.style.height="100vh",j.vw.style.width="0",j.vw.style.top="0",document.documentElement.appendChild(j.vw),j.once(a.Core.Events.ON_CREATE,function(){j._stageSetup=new c,j._stageSetup.width=f.defaultSettings.width,j._stageSetup.height=f.defaultSettings.height,j._stageSetup.isTransparent=!0,j._stageSetup.resolution=1,j._stageSetup.divId="renderer_canvas",j._stageSetup.fps=f.isDeviceMobile()?f.defaultSettings.mobileFPS:f.defaultSettings.desktopFPS,j._stage=new h,j._stage.init(j._stageSetup),j.resizeGameWrapper(j._stageSetup)}),d.coreEvents.on(d.ON_APP_RESIZE,function(){j.resizeGameWrapper(j._stageSetup)},j);var k=function(a){$(a.target).hasClass("no_fullscreen")||(f.goFullScreen(),$("body").off("mouseup",k))};return a.Common.ApplicationBase.instance.on(g.ON_GAME_INITIALIZED,function(){f.isFullScreenAvailable()&&f.isMobile()&&$("body").on("mouseup",k)}),d.coreEvents.on(f.EVENT_FULL_SCREEN,function(a){!a&&f.isFullScreenAvailable()&&f.isMobile()&&$("body").on("mouseup",k)}),j}return __extends(e,b),e.prototype.resizeGameWrapper=function(a){if(f.updatedHeight=window.innerHeight,f.isMobile()){""==this.deviceMode||this.deviceMode==f.currentMode?f.updatedHeight=window.innerHeight:f.updatedHeight=this.vw.offsetHeight,this.deviceMode=f.currentMode;document.documentElement.style.setProperty("--app-height",f.updatedHeight+"px")}var b=$("#game_wrapper"),c=a.width/a.height,d=window.innerWidth,e=f.updatedHeight;if(d/e>c?(d=e*c,b.css("height",e+"px"),b.css("width",d+"px")):(f.isPortrait()&&!f.isDesktop()||(e=d/c),b.css("height",e+"px"),b.css("width",d+"px")),b.css("marginLeft",-d/2+"px"),b.css("position","absolute"),b.css("left","50%"),f.isPortrait()&&!f.isDesktop())b.css("top","0px"),b.css("marginTop","0px"),b.css("marginLeft","0px"),b.css("left","0%");else if("4:3"==f.getAspectRatio()){b.css("top","0px"),b.css("height","100%"),b.css("marginTop","0");var g=$("#renderer_canvas");g.css("transform","translateX(-50%) scaleX(1.3)"),g.css("left","50%")}else{var g=$("#renderer_canvas");g.css("transform","translateX(0) scaleX(1)"),g.css("left","0%"),b.css("top","50%"),"iOS"==f.getPlatformData().os.family&&$(window).height()!=window.innerHeight?b.css("marginTop",-e/2+25+"px"):b.css("marginTop",-e/2+"px")}window.scroll(0,1)},e}(e);b.Main=i}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.GameEvents,d=a.Core.HTML.Page,e=a.Core.Lang,f=a.Core.SoundManager,g=function(b){function d(d,g){var h=b.call(this,d,g)||this;return h.on(a.Core.Events.ON_SHOWN,function(b){a.Common.ApplicationBase.instance.emit(c.ON_FATAL_ERROR,b),f.globalSounds.playCue("Error_Appearance"),$("#control_panel").remove(),window.vex.dialog.buttons.YES.text=e.getPhrase("reload_caps"),window.vex.dialog.alert({message:b.getPlayerMessage(),callback:function(b){a.Common.ApplicationBase.instance.emit(a.Common.Server.SEND_RELOAD_REQUEST,b)}})}),h}return __extends(d,b),d}(d);b.Error=g}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.HTML.Page,d=function(b){function c(c,d){var e=b.call(this,c,d)||this;return e.on(a.Core.Events.ON_SHOWN,function(){alert("DIALOG")}),e}return __extends(c,b),c}(c);b.Dialog=d}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.HTML.Page,d=function(b){function c(c,d){var e=b.call(this,c,d)||this;return e.on(a.Core.Events.ON_SHOWN,function(){var b=decodeURIComponent(a.Core.Environment.launchVariables.exit_url);b&&("close"===b?window.close():window.location.replace(b))}),e}return __extends(c,b),c}(c);b.GameOver=d}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=a.Core.Renderer.ComponentPlugin,e=a.Common.SceneProfile,f=a.Common.Server.SymbolPosition,g=function(c){function d(a,b,d){var e=c.call(this,a,b,d)||this;return e._lineSprites=[],e._winManager=a,e}return __extends(d,c),d.prototype.init=function(){if(this._sceneProfile=e.getSceneProfile(this._params.game_id),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_SHOW_WIN,this.onShowWin,this),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_SHOW_WIN_SUMMARY,this.onShowWinSummary,this),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinPresentationComplete,this),this._lineContainer=new PIXI.Container,this._winManager.addChild(this._lineContainer),this._sceneProfile.get().shawPayline&&this._sceneProfile.get().paylines)for(var c=this._sceneProfile.get().paylines,d=this,g=0;g<c.length;g++)!function(a){for(var b=[],e=0;e<c[a].length;e++)b.push(new f(e,c[a][e]));if(d._params.lineImages&&a<d._params.lineImages.length&&d._params.lineImages[a]){var g=d._winManager.getAperture().getPositionCentreList(b,d._winManager),h=g.slice(),i=(h.shift(),d._assets.getMovieClip(d._params.lineImages[a],!1));d._lineSprites.push(i)}else{var j=new PIXI.Graphics,k=d._winManager.getAperture().getPositionCentreList(b,d._winManager),l=function(a,b,c){var d=k.slice();a=a||5,j.lineStyle(a,b,c);var e=d.shift();for(j.moveTo(e.x,e.y);d.length;)e=d.shift(),j.lineTo(e.x-20,e.y),j.lineTo(e.x+20,e.y)};l(2.2*d._params.line_styling.width,0,.6),l(d._params.line_styling.width,16711680,1),d._lineSprites.push(j)}}(g)},d.prototype.destroy=function(){a.Common.ApplicationBase.instance.off(b.WinManager.EVENT_SHOW_WIN,this.onShowWin),a.Common.ApplicationBase.instance.off(b.WinManager.EVENT_SHOW_WIN_SUMMARY,this.onShowWinSummary),a.Common.ApplicationBase.instance.off(b.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinPresentationComplete)},d.prototype.onWinPresentationComplete=function(){this._lineContainer.removeChildren()},d.prototype.onShowWin=function(a){if(this._lineContainer.removeChildren(),a.getType()===b.SlotWin.TYPE_LINE){if(this._lineSprites&&this._lineSprites.length>0){var c=this._lineSprites[a.getLine()-1];this._lineContainer.addChild(c)}this.drawLineMask(a)}},d.prototype.onShowWinSummary=function(a){this._lineContainer.removeChildren(),a.applyToAllWins(function(a){this.onShowWin(a)}.bind(this))},d.prototype.drawLineMask=function(a){var b=this._winManager.getAperture().getPositionCentreList(a.getPositions(),this._winManager),c=b.slice(),d=new PIXI.Graphics;d.beginFill(this._sceneProfile.get().symbolMask.color,0);for(var e=this._sceneProfile.get().symbolMask.x,f=this._sceneProfile.get().symbolMask.y,g=this._sceneProfile.get().symbolMask.w,h=this._sceneProfile.get().symbolMask.h,i=0;i<b.length;i++){var j=c.shift();d.drawRect(j.x-e,j.y-f,g,h)}d.endFill(),this._lineContainer.addChild(d)},d}(d);c.PaylineRenderer=g}(b.Plugins||(b.Plugins={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=a.Core.Renderer.ComponentPlugin,e=a.Common.SceneProfile,f=a.Common.GameEvents,g=a.Core.SoundManager,h=function(c){function d(a,b,d){var e=c.call(this,a,b,d)||this;return e._winManager=a,e._sounds=d.getSoundManager(),e}return __extends(d,c),d.prototype.init=function(){this._sceneProfile=e.getSceneProfile(this._params.game_id),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_SHOW_WIN,this.onShowWin,this),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_WIN_PRESENTATION_END,this.clear,this),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary,this),a.Common.ApplicationBase.instance.on(f.ON_GET_GAME_RESULTS,this.onGetGameResults,this),a.Common.ApplicationBase.instance.on(f.ON_GAME_CHANGED,this.clear,this),a.Common.ApplicationBase.instance.on(b.Aperture.EVENT_TEASE_REEL,this.teaseReel,this),a.Common.ApplicationBase.instance.on(b.Aperture.EVENT_TEASE_REEL_END,this.clear,this),a.Common.ApplicationBase.instance.on(b.Aperture.EVENT_SYMBOL_DROPPED,this.onSymbolDrop,this),a.Common.ApplicationBase.instance.on(b.Aperture.EVENT_REELS_DROPPED,this.onReelsDropped,this),a.Common.ApplicationBase.instance.on(b.Aperture.EVENT_REEL_DROPPED,this.onReelDropped,this),a.Common.ApplicationBase.instance.on(f.ON_GET_CLEAR_ALL_SCREEN,this.onGetGameResults,this),a.Common.ApplicationBase.instance.on(b.WinManager.STOP_SYMBOLS_ANIMATION,this.stopSymbolAnim,this),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_REMOVE_WIN_SYMBOLS,this.onRemoveWinningSymbols,this)},d.prototype.destroy=function(){a.Common.ApplicationBase.instance.off(b.WinManager.EVENT_SHOW_WIN,this.onShowWin),a.Common.ApplicationBase.instance.off(b.WinManager.EVENT_WIN_PRESENTATION_END,this.clear),a.Common.ApplicationBase.instance.off(b.WinManager.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary),a.Common.ApplicationBase.instance.off(f.ON_GET_GAME_RESULTS,this.onGetGameResults),a.Common.ApplicationBase.instance.off(f.ON_GAME_CHANGED,this.clear),a.Common.ApplicationBase.instance.off(b.Aperture.EVENT_TEASE_REEL,this.teaseReel),a.Common.ApplicationBase.instance.off(b.Aperture.EVENT_TEASE_REEL_END,this.clear),a.Common.ApplicationBase.instance.off(b.Aperture.EVENT_SYMBOL_DROPPED,this.onSymbolDrop),a.Common.ApplicationBase.instance.off(b.Aperture.EVENT_REELS_DROPPED,this.onReelsDropped),a.Common.ApplicationBase.instance.off(b.Aperture.EVENT_REEL_DROPPED,this.onReelDropped),a.Common.ApplicationBase.instance.off(f.ON_GET_CLEAR_ALL_SCREEN,this.onGetGameResults),a.Common.ApplicationBase.instance.off(b.WinManager.STOP_SYMBOLS_ANIMATION,this.stopSymbolAnim),a.Common.ApplicationBase.instance.off(b.WinManager.EVENT_REMOVE_WIN_SYMBOLS,this.onRemoveWinningSymbols)},d.prototype.clear=function(){this._movieLayer&&this._movieLayer.removeChildren(),this._teaseBackground&&this._winManager.getAperture().getBackContainer().removeChild(this._teaseBackground)},d.prototype.onGetGameResults=function(){this._movieLayer||(this._movieLayer=this._winManager.getSceneObject().getLayout().getComponent(this._params.anim_container)),this._movieLayer.visible=!0,this.clear()},d.prototype.onReelsDropped=function(){this.clear()},d.prototype.onReelDropped=function(a,b){if(!b){a.getVisibleSymbols().forEach(function(a,b){var c=this;if(a.getSymbolProfile().getReelDropClipId()){var d=this._assets.getMovieClip(a.getSymbolProfile().getReelDropClipId(),!0);d.position=a.getLocalCoords(this._movieLayer),d.loop=!1,this._movieLayer.addChild(d),d.play(),d.onComplete=function(){c._movieLayer.removeChild(d)}}})}},d.prototype.onSymbolDrop=function(a){var b=this;if(a.getSymbolProfile().getDropClipId()){var c=this._assets.getMovieClip(a.getSymbolProfile().getDropClipId(),!0);c.position=a.getLocalCoords(this._movieLayer),c.loop=!1,this._movieLayer.addChild(c),c.play(),c.onComplete=function(){b._movieLayer.removeChild(c)}}},d.prototype.teaseReel=function(a,b){if(this._params.tease){var c=this._params.tease[b.getId()];if(c){if(c.frame){this._teaseFrame=this._teaseFrame||this._assets.getMovieClip(c.frame.movieclip,!0),this._teaseFrame.visible=!0,this._teaseFrame.position=a.getCentroid(this._movieLayer),a._setup.top_margin&&a._setup.top_margin>0&&(this._teaseFrame.position.y+=a._setup.top_margin);var d=c.frame.offsets;d&&(this._teaseFrame.position.x+=d.x||0,this._teaseFrame.position.y+=d.y||0),a._setup.anticipation_scale&&this._teaseFrame.scale.set(a._setup.anticipation_scale.x,a._setup.anticipation_scale.y),this._movieLayer.addChild(this._teaseFrame),this._teaseFrame.play()}if(c.background){this._teaseBackground=this._teaseBackground||this._assets.getMovieClip(c.background.movieclip,!0),this._teaseBackground.position=a.getCentroid(this._winManager.getAperture().getBackContainer()),a._setup.top_margin&&a._setup.top_margin>0&&(this._teaseBackground.position.y+=a._setup.top_margin);var d=c.background.offsets;d&&(this._teaseBackground.position.x+=d.x||0,this._teaseBackground.position.y+=d.y||0),a._setup.anticipation_scale&&this._teaseBackground.scale.set(a._setup.anticipation_scale.x,a._setup.anticipation_scale.y),this._winManager.getAperture().getBackContainer().addChild(this._teaseBackground),this._teaseBackground.play(),this._teaseBackground.visible=!0}}}},d.prototype.onWinSummary=function(a){this._winManager.getAperture().getAllSymbols().forEach(function(a){a.alpha=this._params.noWinSymbolAlpha||.5}.bind(this)),a.applyToAllWins(function(a){this._winManager.getAperture().getSymbols(a.getPositions()).forEach(function(b){this.animateSymbol(b,a)}.bind(this))}.bind(this))},d.prototype.animateSymbolRemove=function(a){var b=this,c=a.symbolRemoveAnimate();c&&(c.position=a.getLocalCoords(this._movieLayer),this._movieLayer.addChild(c),c.loop=!1,c.play(),c.x+=a.getSymbolProfile().getMovieClipOffsets().x,c.y+=a.getSymbolProfile().getMovieClipOffsets().y,this._params.blankSymbol&&a.setSymbol(this._params.blankSymbol),c.onComplete=function(){b.clear()})},d.prototype.animateSymbol=function(a,b){var c=a.animate(b);if(c.frameClip&&(c.frameClip.position=a.getLocalCoords(this._movieLayer),this._params.win_frame_scale&&c.frameClip.scale.set(this._params.win_frame_scale||1),this._movieLayer.addChild(c.frameClip),c.animationClip.loop=!0,c.frameClip.play()),c.animationClip&&(c.animationClip.position=a.getLocalCoords(this._movieLayer),this._movieLayer.addChild(c.animationClip),c.animationClip.loop=!1,c.animationClip.play(),c.animationClip.x+=a.getSymbolProfile().getMovieClipOffsets().x,c.animationClip.y+=a.getSymbolProfile().getMovieClipOffsets().y,c.animationClip.alpha=.5,TweenLite.to(c.animationClip,.25,{alpha:1}),this._params.popout)){var d=c.animationClip.position,e=c.animationClip.scale;this._params.popout.offsets&&TweenLite.to(c.animationClip,this._params.popout.duration||.5,{x:c.animationClip.x+this._params.popout.offsets.x||-5,y:c.animationClip.y+this._params.popout.offsets.y||-5,ease:Power1.easeInOut,onComplete:function(){c.animationClip.position=d}}),this._params.popout.scale&&this._params.popout.scale!=e&&TweenLite.to(c.animationClip.scale,this._params.popout.duration||.5,{x:this._params.popout.scale,y:this._params.popout.scale,ease:Power1.easeInOut,onComplete:function(){c.animationClip.scale=e}})}},d.prototype.onShowWin=function(a){var b=this;this._winManager.getAperture().getAllSymbols().forEach(function(a){a.stopAnimation(),a.alpha=this._params.noWinSymbolAlpha||.3}.bind(this)),this._movieLayer.removeChildren(),this._winManager.getAperture().getSymbols(a.getPositions()).forEach(function(c){b.animateSymbol(c,a)})},d.prototype.onRemoveWinningSymbols=function(a){var b=this;g.globalSounds.playCue("symbol_remove"),a.applyToAllWins(function(a){b._winManager.getAperture().getSymbols(a.getPositions()).forEach(function(a){b.animateSymbolRemove(a)})})},d.prototype.stopSymbolAnim=function(){this.clear()},d.prototype.onSymbolDropWithSpine=function(a){var b=this;if(a.getSymbolProfile().getDropClipId()){var c=this._assets.getSpineMovieClip(a.getSymbolProfile().getDropClipId(),a.getSymbolProfile().getSpineId(),!0);c.position=a.getLocalCoords(this._movieLayer),c.state.tracks.loop=!1,this._movieLayer.addChild(c),c.state.timeScale=1,c.state.onComplete=function(){b._movieLayer.removeChild(c)}}},d}(d);c.SymbolAnimator=h}(b.Plugins||(b.Plugins={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(b){var c=a.Core.Renderer.ComponentPlugin,d=a.Core.SoundManager,e=function(a){function b(b,c,d){var e=a.call(this,b,c,d)||this;return e._winManager=b,e}return __extends(b,a),b.prototype.init=function(){this._animationLayer=new PIXI.Container,this._winManager.getAperture().addChild(this._animationLayer)},b.prototype.addExpandingSymbolReels=function(a,b){var c=this;d.globalSounds.playCue("Wild_Expanding"),a.forEach(function(a){var b=c._winManager.getAperture().getReel(a.getReelIndex()),d=c._assets.getMovieClip(c._params.symbols[a.getSymbol()]);d.pivot.x=d.width/2,d.pivot.y=d.height/2,d.position.x=b.x+c._params.position.x,d.position.y=b.y+c._params.position.y+1.5*b._symbolHeight,d.scale.set(c._params.scale.x,c._params.scale.y),d.loop=!1,c._animationLayer.addChild(d),d.gotoAndPlay(0)}),b&&setTimeout(function(){b()},2e3)},b.prototype.removeAnimations=function(){this._animationLayer.removeChildren()},b}(c);b.ExpandingReelAnimator=e}(b.Plugins||(b.Plugins={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(b){var c=a.Core.Renderer.ComponentPlugin,d=a.Core.SoundManager,e=function(a){function b(b,c,d){var e=a.call(this,b,c,d)||this;return e._winManager=b,e}return __extends(b,a),b.prototype.init=function(){this._animationLayer=new PIXI.Container,this._winManager.getAperture().addChild(this._animationLayer)},b.prototype.addModifierSymbols=function(a,b){var c=this;d.globalSounds.playCue("Random_Wild"),a.forEach(function(a){var b=c._winManager.getAperture().getReel(a.getPosition().getReelIndex()),d=c._assets.getMovieClip(c._params.symbols[a.getSymbol()]);d.pivot.x=d.width/2,d.pivot.y=d.height/2,d.position.x=b.x+c._params.position.x,d.position.y=b._symbolHeight*(a.getPosition().getRowIndex()+.5)+b._setup.top_margin+c._params.position.y,d.scale.set(c._params.scale.x,c._params.scale.y),d.loop=!1,c._animationLayer.addChild(d),d.gotoAndPlay(0)}),b&&b()},b.prototype.removeAnimations=function(){this._animationLayer.removeChildren()},b}(c);b.ModifierSymbolAnimator=e}(b.Plugins||(b.Plugins={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(b){var c=a.Core.Renderer.ComponentPlugin,d=a.Core.SoundManager,e=PIXI.Graphics,f=function(a){function b(b,c,d){var e=a.call(this,b,c,d)||this;return e._winManager=b,e}return __extends(b,a),b.prototype.init=function(){this._animationLayer=new PIXI.Container,this._winManager.getAperture().addChild(this._animationLayer),this._animationLayer.mask=new e,this._animationLayer.mask.beginFill(16777215),this._animationLayer.mask.drawRect(this._winManager.getAperture().x,this._winManager.getAperture().y,this._winManager.getAperture().width+(this._params.position.maskOffsetX||0),this._winManager.getAperture().height+(this._params.position.maskOffsetY||0)),this._animationLayer.mask.endFill(),this._animationLayer.mask.pivot.set(.5,.5),this._winManager.getAperture().addChild(this._animationLayer.mask)},b.prototype.addMovingWildSymbol=function(a){var b=this;d.globalSounds.playCue("Wild_Moving"),a.forEach(function(a){var c=b._winManager.getAperture().getReel(a.getPosition().getReelIndex()),d=b._assets.getMovieClip(b._params.symbols[a.getSymbol()]);d.pivot.x=d.width/2,d.pivot.y=d.height/2,d.position.x=c.x+b._params.position.x,d.position.y=c._symbolHeight*(a.getPosition().getRowIndex()+.5)+c._setup.top_margin+b._params.position.y,d.scale.set(b._params.scale.x,b._params.scale.y),d.loop=!1,b._animationLayer.addChild(d),TweenLite.to(d.position,.5,{y:d.position.y+b._params.move.y,x:d.position.x+b._params.move.x,ease:Cubic.easeIn,onStart:function(){d.gotoAndPlay(0)},onComplete:function(){}})})},b.prototype.removeAnimations=function(){this._animationLayer.removeChildren()},b}(c);b.MovingWildAnimator=f}(b.Plugins||(b.Plugins={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Renderer.SceneManager,d=a.Core.Renderer.Scene,e=a.Core.Environment,f=a.Core.Events,g=a.Core.SoundManager,h=function(b){function d(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.pos=1,f.pages=1,f}return __extends(d,b),d.prototype.onCreate=function(){var c=this;b.prototype.onCreate.call(this),this.updateComponentData(),this.pages=this._layout.getLayoutParams().pages,this.pages>1&&this.rotateSplashScreen(),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_HIDE),this.on(f.ON_INTERACTION,function(b,d){var e=!c._layout.getComponent("splash_show_again").getState();a.Common.ApplicationBase.saveAppValue("splashScreen",e),"splash_button_continue"===d&&c.closeSplashScreen()}),this.on(f.ON_TOGGLE_INTERACTION,function(a){if(a.name.includes("button_")){var b=a.name.split("_");c.pos=parseInt(b[b.length-1]),c.setSplashScreenState()}}),this.visible=!1,setTimeout(function(){c.onResize(),c.visible=!0},100)},d.prototype.rotateSplashScreen=function(){var a=this;this._tweenRollUp=new TimelineLite({onComplete:function(){a.pos++,a.pos>a.pages&&(a.pos=1),a._tweenRollUp.restart()}}),this._tweenRollUp.to("",e.defaultSettings.splashTime,{onStart:function(){}})},d.prototype.updateComponentData=function(){},d.prototype.setSplashScreenState=function(){for(var a=1;a<=this.pages;a++){var b=this.pos===a,c=this._layout.getComponent("screen_btn_"+a);c.visible=b,c.setState(b),this._layout.getComponent("screen_bg_"+a).visible=b,this._layout.getComponent("screen_text_"+a).visible=b}},d.prototype.closeSplashScreen=function(){g.globalSounds.playCue("GENERIC_CLICK"),this._tweenRollUp&&this._tweenRollUp.kill(),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_SHOW),c.closeOverlay()},d.prototype.updateOnOrientationChange=function(){b.prototype.updateOnOrientationChange.call(this),e.isLandscape()?(this._layout.getComponent("splash_bg").visible=!0,this._layout.getComponent("splash_bg_portrait").visible=!1):(this._layout.getComponent("splash_bg").visible=!1,this._layout.getComponent("splash_bg_portrait").visible=!0)},d}(d);b.SplashScene=h}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Slots.Aperture,d=a.Slots.WinManager,e=a.Common.GameEvents,f=a.Slots.SpinResults,g=a.Core.Utils.Queue,h=a.Core.SoundManager,i=a.Core.Renderer.SceneManager,j=a.Core.Lang,k=a.Core.Environment,l=a.Common.Server.ResponseResult,m=a.Common.Server,n=a.Common.CommonSceneBase,o=a.Common.Currency.format,p=a.Slots.ControlPanel,q=function(b){function n(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.idleMsgIndex=-1,f.idleAnimCounter=0,f.prevJackpotValues={grand:0,major:0,minor:0,mini:0},f}return __extends(n,b),n.prototype.addForce=function(){},n.prototype.onGameReady=function(){b.prototype.onGameReady.call(this),l.current.isBrokenGameSate()?h.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient,1500):(m.isIdleMode=!0,a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.UPDATE_BALACE,l.current.getBalance()))},n.prototype.onCreate=function(){var f=this;b.prototype.onCreate.call(this),k.isDesktop()&&h.globalSounds.stopMusic(),this._aperture=this._layout.getComponent("aperture"),this._winManager=this._layout.getComponent("win_manager"),this._mainMovieLayer=new PIXI.Container,this.addChild(this._mainMovieLayer),k.launchVariables.hasCheatTool&&this.addForce(),a.Common.ApplicationBase.instance.on(c.EVENT_REELS_SPIN_START,this.onSpinStart,this),a.Common.ApplicationBase.instance.on(c.EVENT_SYMBOL_DROPPED,this.onSymbolDropped,this),a.Common.ApplicationBase.instance.on(c.EVENT_REEL_DROPPED,this.onReelDropped,this),a.Common.ApplicationBase.instance.on(c.EVENT_REELS_DROPPED,this.onReelsDropped,this),a.Common.ApplicationBase.instance.on(c.EVENT_TEASE_REEL,this.onReelTease,this),a.Common.ApplicationBase.instance.on(c.EVENT_TEASE_REEL_END,this.onReelTeaseEnd,this),a.Common.ApplicationBase.instance.on(d.EVENT_SHOW_WIN,this.onShowWin,this),a.Common.ApplicationBase.instance.on(d.EVENT_WIN_PRESENTATION_END,this.onWinsShown.bind(this)),a.Common.ApplicationBase.instance.on(d.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary,this),a.Common.ApplicationBase.instance.on(p.EVENT_AUTO_SPINS_START,this.onAutoSpinsStart,this),a.Common.ApplicationBase.instance.on(p.EVENT_AUTO_SPINS_END,this.onAutoSpinsEnd,this),a.Common.ApplicationBase.instance.on(p.EVENT_AUTO_SPIN,this.onAutoSpin,this),a.Common.ApplicationBase.instance.on(p.EVENT_INTERRUPT_SPIN,this.onInterruptSpin,this),a.Common.ApplicationBase.instance.on(p.EVENT_STOP_SPIN,this.onInterruptSpinError,this),a.Common.ApplicationBase.instance.on(e.ON_PLAYER_PROMPT_WIN,this.onPlayerWinPrompt,this),a.Common.ApplicationBase.instance.on(d.EVENT_SHOW_FEATURE_WIN_SUMMARY,this.showFeatureWinSummary,this),this.updateComponentData(),this._layout.triggerFX("scene_start"),l.current&&(!l.current.isBrokenGameSate()&&l.current.getTriggeredGrid()&&this._aperture.restoreAperture(l.current.getTriggeredGrid()),l.current.getJackpotValues()?(this._layout.getComponent("jackpot_meter_top").visible=!0,this.grandMeter=this._layout.getComponent("diamond_meter_value"),this.majorMeter=this._layout.getComponent("gold_meter_value"),this.minorMeter=this._layout.getComponent("silver_meter_value"),this.miniMeter=this._layout.getComponent("bronze_meter_value"),this.prevJackpotValues=l.current.getJackpotValues(),this.updateJackpotMeterValues(this.prevJackpotValues)):this._layout.getComponent("jackpot_meter_top")&&(this._layout.getComponent("jackpot_meter_top").visible=!1)),this.visible=!1,setTimeout(function(){f.onResize(),f.visible=!0,h.globalSounds.startMusic(f._layout.getLayoutParams().audio.music.ambient,1500)},100)},n.prototype.updateComponentData=function(){},n.prototype.updateOnOrientationChange=function(){if(this._layout){b.prototype.updateOnOrientationChange.call(this);var a=this._layout.getComponent("win_amount");k.isLandscape()?(this._layout.getComponent("ui_base").visible=!1,this._layout.getComponent("background").visible=!0,this._layout.getComponent("portrait_bg").visible=!1,a.position=new PIXI.Point(a.getParams().startPosDL.x,a.getParams().startPosDL.y)):(this._layout.getComponent("ui_base").visible=!1,this.setHTMLBackground(k.defaultSettings.portraitBaseBgImgURL),
this._layout.getComponent("background").visible=!1,this._layout.getComponent("portrait_bg").visible=!0,a.position=new PIXI.Point(a.getParams().startPosP.x,a.getParams().startPosP.y))}},n.prototype.onResize=function(){b.prototype.onResize.call(this),this.setHTMLBackground(k.defaultSettings.baseGameBlurBGImgURL),k.isDesktop()&&$("#fullScreen").css("pointer-events","all")},n.prototype.onInterruptSpinError=function(){this._aperture.onStopReelSpinning()},n.prototype.onResultsRequested=function(a){b.prototype.onResultsRequested.call(this,a),this._layout.getComponent("win_amount").visible=!1,this._aperture.startSpin(a.isBroken),m.isIdleMode=!1},n.prototype.onResultsReady=function(){b.prototype.onResultsReady.call(this),this.lastResults=new f(l.current),this.dropSymbols(this.lastResults)},n.prototype.dropSymbols=function(b){var c=this,f=new g;f.add(function(a){c.addModifySymbolBeforeReelStop(b,a)}),f.add(function(a){c.updateJackpotMeterValues(l.current.getJackpotValues(),a)}),f.add(function(a){c._aperture.dropSymbols(b,a)}),l.current.getJackpotData()&&f.add(function(a){c.showJackpotWheel(a)}),f.add(function(a){c._winManager.displaySpinResults(b,a)}),b.getNextAction().includes(m.FREE_SPINS)?f.add(function(e){a.Common.ApplicationBase.instance.emit(p.EVENT_AUTO_SPIN_STOP),a.Common.ApplicationBase.instance.emit(d.STOP_SYMBOLS_ANIMATION,!0),a.Core.Time.juggler.setTimeout(function(){c.showFreeSpinsIntro(b.getNextAction())},1e3)}):b.getNextAction().includes(m.BONUS)?f.add(function(e){a.Common.ApplicationBase.instance.emit(p.EVENT_AUTO_SPIN_STOP),a.Common.ApplicationBase.instance.emit(d.STOP_SYMBOLS_ANIMATION,!0),a.Core.Time.juggler.setTimeout(function(){c.showBonusIntro(b.getNextAction())},1e3)}):l.current.getAction()!=m.BASE||l.current.getNextAction()!=m.RE_SPIN||this._aperture._setup.isCascadeSpin?l.current.getNextAction()!=m.RE_SPIN||this._aperture._setup.isCascadeSpin||f.add(function(b){a.Core.Time.juggler.setTimeout(function(){c.onPlayerPrompt(j.getPhrase(j.getPhrase("@respin_message"))),b()},1e3)}):f.add(function(b){a.Core.Time.juggler.setTimeout(function(){h.globalSounds.playCue("RESPIN_TRIGGER"),c.onPlayerPrompt(j.getPhrase(j.getPhrase("@respin_message"))),b()},1e3)}),f.start(function(){b.getNextAction()==m.BASE&&(a.Common.ApplicationBase.instance.emit(m.SEND_ROUND_END),m.isIdleMode=!0,c.onPlayerPrompt("")),a.Common.ApplicationBase.instance.emit(e.ON_RESULTS_DISPLAYED,b.getResult())})},n.prototype.onHideAnnouncer=function(){a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1)},n.prototype.onDestroy=function(){b.prototype.onDestroy.call(this),a.Common.ApplicationBase.instance.off(c.EVENT_REELS_SPIN_START,this.onSpinStart),a.Common.ApplicationBase.instance.off(c.EVENT_SYMBOL_DROPPED,this.onSymbolDropped),a.Common.ApplicationBase.instance.off(c.EVENT_REEL_DROPPED,this.onReelDropped),a.Common.ApplicationBase.instance.off(c.EVENT_REELS_DROPPED,this.onReelsDropped),a.Common.ApplicationBase.instance.off(c.EVENT_TEASE_REEL,this.onReelTease),a.Common.ApplicationBase.instance.off(c.EVENT_TEASE_REEL_END,this.onReelTeaseEnd),a.Common.ApplicationBase.instance.off(d.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary),a.Common.ApplicationBase.instance.off(d.EVENT_SHOW_WIN,this.onShowWin),a.Common.ApplicationBase.instance.off(d.EVENT_WIN_PRESENTATION_END,this.onWinsShown),a.Common.ApplicationBase.instance.off(p.EVENT_AUTO_SPINS_START,this.onAutoSpinsStart),a.Common.ApplicationBase.instance.off(p.EVENT_AUTO_SPINS_END,this.onAutoSpinsEnd),a.Common.ApplicationBase.instance.off(p.EVENT_AUTO_SPIN,this.onAutoSpin),a.Common.ApplicationBase.instance.off(d.EVENT_SHOW_FEATURE_WIN_SUMMARY,this.showFeatureWinSummary),a.Common.ApplicationBase.instance.off(e.ON_PLAYER_PROMPT_WIN,this.onPlayerWinPrompt)},n.prototype.onSpinStart=function(){h.globalSounds.playCue("SPIN_BUTTON"),this._teaseCount=0,this._scatterCount=0},n.prototype.onReelsDropped=function(a){h.globalSounds.stopCue("RESPIN_SPIN")},n.prototype.onReelDropped=function(a,b){b||h.globalSounds.playCue(this._layout.getLayoutParams().audio.fx.reel_drops[a.reelIndex],250,!1,.6),4==a.reelIndex&&h.globalSounds.stopCue("ReeL_spin")},n.prototype.onSymbolDropped=function(a,b){var c=a.getSymbolProfile();c.getAudioDropId()&&(h.globalSounds.stopCue(c.getAudioDropId()),h.globalSounds.playCue(c.getAudioDropId()))},n.prototype.onInterruptSpin=function(){},n.prototype.onPlayerWinPrompt=function(a){a&&a.getWinCash()>0&&this._promptMsgPanel&&this._promptMsgPanel.showWinMessagePanel(a.getSymbolId(),a.getDescription())},n.prototype.onReelTease=function(a,b){h.globalSounds.stopCue("TEASE"),h.globalSounds.playCue("TEASE"),"BN"==b.getId()?this._promptMsgPanel.showWinMessagePanel(b.getId(),j.getPhrase("@bonus_promtmsg")):"SC"==b.getId()&&this._promptMsgPanel.showWinMessagePanel(b.getId(),j.getPhrase("@scatter_promtmsg"))},n.prototype.onReelTeaseEnd=function(a,b){h.globalSounds.stopCue("TEASE")},n.prototype.onWinSummary=function(a){a.getTotalWin()>0&&this.showWinTextAnimation(a.getTotalWin())},n.prototype.showWinTextAnimation=function(b){var c=this._layout.getComponent("win_amount");c.visible=!0,c.setText(a.Common.Currency.format(b,!0)),k.isPortrait()?c.position=new PIXI.Point(c.getParams().startPosP.x,c.getParams().startPosP.y):c.position=new PIXI.Point(c.getParams().startPosDL.x,c.getParams().startPosDL.y);var d=new PIXI.Point(c.position.x,c.position.y),e=new TimelineLite;if(c.scale.x=.2,c.scale.y=.2,h.globalSounds.playCue("counting_up_FreeGame"),k.isDesktop()){var f=c.getParams().endPos;e.add(TweenLite.to(c.scale,1.75,{x:.6,y:.6,ease:Cubic.easeOut})),e.add([TweenLite.to(c.position,.4,{x:f.x,y:f.y,ease:Cubic.easeIn}),TweenLite.to(c.scale,.4,{x:.2,y:.2,ease:Cubic.easeOut,onComplete:function(){c.position=d,c.visible=!1}})])}else e.add(TweenLite.to(c.scale,1.75,{x:.6,y:.6,ease:Cubic.easeOut,onComplete:function(){c.position=d,c.visible=!1}}))},n.prototype.onShowWin=function(b,c){if(b.getWinCash()>0){var d=this._layout.getComponent("win_amount");if(k.isPortrait()?d.position=new PIXI.Point(d.getParams().startPosP.x,d.getParams().startPosP.y):d.position=new PIXI.Point(d.getParams().startPosDL.x,d.getParams().startPosDL.y),c){d.setText(o(b.getWinCash(),!0)),d.visible=!0,h.globalSounds.playCue("line_win");var e=new g,f=new PIXI.Point(d.x,d.y);d.scale.x=.5,d.scale.y=.5,e.add(function(b){d.scale.x=.3,d.scale.y=.3,TweenLite.to(d.scale,.5,{x:.6,y:.6,ease:Cubic.easeOut,onComplete:function(){a.Core.Time.juggler.setTimeout(b,1e3)}})}),e.add(function(a){d.position=f,d.visible=!1,a()}),e.start()}else{d.setText(o(b.getWinCash()));var i=new PIXI.Point(d.x,d.y);d.scale.x=.5,d.scale.y=.5,d.visible=!0,a.Core.Time.juggler.setTimeout(function(){d.position=i,d.visible=!1},1500)}}},n.prototype.onWinsShown=function(){!l.current.getGameConfig().isAutoPlayDisplay()||l.current.getAction()===m.FREE_SPINS&&l.current.getNextAction()===m.BASE||$("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show(),b.prototype.onWinsShown.call(this)},n.prototype.onInteraction=function(c,d){b.prototype.onInteraction.call(this,c,d),m.isIdleMode=!1,this._layout.getComponent(d).interactive=!1,h.globalSounds.playCue("GENERIC_CLICK"),this._announcer.visible=!1,a.Common.ApplicationBase.instance.emit(e.ON_RESULTS_DISPLAYED,this.result)},n.prototype.onContinueGame=function(a){a&&this._aperture.startSpin()},n.prototype.onAutoSpinsEnd=function(){l.current.getGameConfig().isAutoPlayDisplay()&&$("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show()},n.prototype.onAutoSpinsStart=function(){h.globalSounds.setMusicRestorePoint(this._layout.getLayoutParams().audio.music.spin,0)},n.prototype.onAutoSpin=function(b){a.Common.ApplicationBase.instance.emit(a.Slots.WinManager.EVENT_FREE_SPINS_END),1===b&&a.Common.ApplicationBase.instance.emit(p.EVENT_AUTO_SPINS_ENDS)},n.prototype.stopAnim=function(){this._layout.getComponent("fx_container").removeChildren()},n.prototype.showFeatureWinSummary=function(){var b=this,c=new g,e=l.current.getGameRoundWin();this.updateJackpotMeterValues(l.current.getJackpotAfterWinValues()),$("#allbutton_wapper").show(),$("#Autoplay_button_wrapper").show(),$("#button_spin").css("display","block"),$("#button_settings").show(),$("#menu_mobile").show(),$("#main_button_wrapper").show(),a.Core.Time.juggler.setTimeout(function(){e>0?(l.current.getGameConfig().isAutoPlayDisplay()?$("#Autoplay_button_wrapper").show():$("#Autoplay_button_wrapper").hide(),b._winManager.addCelebrationAnimations(e,c),c.add(function(c){a.Core.Time.juggler.setTimeout(function(){a.Common.ApplicationBase.instance.emit(d.EVENT_WIN_PRESENTATION_START),b.showWinTextAnimation(e),c()},200)})):c.add(function(c){b.onPlayerPrompt(j.getPhrase("player_wins_x_caps",{win:a.Common.Currency.format(e)})),c()}),c.start(function(){l.current.getNextAction()==m.BASE&&a.Common.ApplicationBase.instance.emit(m.SEND_ROUND_END),a.Common.ApplicationBase.instance.emit(a.Common.PlayerMonitoring.EVENT_CHECK_ALARMS_AT_FS),h.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient,1500),this.isIdleMode=!0}.bind(b))},1e3)},n.prototype.showFreeSpinsIntro=function(a){i.showPopupScene(a==m.HOLD_FREE_SPINS?"HOLD_FREE_SPINS_INTRO":"FREE_SPINS_INTRO")},n.prototype.showJackpotWheel=function(a){i.showSceneAsOverlay("JACKPOT",void 0,void 0,void 0,void 0,a)},n.prototype.showBonusIntro=function(a){i.showPopupScene(a==m.MULTI_LEVEL_BONUS?"MULTI_LEVEL_BONUS_INTRO":"BONUS_INTRO")},n.prototype.addModifySymbolBeforeReelStop=function(a,b){this._winManager.addModifySymbolBeforeReelStop(a,b)},n.prototype.createAnimationInterval=function(){var b=this;this._animationInterval=setInterval(function(){m.isIdleMode&&k.gameConfig.playerMessages&&b.idleAnimCounter>=2&&(b.idleAnimCounter=0,b.idleMsgIndex++,b.idleMsgIndex>=k.gameConfig.playerMessages.length&&(b.idleMsgIndex=0),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.PLAY_IDLE_ANIMATIONS,b.idleMsgIndex),b.onPlayerPrompt(j.getPhrase(k.gameConfig.playerMessages[b.idleMsgIndex]))),b.idleAnimCounter++,b.playSceneAnimation()},5e3)},n.prototype.updateJackpotMeterValues=function(b,c){var d=this;if(this.grandMeter&&b){var e={win:Number(this.prevJackpotValues.grand)},f={win:Number(this.prevJackpotValues.major)},g={win:Number(this.prevJackpotValues.minor)},h={win:Number(this.prevJackpotValues.mini)};TweenLite.to(e,.5,{win:b.grand,ease:Cubic.easeOut,onUpdate:function(){d.grandMeter.setText(a.Common.Currency.format(Number(e.win.toFixed(2))))},onComplete:function(){d.grandMeter.setText(a.Common.Currency.format(Number(b.grand)))}}),TweenLite.to(f,.5,{win:b.major,ease:Cubic.easeOut,onUpdate:function(){d.majorMeter.setText(a.Common.Currency.format(Number(f.win.toFixed(2))))},onComplete:function(){d.majorMeter.setText(a.Common.Currency.format(Number(b.major)))}}),TweenLite.to(g,.5,{win:b.minor,ease:Cubic.easeOut,onUpdate:function(){d.minorMeter.setText(a.Common.Currency.format(Number(g.win.toFixed(2))))},onComplete:function(){d.minorMeter.setText(a.Common.Currency.format(Number(b.minor)))}}),TweenLite.to(h,.5,{win:b.mini,ease:Cubic.easeOut,onUpdate:function(){d.miniMeter.setText(a.Common.Currency.format(Number(h.win.toFixed(2))))},onComplete:function(){d.miniMeter.setText(a.Common.Currency.format(Number(b.mini)))}}),this.prevJackpotValues=b}c&&c()},n}(n);b.BaseScene=q}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.GameEvents,d=a.Core.SoundManager,e=a.Common.Currency,f=a.Common.Server.ResponseResult,g=a.Core.Renderer.SceneManager,h=a.Common.Server,i=a.Core.Environment,j=a.Core.Lang,k=a.Common.CommonSceneBase,l=a.Slots.WinManager,m=a.Core.Utils.Queue,n=function(b){function k(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.selectedOptions={},f.isPickOptionsEnabled=!1,f.lastPickId=0,f}return __extends(k,b),k.prototype.updateOnOrientationChange=function(){this._layout&&(b.prototype.updateOnOrientationChange.call(this),i.isLandscape()?(this._layout.getComponent("bonus_bg").visible=!0,this._layout.getComponent("bonus_bg_portrait").visible=!1):(this._layout.getComponent("bonus_bg").visible=!1,this._layout.getComponent("bonus_bg_portrait").visible=!0,this.setHTMLBackground(i.defaultSettings.portraitBonusBgImgURL)))},k.prototype.onCreate=function(){var c=this;b.prototype.onCreate.call(this),this._layout.triggerFX("create"),this.updateComponentData(),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!0),this.msg_text=this._layout.getComponent("pick_option_text"),this.msg_text&&this.msg_text.setText(a.Core.Lang.getPhrase("@pick_icon")),setTimeout(function(){c.onResize(),c.playBonusGameSound(),c.visible=!0,c.isPickOptionsEnabled=!0},100)},k.prototype.onResize=function(){b.prototype.onResize.call(this),this.setHTMLBackground(i.defaultSettings.bonusBlurBGImgURL)},k.prototype.onDestroy=function(){b.prototype.onDestroy.call(this),this.lastPickId=0,this.selectedOptions={},this.isPickOptionsEnabled=!1,this.bonus_win_amount.setText(" ")},k.prototype.updateComponentData=function(){this.bonus_win_amount=this._layout.getComponent("bonus_win_amount"),this.bonus_win_amount.setText(" ")},k.prototype.onInteraction=function(e,f){if(b.prototype.onInteraction.call(this,e,f),this.isPickOptionsEnabled){this.isPickOptionsEnabled=!1,d.globalSounds.playCue("pickem_reveal"),this.msg_text&&this.msg_text.setText(a.Core.Lang.getPhrase(""));var g=f.split("_"),h=parseInt(g[g.length-1]);this.lastPickId=h;for(var i=1;i<=this._layout.getLayoutParams().totalPickOptions;i++)this._layout.getComponent("pick_option_"+i).interactive=!1;a.Common.ApplicationBase.instance.emit(c.ON_GET_GAME_RESULTS,{pickId:h})}},k.prototype.onGameReady=function(){b.prototype.onGameReady.call(this),f.current.getAwardedBonusPrizes()&&(this.selectedOptions=f.current.getAwardedBonusPrizes()),f.current.isBrokenGameSate()&&($("#allbutton_wapper").hide(),$("#button_settings").hide(),$("#Autoplay_button_wrapper").hide(),$("#menu_mobile").hide(),$("#main_button_wrapper").hide(),$("#control_panel").css("pointer-events","none"),this.restoreBonusState())},k.prototype.onResultsReady=function(){b.prototype.onResultsReady.call(this),this.selectedOptions=f.current.getAwardedBonusPrizes(),this.showBonusOption()},k.prototype.showBonusOption=function(){var b=this;if(!(this.selectedOptions&&Object.keys(this.selectedOptions).length>0))throw"[BonusScene] Wrong Selected Bonus Option;";var c=this._layout.getComponent("pick_option_text_"+this.lastPickId);c.visible=!1;var d=" ",i=!1,k=this.selectedOptions[this.lastPickId];k&&!isNaN(+k)&&+k>0?(d=e.format(parseFloat(k)),i=!0):j.getPhrase(k+"")!=k?d=j.getPhrase(k):"bonus_collect"!=j.getPhrase("bonus_collect")&&(d=j.getPhrase("bonus_collect"));var n=new m;n.add(function(a){b.playAnimationBeforePick(i,a)}),n.add(function(a){b._layout.getComponent("pick_option_"+b.lastPickId).onShowPrize(i,function(){c.setText(d),c.visible=!0,a()})}),f.current.getTotalWin()>0&&(n.add(function(a){var d=b._layout.getComponent("bonus_win_holder");TweenLite.to(c.position,.4,{x:d.x+d.x/2,y:d.y,delay:1,ease:Cubic.easeIn}),TweenLite.to(c.scale,.4,{x:.2,y:.2,ease:Cubic.easeOut,delay:1,onComplete:function(){c.visible=!1,a()}})}),n.add(function(c){b.bonus_win_amount.setText(""),b.bonus_win_amount.setText(e.format(f.current.getFeatureTotalWin())),a.Common.ApplicationBase.instance.emit(l.EVENT_WIN_PRESENTATION_START),c()})),n.add(function(c){var d=Object.keys(b.selectedOptions);if(f.current.getNextAction()===h.BONUS){b.isPickOptionsEnabled=!0;for(var e=1;e<=b._layout.getLayoutParams().totalPickOptions;e++)d.indexOf(e+"")<0&&(b._layout.getComponent("pick_option_"+e).interactive=!0);b.msg_text&&b.msg_text.setText(a.Core.Lang.getPhrase("@pick_again")),b.playAnimationAfterPick(i,c)}else{for(var j=0,e=1;e<=b._layout.getLayoutParams().totalPickOptions;e++)if(d.indexOf(e+"")<0){var k=b._layout.getComponent("pick_option_"+e);b._layout.getComponent("pick_option_text").visible=!1,k.onShowDisablePrize(),j++}a.Core.Time.juggler.setTimeout(function(){b.msg_text&&(b.msg_text.visible=!1),g.showPopupScene("BONUS_SUMMARY",{callback:function(){}})},2e3),c()}}),n.start()},k.prototype.restoreBonusState=function(){this.bonus_win_amount.setText(""),this.bonus_win_amount.setText(e.format(f.current.getFeatureTotalWin()));var b=Object.keys(this.selectedOptions);this.msg_text&&this.msg_text.setText(a.Core.Lang.getPhrase(b.length>0?"@pick_again":"@pick_icon"));for(var c=1;c<=this._layout.getLayoutParams().totalPickOptions;c++){var d=b.indexOf(c+""),g=this._layout.getComponent("pick_option_"+c);if(g.interactive=!1,g.visible=!0,d>=0){var i=" ",k=!1;this.selectedOptions[c]&&!isNaN(+this.selectedOptions[c])&&+this.selectedOptions[c]>0?(i=e.format(parseFloat(this.selectedOptions[c])),k=!0):j.getPhrase(this.selectedOptions[c]+"")!=this.selectedOptions[c]?i=j.getPhrase(this.selectedOptions[c]):"bonus_collect"!=j.getPhrase("bonus_collect")&&(i=j.getPhrase("bonus_collect")),g.onShowPrize(k);var l=this._layout.getComponent("pick_option_text_"+c);k?l.visible=!1:(l.setText(i),l.visible=!0)}else f.current.getNextAction()!=h.BONUS?g.onShowDisablePrize():g.interactive=!0}},k.prototype.onGameAccepted=function(){},k.prototype.playBonusGameSound=function(){d.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient,1500)},k.prototype.showBrokenFeatureWinSummary=function(){b.prototype.showBrokenFeatureWinSummary.call(this),this.msg_text&&(this.msg_text.visible=!1),a.Core.Renderer.SceneManager.showPopupScene("BONUS_SUMMARY")},k.prototype.playAnimationBeforePick=function(a,b){b()},k.prototype.playAnimationAfterPick=function(a,b){b()},k}(k);b.BonusScene=n}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.CommonSceneBase,d=a.Slots.Aperture,e=a.Slots.WinManager,f=a.Common.GameEvents,g=a.Slots.SpinResults,h=a.Core.Utils.Queue,i=a.Core.SoundManager,j=a.Common.Currency,k=a.Core.Environment,l=a.Common.Server.ResponseResult,m=a.Common.Server,n=a.Core.Renderer.SceneManager,o=a.Core.Lang,p=function(b){function c(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.audioProfile=null,f.freeReSpinActive=!1,f}return __extends(c,b),c.prototype.soundFreeGame=function(){i.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient[0],1500)},c.prototype.updateOnOrientationChange=function(){if(this._layout){b.prototype.updateOnOrientationChange.call(this);var a=this._layout.getComponent("win_amount");k.isPortrait()?(a.position=new PIXI.Point(a.getParams().startPosP.x,a.getParams().startPosP.y),$("html").css("background-image",k.defaultSettings.portraitFreeSpinBgImgURL).css("background-size"," cover").css(" background-repeat","no-repeat"),this._layout.getComponent("portrait_bg").visible=!0,this._layout.getComponent("free_spins_bg").visible=!1):(a.position=new PIXI.Point(a.getParams().startPosDL.x,a.getParams().startPosDL.y),this._layout.getComponent("free_spins_bg").visible=!0,this._layout.getComponent("portrait_bg").visible=!1)}},c.prototype.onGameReady=function(){b.prototype.onGameReady.call(this),l.current.getFeatureSpinsLeft()==l.current.getFeatureTotalSpins()&&(this._aperture.visible=!0,l.current.getGameConfig().isAutoPlayDisplay()?$("#Autoplay_button_wrapper").show():$("#Autoplay_button_wrapper").hide()),this._layout.setComponentText("total_win_value",j.format(l.current.getFeatureTotalWin())),this._layout.setComponentText("spins_count",l.current.getFeatureSpinsLeft().toString()),l.current.isBrokenGameSate()&&($("#allbutton_wapper").hide(),$("#button_settings").hide(),$("#Autoplay_button_wrapper").hide(),$("#menu_mobile").hide(),$("#main_button_wrapper").hide(),l.current.getGameConfig().isAutoPlayDisplay()&&$("#button_auto_cp").show().addClass("disabled"))},c.prototype.onCreate=function(){var c=this;b.prototype.onCreate.call(this),this._aperture=this._layout.getComponent("aperture"),this._winManager=this._layout.getComponent("win_manager"),this.updateComponentData(),a.Common.ApplicationBase.instance.on(d.EVENT_REELS_SPIN_START,this.onSpinStart,this),a.Common.ApplicationBase.instance.on(d.EVENT_SYMBOL_DROPPED,this.onSymbolDropped,this),a.Common.ApplicationBase.instance.on(d.EVENT_REEL_DROPPED,this.onReelDropped,this),a.Common.ApplicationBase.instance.on(d.EVENT_TEASE_REEL,this.onReelTease,this),a.Common.ApplicationBase.instance.on(d.EVENT_TEASE_REEL_END,this.onReelTeaseEnd,this),a.Common.ApplicationBase.instance.on(d.EVENT_REELS_DROPPED,this.onReelsDropped,this),a.Common.ApplicationBase.instance.on(e.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary,this),this._layout.triggerFX("create"),a.Core.Time.juggler.setTimeout(function(){c._aperture.visible=!0,c.soundFreeGame(),c.onGameAccepted()},1e3),a.Core.Time.juggler.setTimeout(function(){c.onResize(),c.visible=!0},100)},c.prototype.onResize=function(){b.prototype.onResize.call(this),this.setHTMLBackground(k.defaultSettings.freeSpinBlurBGImgURL)},c.prototype.updateComponentData=function(){this._mainMovieLayer=new PIXI.Container,this.addChild(this._mainMovieLayer)},c.prototype.onResultsRequested=function(a){b.prototype.onResultsRequested.call(this,a),l.current.isFreeReSpin()||this._layout.setComponentText("spins_count",(l.current.getFeatureSpinsLeft()-l.current.getFeatureReTriggeredSpins()-1).toString()),this._aperture.isSpinning||(null!==this.audioProfile&&(i.globalSounds.stopCue(this.audioProfile),this.audioProfile=null),this._aperture.startSpin())},c.prototype.onStateReady=function(){l.current.isFreeReSpin()||l.current.getFeatureAwardedSpins()===l.current.getFeatureSpinsLeft()||this._layout.setComponentText("spins_count",(l.current.getFeatureSpinsLeft()-1).toString())},c.prototype.onResultsReady=function(){b.prototype.onResultsReady.call(this);var a=new g(l.current);c.lastResults=a,this.dropSymbols(a)},c.prototype.dropSymbols=function(b){var c=this,d=new h;d.add(function(a){c.addModifySymbolBeforeReelStop(b,a)}),d.add(function(a){c._aperture.dropSymbols(b,a)}),d.add(function(a){c._winManager.displaySpinResults(b,a)}),l.current.isFreeReSpin()&&!this._aperture._setup.isCascadeSpin?d.add(function(b){a.Core.Time.juggler.setTimeout(function(){c.freeReSpinActive||(c.freeReSpinActive=!0,i.globalSounds.playCue("RESPIN_TRIGGER")),c.onPlayerPrompt(o.getPhrase(o.getPhrase("@respin_message"))),b()},1e3)}):this.freeReSpinActive=!1,d.start()},c.prototype.onInteraction=function(a,c){b.prototype.onInteraction.call(this,a,c),i.globalSounds.playCue("GENERIC_CLICK")},c.prototype.onDestroy=function(){b.prototype.onDestroy.call(this),a.Common.ApplicationBase.instance.off(d.EVENT_REELS_SPIN_START,this.onSpinStart),a.Common.ApplicationBase.instance.off(d.EVENT_SYMBOL_DROPPED,this.onSymbolDropped),a.Common.ApplicationBase.instance.off(d.EVENT_REEL_DROPPED,this.onReelDropped),a.Common.ApplicationBase.instance.off(d.EVENT_TEASE_REEL,this.onReelTease),a.Common.ApplicationBase.instance.off(d.EVENT_TEASE_REEL_END,this.onReelTeaseEnd),a.Common.ApplicationBase.instance.off(e.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary),a.Common.ApplicationBase.instance.off(d.EVENT_REELS_DROPPED,this.onReelsDropped)},c.prototype.onReelsDropped=function(){},c.prototype.onGameAccepted=function(){this._aperture.visible=!0},c.prototype.startGame=function(){this._aperture.visible=!0,this.soundFreeGame(),l.current.isBrokenGameSate()||(l.current.isFreeReSpin()||this._layout.setComponentText("spins_count",(l.current.getFeatureSpinsLeft()-1).toString()),this._layout.setComponentText("total_win_value",j.format(l.current.getTotalWin())))},c.prototype.onSummaryAccepted=function(){b.prototype.onSummaryAccepted.call(this),this.soundFreeGame()},c.prototype.onSpinStart=function(){i.globalSounds.playCue("SPIN_BUTTON"),this._mainMovieLayer.removeChildren(),this._teaseCount=0},c.prototype.onContinueGame=function(){a.Core.Time.juggler.setTimeout(function(){l.current.getNextAction()==m.FREE_SPINS&&a.Common.ApplicationBase.instance.emit(f.ON_GET_GAME_RESULTS,{bet:a.Slots.SettingsPages.BettingSetup.currentBetLevel})},l.current.getAction()!=m.FREE_SPINS?2e3:1e3)},c.prototype.onReelDropped=function(a,b){b||i.globalSounds.playCue(this._layout.getLayoutParams().audio.fx.reel_drops[a.reelIndex],250,!1,1),4==a.reelIndex&&i.globalSounds.stopCue("ReeL_spin")},c.prototype.onSymbolDropped=function(a,b){var c=a.getSymbolProfile();c.getAudioDropId()&&(i.globalSounds.stopCue(c.getAudioDropId()),i.globalSounds.playCue(c.getAudioDropId()))},c.prototype.onReelTease=function(a,b){i.globalSounds.playCue(b.getTeaseAudioId(this._teaseCount++))},c.prototype.onReelTeaseEnd=function(a,b){},c.prototype.onWinSummary=function(a){if(this._layout.getComponent("fx_container").removeChildren(),a.getTotalWin()>0){var b=this._layout.getComponent("win_amount");k.isPortrait()?b.position=new PIXI.Point(b.getParams().startPosP.x,b.getParams().startPosP.y):b.position=new PIXI.Point(b.getParams().startPosDL.x,b.getParams().startPosDL.y),b.visible=!0,this.addChild(b),b.setText(j.format(a.getTotalWin(),!0));var c=new PIXI.Point(b.position.x,b.position.y),d=new TimelineLite;if(b.scale.x=.2,b.scale.y=.2,i.globalSounds.playCue("counting_up_FreeGame"),k.isDesktop()){var e=b.getParams().endPos;d.add(TweenLite.to(b.scale,1.75,{x:.6,y:.6,ease:Cubic.easeOut})),d.add([TweenLite.to(b.position,.4,{x:e.x,y:e.y,ease:Cubic.easeIn}),TweenLite.to(b.scale,.4,{x:.2,y:.2,ease:Cubic.easeOut,onComplete:function(){b.position=c,b.visible=!1}})])}else d.add(TweenLite.to(b.scale,1.75,{x:.6,y:.6,ease:Cubic.easeOut,onComplete:function(){b.position=c,b.visible=!1}}))}},c.prototype.onWinsShown=function(){var b=this;this._layout.setComponentText("total_win_value",j.format(l.current.getFeatureTotalWin())),l.current&&l.current.getAction()===m.FREE_SPINS&&l.current.getNextAction()===m.BASE?0!==l.current.getFeatureTotalWin()?a.Core.Time.juggler.setTimeout(function(){n.showPopupScene("FREE_SPINS_SUMMARY")},1500):(setTimeout(function(){a.Common.ApplicationBase.instance.emit(e.EVENT_SHOW_FEATURE_WIN_SUMMARY),$("#allbutton_wapper").show(),$("#Autoplay_button_wrapper").show(),$("#button_spin").css("display","block"),$("#button_settings").show(),$("#menu_mobile").show(),$("#main_button_wrapper").show()},600),a.Common.ApplicationBase.instance.emit(f.ON_RESULTS_DISPLAYED,c.lastResults)):l.current.getFeatureReTriggeredSpins()>0?a.Core.Time.juggler.setTimeout(function(){var d=b._layout.getComponent("retrigger_announcer");d.visible=!0,b._layout.getComponent("awarded_retrigger_count").setText(l.current.getFeatureSpinsLeft().toString()),a.Core.Time.juggler.setTimeout(function(){a.Common.ApplicationBase.instance.emit(f.ON_RESULTS_DISPLAYED,c.lastResults),d.visible=!1},4500)},0):a.Common.ApplicationBase.instance.emit(f.ON_RESULTS_DISPLAYED,c.lastResults)},c.prototype.addModifySymbolBeforeReelStop=function(a,b){this._winManager.addModifySymbolBeforeReelStop(a,b)},c.prototype.showBrokenFeatureWinSummary=function(){b.prototype.showBrokenFeatureWinSummary.call(this),a.Core.Renderer.SceneManager.showPopupScene("FREE_SPINS_SUMMARY")},c}(c);b.FreeSpinsScene=p}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.GameEvents,d=a.Core.SoundManager,e=a.Common.Currency,f=a.Common.Server.ResponseResult,g=a.Core.Renderer.SceneManager,h=a.Common.Server,i=a.Core.Environment,j=a.Core.Lang,k=a.Common.CommonSceneBase,l=a.Slots.WinManager,m=a.Core.Utils.Queue,n=function(b){function k(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.selectedOptions={},f.isPickOptionsEnabled=!1,f.lastPickId=0,f.lastLevelId=1,f}return __extends(k,b),k.prototype.updateOnOrientationChange=function(){this._layout&&(b.prototype.updateOnOrientationChange.call(this),i.isLandscape()?(this._layout.getComponent("bonus_bg").visible=!0,this._layout.getComponent("bonus_bg_portrait").visible=!1):(this._layout.getComponent("bonus_bg").visible=!1,this._layout.getComponent("bonus_bg_portrait").visible=!0,this.setHTMLBackground(i.defaultSettings.portraitMultiLevelBonusBgImgURL)))},k.prototype.onCreate=function(){var c=this;b.prototype.onCreate.call(this),this._layout.triggerFX("create"),this.updateComponentData(),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!0),setTimeout(function(){c.onResize(),c.playBonusGameSound(),c.visible=!0,c.isPickOptionsEnabled=!0},100)},k.prototype.onResize=function(){b.prototype.onResize.call(this),this.setHTMLBackground(i.defaultSettings.multiLevelBonusBlurBGImgURL)},k.prototype.onDestroy=function(){b.prototype.onDestroy.call(this),this.lastPickId=0,this.lastLevelId=1,this.selectedOptions={},this.isPickOptionsEnabled=!1,this.bonus_win_amount.setText(" ");for(var a=1;a<=this._layout.getLayoutParams().totalPickOptions.length;a++){this._layout.getLayoutParams().isMultiScreen&&(this._layout.getComponent("bonus_holder_"+a).visible=!1);for(var c=1;c<=this._layout.getLayoutParams().totalPickOptions[a-1];c++)this._layout.getComponent("pick_option_"+a+"_"+c).interactive=!1}},k.prototype.updateComponentData=function(){this.bonus_win_amount=this._layout.getComponent("bonus_win_amount"),this.bonus_win_amount.setText(" ");for(var a=1;a<=this._layout.getLayoutParams().totalPickOptions.length;a++){this._layout.getComponent("bonus_holder_"+a).visible=!this._layout.getLayoutParams().isMultiScreen;for(var b=1;b<=this._layout.getLayoutParams().totalPickOptions[a-1];b++)this._layout.getComponent("pick_option_"+a+"_"+b).interactive=!1}},k.prototype.onInteraction=function(e,f){if(b.prototype.onInteraction.call(this,e,f),this.isPickOptionsEnabled){this.isPickOptionsEnabled=!1,d.globalSounds.playCue("pickem_reveal");var g=f.split("_"),h=parseInt(g[g.length-1]);this.lastPickId=h;for(var i=this._layout.getLayoutParams().totalPickOptions[this.lastLevelId-1],j=1;j<=i;j++)this._layout.getComponent("pick_option_"+this.lastLevelId+"_"+j).interactive=!1;a.Common.ApplicationBase.instance.emit(c.ON_GET_GAME_RESULTS,{pickId:h})}},k.prototype.onGameReady=function(){b.prototype.onGameReady.call(this),f.current.getAwardedBonusPrizes()&&(this.selectedOptions=f.current.getAwardedBonusPrizes()),f.current.getBonusNextLevel()&&(this.lastLevelId=f.current.getBonusNextLevel()),f.current.isBrokenGameSate()&&($("#allbutton_wapper").hide(),$("#button_settings").hide(),$("#Autoplay_button_wrapper").hide(),$("#menu_mobile").hide(),$("#main_button_wrapper").hide(),$("#control_panel").css("pointer-events","none"),this.restoreBonusState()),this._layout.getLayoutParams().isMultiScreen&&(this._layout.getComponent("bonus_holder_"+this.lastLevelId).visible=!0);for(var a=1;a<=this._layout.getLayoutParams().totalPickOptions[this.lastLevelId-1];a++)this._layout.getComponent("pick_option_"+this.lastLevelId+"_"+a).interactive=!0},k.prototype.onResultsReady=function(){b.prototype.onResultsReady.call(this),this.selectedOptions=f.current.getAwardedBonusPrizes(),this.showBonusOption()},k.prototype.showBonusOption=function(){var b=this;if(!this.selectedOptions||!this.selectedOptions[this.lastLevelId])throw"[BonusScene] Wrong Selected Bonus Option;";var c,d=!1,i=this.selectedOptions[this.lastLevelId][this.lastPickId];i&&!isNaN(+i)&&+i>0?(c=e.format(parseFloat(i)),d=!0):c=j.getPhrase(i+"")!=i?j.getPhrase(i):j.getPhrase("collect_caps");var k=new m
;k.add(function(a){b.playAnimationBeforePick(d,a)}),k.add(function(a){b._layout.getComponent("pick_option_"+b.lastLevelId+"_"+b.lastPickId).onShowPrize(c,d,a)}),f.current.getTotalWin()>0&&k.add(function(c){b.bonus_win_amount.setText(""),b.bonus_win_amount.setText(e.format(f.current.getFeatureTotalWin())),a.Common.ApplicationBase.instance.emit(l.EVENT_WIN_PRESENTATION_START),c()}),k.add(function(a){b.playAnimationAfterPick(d,a)}),k.add(function(a){var c=f.current.getBonusNextLevel();b._layout.getLayoutParams().isMultiScreen&&b.lastLevelId!=c?(b.disableNotSelectedOption(),setTimeout(function(){b.changeBonusLevel(c,a)},2e3)):a()}),k.add(function(c){if(f.current.getNextAction()===h.MULTI_LEVEL_BONUS){var d=f.current.getBonusNextLevel(),e=b.selectedOptions[d],i=e?Object.keys(e):[];b.isPickOptionsEnabled=!0,b.lastLevelId=d;for(var j=1;j<=b._layout.getLayoutParams().totalPickOptions[b.lastLevelId-1];j++)i.indexOf(j+"")<0&&(b._layout.getComponent("pick_option_"+b.lastLevelId+"_"+j).interactive=!0)}else b.disableNotSelectedOption(),a.Core.Time.juggler.setTimeout(function(){g.showPopupScene("MULTI_LEVEL_BONUS_SUMMARY",{callback:function(){}})},2e3);c()}),k.start()},k.prototype.disableNotSelectedOption=function(){for(var a=this,b=this.selectedOptions[this.lastLevelId],c=b?Object.keys(b):[],d=[],e=Object.keys(this.selectedOptions[this.lastLevelId]).map(function(b){return a.selectedOptions[a.lastLevelId][b]}),g=f.current.getBonusPrizes(),h=0;h<g.length;h++)e.indexOf(g[h])<0&&d.push(g[h]);for(var i=0,h=1;h<=this._layout.getLayoutParams().totalPickOptions[this.lastLevelId-1];h++)if(c.indexOf(h+"")<0){var j=this._layout.getComponent("pick_option_"+this.lastLevelId+"_"+h);j.onShowDisablePrize(d[i]),i++}},k.prototype.changeBonusLevel=function(a,b){this._layout.getComponent("bonus_holder_"+this.lastLevelId).visible=!1,this._layout.getComponent("bonus_holder_"+a).visible=!0,b()},k.prototype.restoreBonusState=function(){this.bonus_win_amount.setText(""),this.bonus_win_amount.setText(e.format(f.current.getFeatureTotalWin()));for(var a=this._layout.getLayoutParams().totalPickOptions[this.lastLevelId-1],b=this.selectedOptions[this.lastLevelId],c=b?Object.keys(b):[],d=1;d<=a;d++){var g=c.indexOf(d+""),i=this._layout.getComponent("pick_option_"+this.lastLevelId+"_"+d);if(i.interactive=!1,i.visible=!0,g>=0){var k=void 0,l=!1;this.selectedOptions[d]&&!isNaN(+b[d])&&+b[d]>0?(k=e.format(parseFloat(b[d])),l=!0):k=j.getPhrase(b[d]+"")!=b[d]?j.getPhrase(b[d]):j.getPhrase("collect_caps"),i.onShowPrize(k,l)}else f.current.getNextAction()!=h.MULTI_LEVEL_BONUS?i.onShowDisablePrize(0):i.interactive=!0}},k.prototype.onGameAccepted=function(){},k.prototype.playBonusGameSound=function(){var a=d.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient,1500);void 0!=a&&a.volume(.4)},k.prototype.showBrokenFeatureWinSummary=function(){b.prototype.showBrokenFeatureWinSummary.call(this),a.Core.Renderer.SceneManager.showPopupScene("MULTI_LEVEL_BONUS_SUMMARY")},k.prototype.playAnimationBeforePick=function(a,b){b()},k.prototype.playAnimationAfterPick=function(a,b){b()},k}(k);b.MultiLevelBonusScene=n}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.CommonSceneBase,d=a.Slots.Aperture,e=a.Slots.WinManager,f=a.Common.GameEvents,g=a.Slots.SpinResults,h=a.Core.Utils.Queue,i=a.Core.SoundManager,j=a.Common.Currency,k=a.Core.Environment,l=a.Common.Server.ResponseResult,m=a.Common.Server,n=a.Core.Renderer.SceneManager,o=function(c){function o(a,b,d,e){var f=c.call(this,a,b,d,e)||this;return f.audioProfile=null,f}return __extends(o,c),o.prototype.playFeatureMusic=function(){i.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient[0],1500)},o.prototype.updateOnOrientationChange=function(){if(this._layout){c.prototype.updateOnOrientationChange.call(this);var a=this._layout.getComponent("win_amount");k.isPortrait()?(a.position=new PIXI.Point(a.getParams().startPosP.x,a.getParams().startPosP.y),$("html").css("background-image",k.defaultSettings.portraitHoldFreeSpinBgImgURL).css("background-size"," cover").css(" background-repeat","no-repeat"),this._layout.getComponent("portrait_bg").visible=!0,this._layout.getComponent("free_spins_bg").visible=!1):(a.position=new PIXI.Point(a.getParams().startPosDL.x,a.getParams().startPosDL.y),this._layout.getComponent("free_spins_bg").visible=!0,this._layout.getComponent("portrait_bg").visible=!1)}},o.prototype.onGameReady=function(){c.prototype.onGameReady.call(this),l.current.getFeatureSpinsLeft()==l.current.getFeatureTotalSpins()&&(this._aperture.visible=!0,l.current.getGameConfig().isAutoPlayDisplay()?$("#Autoplay_button_wrapper").show():$("#Autoplay_button_wrapper").hide()),this._layout.setComponentText("total_win_value",j.format(l.current.getFeatureTotalWin())),this._layout.setComponentText("spins_count",l.current.getFeatureSpinsLeft().toString()),l.current.isBrokenGameSate()&&($("#allbutton_wapper").hide(),$("#button_settings").hide(),$("#Autoplay_button_wrapper").hide(),$("#menu_mobile").hide(),$("#main_button_wrapper").hide(),l.current.getGameConfig().isAutoPlayDisplay()&&$("#button_auto_cp").show().addClass("disabled"))},o.prototype.onCreate=function(){var b=this;c.prototype.onCreate.call(this),this._aperture=this._layout.getComponent("aperture"),this._winManager=this._layout.getComponent("win_manager"),this.updateComponentData(),a.Common.ApplicationBase.instance.on(d.EVENT_REELS_SPIN_START,this.onSpinStart,this),a.Common.ApplicationBase.instance.on(d.EVENT_SYMBOL_DROPPED,this.onSymbolDropped,this),a.Common.ApplicationBase.instance.on(d.EVENT_REEL_DROPPED,this.onReelDropped,this),this._layout.triggerFX("create");for(var e=[],f=l.current.getFeatureReelModifiersSymbols(),g=0;g<this._aperture._setup.reels.length;g++){for(var h=[],i=0;i<this._aperture._setup.reels[g].symbols_per_reel+2;i++)h.push("BL");e.push(h)}f.forEach(function(a){e[a.getPosition().getReelIndex()][a.getPosition().getRowIndex()+1]=a.getSymbol()}),this._aperture.restoreAperture(e),a.Core.Time.juggler.setTimeout(function(){b._aperture.visible=!0,b.playFeatureMusic(),b.onGameAccepted()},1e3),a.Core.Time.juggler.setTimeout(function(){b.onResize(),b.visible=!0},100)},o.prototype.onResize=function(){c.prototype.onResize.call(this),this.setHTMLBackground(k.defaultSettings.holdFreeSpinBlurBGImgURL)},o.prototype.updateComponentData=function(){this._mainMovieLayer=new PIXI.Container,this.addChild(this._mainMovieLayer)},o.prototype.onResultsRequested=function(a){c.prototype.onResultsRequested.call(this,a),this._layout.setComponentText("spins_count",(l.current.getFeatureSpinsLeft()-l.current.getFeatureReTriggeredSpins()-1).toString()),this._aperture.isSpinning||(null!==this.audioProfile&&(i.globalSounds.stopCue(this.audioProfile),this.audioProfile=null),this._aperture.startSpin())},o.prototype.onStateReady=function(){l.current.getFeatureAwardedSpins()!==l.current.getFeatureSpinsLeft()&&this._layout.setComponentText("spins_count",(l.current.getFeatureSpinsLeft()-1).toString())},o.prototype.onResultsReady=function(){c.prototype.onResultsReady.call(this);var a=new g(l.current);b.FreeSpinsScene.lastResults=a,this.dropSymbols(a)},o.prototype.dropSymbols=function(a){var b=this,c=new h;c.add(function(c){b.addModifySymbolBeforeReelStop(a,c)}),c.add(function(c){b._aperture.dropSymbols(a,c)}),c.add(function(c){b._winManager.displaySpinResults(a,c)}),c.start()},o.prototype.onInteraction=function(a,b){c.prototype.onInteraction.call(this,a,b),i.globalSounds.playCue("GENERIC_CLICK")},o.prototype.onDestroy=function(){c.prototype.onDestroy.call(this),a.Common.ApplicationBase.instance.off(d.EVENT_REELS_SPIN_START,this.onSpinStart),a.Common.ApplicationBase.instance.off(d.EVENT_SYMBOL_DROPPED,this.onSymbolDropped),a.Common.ApplicationBase.instance.off(d.EVENT_REEL_DROPPED,this.onReelDropped),a.Common.ApplicationBase.instance.off(d.EVENT_REELS_DROPPED,this.onReelsDropped)},o.prototype.onReelsDropped=function(){},o.prototype.onGameAccepted=function(){this._aperture.visible=!0},o.prototype.startGame=function(){this._aperture.visible=!0,this.playFeatureMusic(),l.current.isBrokenGameSate()||(this._layout.setComponentText("spins_count",(l.current.getFeatureSpinsLeft()-1).toString()),this._layout.setComponentText("total_win_value",j.format(l.current.getTotalWin())))},o.prototype.onSummaryAccepted=function(){c.prototype.onSummaryAccepted.call(this),this.playFeatureMusic()},o.prototype.onSpinStart=function(){i.globalSounds.playCue("SPIN_BUTTON"),this._mainMovieLayer.removeChildren()},o.prototype.onContinueGame=function(){a.Core.Time.juggler.setTimeout(function(){l.current.getNextAction()==m.HOLD_FREE_SPINS&&a.Common.ApplicationBase.instance.emit(f.ON_GET_GAME_RESULTS,{bet:a.Slots.SettingsPages.BettingSetup.currentBetLevel})},1e3)},o.prototype.onReelDropped=function(a,b){b||i.globalSounds.playCue(this._layout.getLayoutParams().audio.fx.reel_drops[a.reelIndex],250,!1,.6),4==a.reelIndex&&i.globalSounds.stopCue("ReeL_spin")},o.prototype.onSymbolDropped=function(a,b){var c=a.getSymbolProfile();c.getAudioDropId()&&(i.globalSounds.stopCue(c.getAudioDropId()),i.globalSounds.playCue(c.getAudioDropId()))},o.prototype.onReelTease=function(a,b){},o.prototype.onReelTeaseEnd=function(a,b){},o.prototype.onWinsShown=function(){if(this._layout.setComponentText("total_win_value",j.format(l.current.getFeatureTotalWin())),l.current&&l.current.getAction()===m.HOLD_FREE_SPINS&&l.current.getNextAction()===m.BASE)0!==l.current.getFeatureTotalWin()?a.Core.Time.juggler.setTimeout(function(){n.showPopupScene("HOLD_FREE_SPINS_SUMMARY")},1500):(setTimeout(function(){a.Common.ApplicationBase.instance.emit(e.EVENT_SHOW_FEATURE_WIN_SUMMARY),$("#allbutton_wapper").show(),$("#Autoplay_button_wrapper").show(),$("#button_spin").css("display","block"),$("#button_settings").show(),$("#menu_mobile").show(),$("#main_button_wrapper").show()},600),a.Common.ApplicationBase.instance.emit(f.ON_RESULTS_DISPLAYED,b.FreeSpinsScene.lastResults));else if(l.current.getFeatureReTriggeredSpins()>0){var c=this._layout.getComponent("awarded_retrigger_count");c.setText(l.current.getFeatureSpinsLeft().toString()),a.Core.Time.juggler.setTimeout(function(){a.Common.ApplicationBase.instance.emit(f.ON_RESULTS_DISPLAYED,b.FreeSpinsScene.lastResults)},4500)}else a.Common.ApplicationBase.instance.emit(f.ON_RESULTS_DISPLAYED,b.FreeSpinsScene.lastResults)},o.prototype.addModifySymbolBeforeReelStop=function(a,b){this._winManager.addModifySymbolBeforeReelStop(a,b)},o.prototype.showBrokenFeatureWinSummary=function(){c.prototype.showBrokenFeatureWinSummary.call(this),a.Core.Renderer.SceneManager.showPopupScene("HOLD_FREE_SPINS_SUMMARY")},o}(c);b.HoldFreeSpinsScene=o}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.GameEvents,d=a.Core.SoundManager,e=a.Core.Renderer.Scene,f=a.Core.Lang,g=a.Common.Server.ResponseResult,h=a.Core.Utils.Queue,i=function(b){function e(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.prevJackpotValues={grand:0,major:0,minor:0,mini:0},f}return __extends(e,b),e.prototype.onCreate=function(){var c=this;b.prototype.onCreate.call(this),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!0),this.on(a.Core.Events.ON_INTERACTION,this.onResultDisplay.bind(this)),this.sectionGraphic=new PIXI.Graphics,this.textContainer=new PIXI.Container,this.wheel=new PIXI.Container,this.rotateDuration=this._layout.getLayoutParams().rotateDuration||7,this.stopDuration=this._layout.getLayoutParams().stopDuration||4,this.stopDelayDuration=this._layout.getLayoutParams().stopDelayDuration||3,this.borderColor=this._layout.getLayoutParams().borderColor||16777215,this.sectionColors=this._layout.getLayoutParams().sectionColors||0,this.sectionTexts=this._layout.getLayoutParams().sectionTexts,this.radius=this._layout.getLayoutParams().radius||250,this.numberOfSectors=this._layout.getLayoutParams().numberOfSectors||8,this.piTwo=1.5*Math.PI,this.radiansPerSector=this.piTwo/this.numberOfSectors,this.updateComponentData(),g.current.getJackpotValues()&&(this.jackGrandMeter=this._layout.getComponent("jack_diamond_meter_value"),this.jackMajorMeter=this._layout.getComponent("jack_gold_meter_value"),this.jackMinorMeter=this._layout.getComponent("jack_silver_meter_value"),this.jackMiniMeter=this._layout.getComponent("jack_bronze_meter_value"),this.prevJackpotValues=g.current.getJackpotValues(),this.updateJackpotWheelMeterValues()),this.visible=!1,setTimeout(function(){c.onResize(),c.visible=!0},100),this.on(a.Core.Events.ON_INTERACTION,function(a,b){"spin_button_anim"==b&&(this.startWheelSpin(),this._layout.getComponent("spin_button_anim").interactive=!1)}.bind(this))},e.prototype.onResultDisplay=function(){d.globalSounds.playCue("GENERIC_CLICK"),this.off(a.Core.Events.ON_INTERACTION,this.onResultDisplay.bind(this))},e.prototype.startWheelSpin=function(){var a=this;this._layout.getComponent("wheel_assets_normal").visible=!1,this._layout.getComponent("wheel_assets_glow").visible=!0,this.wheel=this._layout.getComponent("main_wheel_spin"),this.wheel.rotation=0;var b=5*(this.piTwo+this.finalPosition()),c=new TimelineMax;c.to(this.wheel,this.rotateDuration,{rotation:"+="+b,ease:Back.easeOut}),TweenLite.to(c,this.stopDuration,{timeScale:0,ease:Linear.easeNone,delay:this.stopDelayDuration,onComplete:function(){var b=a._layout.getComponent("win_section");b.visible=!0,b.clip.loop=!1,b.clip.gotoAndPlay(0),b.clip.onComplete=function(){a.processJackpotLevel();var c=a._layout.getComponent("win_starting_glow");c.visible=!0,c.clip.loop=!1,c.clip.gotoAndPlay(0),c.clip.onComplete=function(){b.visible=!1,c.visible=!1,a.onWheelStopped()}}}})},e.prototype.handleJackpotLevel=function(a){var b=this._layout.getComponent(a);b&&(b.visible=!0,b.alpha=0,TweenLite.to(b,.5,{alpha:1,ease:Linear.easeIn,onComplete:function(){}}))},e.prototype.processJackpotLevel=function(){switch(g.current.getJackpotData().level){case"grand":this.handleJackpotLevel("JP_diamond_meters_win");break;case"major":this.handleJackpotLevel("JP_gold_meters_win");break;case"minor":this.handleJackpotLevel("JP_silver_meters_win");break;case"mini":this.handleJackpotLevel("JP_bronze_meters_win")}},e.prototype.onWheelStopped=function(){var a=new h;a.add(function(a){this.showFeatureWinSummary()}.bind(this)),a.start()},e.prototype.showFeatureWinSummary=function(){var b=this,d=new h,e=g.current.getJackpotData().win;e>0&&(a.Common.ApplicationBase.instance.emit(c.ADD_CELEBRATIONS,e,d),d.add(function(c){a.Core.Time.juggler.setTimeout(function(){b.showWinTextAnimation(e),c()},200)})),d.start(function(){var b=this;a.Core.Time.juggler.setTimeout(function(){a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.UPDATE_BALACE,g.current.getBalance()),a.Core.Renderer.SceneManager.closeOverlay(),a.Core.Time.juggler.setTimeout(function(){b.onFinish&&b.onFinish()},600)},2e3)}.bind(this))},e.prototype.showWinTextAnimation=function(b){var c=this._layout.getComponent("win_amount");c.visible=!0,c.setText(a.Common.Currency.format(b,!0)),a.Core.Environment.isPortrait()?c.position=new PIXI.Point(c.getParams().startPosP.x,c.getParams().startPosP.y):c.position=new PIXI.Point(c.getParams().startPosDL.x,c.getParams().startPosDL.y);var e=new PIXI.Point(c.position.x,c.position.y),f=new TimelineLite;if(c.scale.x=.2,c.scale.y=.2,d.globalSounds.playCue("counting_up_FreeGame"),a.Core.Environment.isDesktop()){var g=c.getParams().endPos;f.add(TweenLite.to(c.scale,1.5,{x:.6,y:.6,ease:Cubic.easeOut})),f.add([TweenLite.to(c.position,.3,{x:g.x,y:g.y,ease:Cubic.easeIn}),TweenLite.to(c.scale,.3,{x:.2,y:.2,ease:Cubic.easeOut,onComplete:function(){c.position=e,c.visible=!1}})])}else f.add(TweenLite.to(c.scale,1.5,{x:.6,y:.6,ease:Cubic.easeOut,onComplete:function(){c.position=e,c.visible=!1}}))},e.prototype.updateJackpotWheelMeterValues=function(b){var c=this;if(this.jackGrandMeter&&g.current&&g.current.getJackpotValues()){var d=g.current.getJackpotValues(),e={win:Number(this.prevJackpotValues.grand)},f={win:Number(this.prevJackpotValues.major)},h={win:Number(this.prevJackpotValues.minor)},i={win:Number(this.prevJackpotValues.mini)};TweenLite.to(e,.5,{win:d.grand,ease:Cubic.easeOut,onUpdate:function(){c.jackGrandMeter.setText(a.Common.Currency.format(Number(e.win)))},onComplete:function(){c.jackGrandMeter.setText(a.Common.Currency.format(Number(d.grand)))}}),TweenLite.to(f,.5,{win:d.major,ease:Cubic.easeOut,onUpdate:function(){c.jackMajorMeter.setText(a.Common.Currency.format(Number(f.win)))},onComplete:function(){c.jackMajorMeter.setText(a.Common.Currency.format(Number(d.major)))}}),TweenLite.to(h,.5,{win:d.minor,ease:Cubic.easeOut,onUpdate:function(){c.jackMinorMeter.setText(a.Common.Currency.format(Number(h.win)))},onComplete:function(){c.jackMinorMeter.setText(a.Common.Currency.format(Number(d.minor)))}}),TweenLite.to(i,.5,{win:d.mini,ease:Cubic.easeOut,onUpdate:function(){c.jackMiniMeter.setText(a.Common.Currency.format(Number(i.win)))},onComplete:function(){c.jackMiniMeter.setText(a.Common.Currency.format(Number(d.mini)))}}),this.prevJackpotValues=d}b&&b()},e.prototype.updateComponentData=function(){for(var a=0;a<this.numberOfSectors;a+=1){var b=a*this.radiansPerSector-this.radiansPerSector/2,c=b+this.radiansPerSector,d=void 0;d="number"==typeof this.sectionColors?0:this.sectionColors[a],this.sectionGraphic.beginFill(d),this.sectionGraphic.lineStyle(2,this.borderColor,1),this.sectionGraphic.moveTo(0,0),this.sectionGraphic.arc(0,0,this.radius,b,c),this.sectionGraphic.lineTo(0,0),this.createSectorText(a)}var e=new PIXI.Sprite(this._assets.getPIXITexture("wheel_back_idle"));e.anchor.set(.5),this.wheel.pivot.set(250,250),this.wheel.position.set(250,250),this.wheel.addChild(e),this.wheel.addChild(this.textContainer),this.wheel.buttonMode=!0,this.wheel.interactive=!0},e.prototype.createSectorText=function(a){var b="";this.sectionTexts&&a<this.sectionTexts.length&&(b=f.getPhrase(this.sectionTexts[a]));var c=new PIXI.Text(b,{fill:"#FFFFFF"});c.visible=!0;var d=a*this.radiansPerSector,e=(this.radius-30)/this.radius;c.anchor.set(0,.5),c.rotation=d+Math.PI,c.position.x=250+this.radius*e*Math.cos(d),c.position.y=250+this.radius*e*Math.sin(d),this.textContainer.addChild(c)},e.prototype.finalPosition=function(){var a=g.current.getJackpotData().level,b=this.getChoosenSectorAndAdjustmentFactor(a),c=b.choosenSector,d=b.anchorAdjustmentFactor;return this.calculateRotation(c)-this.wheel.rotation-d},e.prototype.getChoosenSectorAndAdjustmentFactor=function(a){var b,c;switch(a){case"grand":b=3,c=Math.PI/2.42;break;case"major":b=2,c=Math.PI/2.2;break;case"minor":b=1,c=Math.PI/1.99;break;case"mini":b=4,c=Math.PI/2.71;break;default:b=0,c=0}return{choosenSector:b,anchorAdjustmentFactor:c}},e.prototype.calculateRotation=function(a){return a*this.radiansPerSector+this.radiansPerSector/2},e}(e);b.WheelBonusScene=i}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Slots.WinManager,d=a.Core.SoundManager,e=a.Common.Currency,f=a.Core.Renderer.Scene,g=a.Core.Lang,h=a.Common.Server.ResponseResult,i=a.Common.GameEvents,j=a.Core.Environment,k=a.Core.Renderer.SceneManager,l=function(f){function l(a,b,c,d){return f.call(this,a,b,c,d)||this}return __extends(l,f),l.prototype.onCreate=function(){var b=this;f.prototype.onCreate.call(this),d.globalSounds.stopMusic(),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0),d.globalSounds.playCue("SUMMARY",0,!0),this._layout.triggerFX("create"),this.interactive=!0,this.interactiveChildren=!0,this.on(a.Core.Events.ON_INTERACTION,this.onContinue.bind(this)),this.updateComponentData(),this.visible=!1,setTimeout(function(){b.onResize(),b.visible=!0},100)},l.prototype.onContinue=function(){d.globalSounds.playCue("GENERIC_CLICK"),d.globalSounds.stopCue("SUMMARY"),a.Core.Environment.playVibrate(),this.interactive=!1,this.interactiveChildren=!1,this.off(a.Core.Events.ON_INTERACTION,this.onContinue),a.Core.Renderer.SceneManager.closePopupScene(),j.isDesktop()?(k.showSceneAsOverlay("TRANSITION",void 0,void 0,void 0,void 0,function(){a.Common.ApplicationBase.instance.emit(c.EVENT_SHOW_FEATURE_WIN_SUMMARY)}),setTimeout(function(){a.Common.ApplicationBase.instance.emit(i.ON_RESULTS_DISPLAYED,b.FreeSpinsScene.lastResults)},this._layout.getLayoutParams().nextSceneDelay||1)):(setTimeout(function(){a.Common.ApplicationBase.instance.emit(c.EVENT_SHOW_FEATURE_WIN_SUMMARY)},600),a.Common.ApplicationBase.instance.emit(i.ON_RESULTS_DISPLAYED,b.FreeSpinsScene.lastResults)),this._data&&this._data.callback()},l.prototype.updateComponentData=function(){this._layout.getComponent("win_amount")&&this._layout.setComponentText("win_amount",g.getPhrase("feature_pays_x_caps",{win:e.format(h.current.getFeatureTotalWin())}))},l}(f);b.FeatureSummaryScene=l}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.GameEvents,d=a.Core.SoundManager,e=a.Core.Lang,f=a.Common.Server.ResponseResult,g=a.Core.Renderer.Scene,h=a.Core.Renderer.SceneManager,i=a.Core.Environment,j=function(b){function g(a,c,d,e){return b.call(this,a,c,d,e)||this}return __extends(g,b),g.prototype.onCreate=function(){var f=this;b.prototype.onCreate.call(this),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!0),this.on(a.Core.Events.ON_INTERACTION,this.onContinue),a.Common.ApplicationBase.instance.emit(c.ON_PLAYER_PROMPT,e.getPhrase("")),d.globalSounds.playCue("INTRO",0,!0),this.updateComponentData(),this.visible=!1,setTimeout(function(){f.onResize(),f.visible=!0},100)},g.prototype.onContinue=function(){d.globalSounds.playCue("GENERIC_CLICK"),this.off(a.Core.Events.ON_INTERACTION,this.onContinue),a.Core.Renderer.SceneManager.closePopupScene(),i.isDesktop()&&h.showSceneAsOverlay("TRANSITION"),setTimeout(function(){a.Common.ApplicationBase.instance.emit(c.ON_RESULTS_DISPLAYED)},this._layout.getLayoutParams().nextSceneDelay||1)},g.prototype.updateComponentData=function(){this._layout.getComponent("awarded_spin_count")&&f.current.getFeatureAwardedSpins()&&this._layout.setComponentText("awarded_spin_count",f.current.getFeatureAwardedSpins().toString()),this._layout.getComponent("awarded_multiplier")&&f.current.getFeatureAwardedMultiplier()&&this._layout.setComponentText("awarded_multiplier",e.getPhrase("awarded_multiplier",{multiplier:f.current.getFeatureAwardedMultiplier()}))},g}(g);b.FeatureIntroScene=j}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.GameEvents,d=a.Core.SoundManager,e=a.Core.Lang,f=a.Core.Renderer.Scene,g=function(b){function f(a,c,d,e){return b.call(this,a,c,d,e)||this}return __extends(f,b),f.prototype.onCreate=function(){b.prototype.onCreate.call(this),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!0),this.on(a.Core.Events.ON_INTERACTION,this.onContinue),a.Common.ApplicationBase.instance.emit(c.ON_PLAYER_PROMPT,e.getPhrase("")),this.updateComponentData(),this.onResize(),this.visible=!0},f.prototype.onContinue=function(){},f.prototype.updateComponentData=function(){var b=this,c=this._layout.getComponent("transition");c.visible=!0,c.clip.loop=!1,c.clip.gotoAndPlay(0),d.globalSounds.playCue("transition_sound"),c.clip.onComplete=function(){c.visible=!1,a.Core.Renderer.SceneManager.closeOverlay(),b.onFinish&&b.onFinish()}},f}(f);b.FeatureTransitionScene=g}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Renderer.Scene,d=a.Core.SoundManager,e=a.Common.Currency,f=a.Core.Environment,g=a.Core.Utils.Queue,h=a.Core.Renderer.FX.Floating,i=function(b){function c(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.winTickUp=0,f}return __extends(c,b),c.prototype.onCreate=function(){var b=this;this._layout.triggerFX("create"),d.globalSounds.startMusic(this._layout.getLayoutParams().audio,0,!1,!1),this.updateComponentData(),this._cancelSkip=a.Core.Utils.touchToSkip(function(){b.onSkipped()}),this.onResize(),this.visible=!0},c.prototype.onSkipped=function(){this._cancelSkip(),d.globalSounds.stopMusic(),this._animInterval&&clearInterval(this._animInterval),this._tweenRollUp&&this._tweenRollUp.kill(),this._imageAnim&&this._imageAnim.updateState(!1),a.Core.Renderer.SceneManager.closeOverlay(),this.visible=!1,this._data.OnComplete(),this._data.callback()},c.prototype.animationText=function(b,c){var d=new g;d.add(function(d){a.Core.Renderer.UI.FX.popOut(b,500),a.Core.Renderer.UI.FX.popOut(c,100),a.Core.Time.juggler.setTimeout(function(){d()},1e3)}),d.add(function(a){var d=0,e=0,f=setInterval(function(){e++;var g=.004*Math.sin(d);b.scale.x+=g,b.scale.y+=g,g=.004*Math.sin(d+10),c.scale.x+=g,c.scale.y+=g,d+=.06,200==e&&(clearInterval(f),a())},0)}),d.start()},c.prototype.animateImage=function(a){this._imageAnim=new h(a,!0,35,50,35,50,0,1,2,3,0,.05)},c.prototype.updateComponentData=function(){var b=this,c=this._layout.getComponent("win_text");switch(this._sceneProfile.id){case"MEGA_WIN":case"SUPER_WIN":this.winTickUp=this._data.tickupStart;break;default:this.winTickUp=0}var d,g,h={win:this.winTickUp};"en"==f.launchVariables.language?(d=this._layout.getComponent("win_type_anim_en"),d.visible=!0,this.animateImage(d)):(d=this._layout.getComponent("win_type_text"),d.visible=!0,g=this._layout.getComponent("win_amount_text"),g.visible=!0,this.animationText(d,g)),this._tweenRollUp=TweenLite.to(h,this._layout.getLayoutParams().rollup_duration,{win:this._data.win,ease:Cubic.easeOut,onUpdate:function(){c.setText(e.format(h.win,!0))},onComplete:function(){a.Core.Time.juggler.setTimeout(b.onSkipped.bind(b),10)}})},c}(c);b.CelebrationScene=i}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Renderer.Scene,d=a.Core.SoundManager,e=a.Common.Currency,f=a.Core.Environment,g=a.Common.Server.ResponseResult,h=a.Core.Events,i=a.Core.Renderer.SceneManager,j=a.Common.Server,k=function(b){function c(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.centerCard=!1,f.HistoryVisible=!1,f}return __extends(c,b),c.prototype.updateOnOrientationChange=function(){b.prototype.updateOnOrientationChange.call(this),f.isDesktop()||f.isLandscape()?(this._layout.getComponent("gamble_holder").position=new PIXI.Point(26,20),this._layout.getComponent("gamble_holder").scale=new PIXI.Point(.975,.975),"en"===f.launchVariables.language.toLowerCase()||"escl"===f.launchVariables.language.toLowerCase()?(this._layout.getComponent("collect").position=new PIXI.Point(1756.8000000000002,910.4399999999999),this._layout.getComponent("collect").scale=new PIXI.Point(1,1)):(this._layout.getComponent("collect_lang").position=new PIXI.Point(1756.8000000000002,910.4399999999999),this._layout.getComponent("collect_lang").scale=new PIXI.Point(1,1))):(this._layout.getComponent("gamble_holder").position=new PIXI.Point(-330.12,875),this._layout.getComponent("gamble_holder").scale=new PIXI.Point(1.26,1.26),"en"===f.launchVariables.language.toLowerCase()||"escl"===f.launchVariables.language.toLowerCase()?(this._layout.getComponent("collect").position=new PIXI.Point(1515.6000000000001,2217.24),this._layout.getComponent("collect").scale=new PIXI.Point(1.5,1.5)):(this._layout.getComponent("collect_lang").position=new PIXI.Point(1515.6000000000001,2217.24),this._layout.getComponent("collect_lang").scale=new PIXI.Point(1.5,1.5)))},c.prototype.onCreate=function(){var b=this;if(this._layout.triggerFX("create"),a.Common.ApplicationBase.instance.on(a.Common.GameEvents.ON_UPDATE_GAMBLE,this.ShowGamble,this),this.pickCounter=5,this.centerCard=!1,this.HistoryVisible=!1,"en"===f.launchVariables.language.toLowerCase()||"escl"===f.launchVariables.language.toLowerCase())this._layout.getComponent("collect").visible=!0,this._layout.getComponent("collect").interactive=!0;else{this.button=["collect_lang"];for(var c=0;c<=this.button.length-1;c++){var e=this._layout.getComponent(""+this.button[c]);e.getLabel().position=new PIXI.Point(239,76),"hu"===f.launchVariables.language.toLowerCase()||"it"===f.launchVariables.language.toLowerCase()?(e.getLabel().scale.x=.5,e.getLabel().scale.y=.5,e.getLabel().x-=55,e.getLabel().y-=5):"ro"===f.launchVariables.language.toLowerCase()?(e.getLabel().scale.x=.6,e.getLabel().scale.y=.6,e.getLabel().x-=40,e.getLabel().y-=5):"vi"===f.launchVariables.language?(e.getLabel().scale.x=.8,e.getLabel().scale.y=.8,e.getLabel().x-=10,e.getLabel().y-=5):"cs"===f.launchVariables.language||"fi"===f.launchVariables.language||"ru"===f.launchVariables.language||"sk"===f.launchVariables.language?(e.getLabel().scale.x=.8,e.getLabel().scale.y=.8,e.getLabel().x-=32,e.getLabel().y-=5):"da"===f.launchVariables.language||"ja"===f.launchVariables.language?(e.getLabel().scale.x=.8,e.getLabel().scale.y=.8,e.getLabel().x-=55,e.getLabel().y-=5):"tr"==f.launchVariables.language.toLowerCase()?(e.getLabel().scale.x=.8,e.getLabel().scale.y=.8,e.getLabel().x-=75,e.getLabel().y-=5):"zhhans"==f.launchVariables.language.toLowerCase()||"zhhant"==f.launchVariables.language.toLowerCase()?(e.getLabel().scale.x=.8,e.getLabel().scale.y=.8,e.getLabel().x-=65,e.getLabel().y-=5):"no"==f.launchVariables.language.toLowerCase()||"sv"==f.launchVariables.language.toLowerCase()?(e.getLabel().scale.x=.8,e.getLabel().scale.y=.8,e.getLabel().x-=45,e.getLabel().y-=5):"de"==f.launchVariables.language.toLowerCase()||"nl"==f.launchVariables.language.toLowerCase()?(e.getLabel().scale.x=.8,e.getLabel().scale.y=.8,e.getLabel().x+=10,e.getLabel().y-=5):"fr"==f.launchVariables.language.toLowerCase()?(e.getLabel().scale.x=.8,e.getLabel().scale.y=.8,e.getLabel().x-=1,e.getLabel().y-=5):(e.getLabel().scale.x=.8,e.getLabel().scale.y=.8,e.getLabel().x-=25,e.getLabel().y-=5),e.visible=!0,
e.interactive=!0}}a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.ON_UPDATE_GAMBLE),this.on(h.ON_INTERACTION,function(c,e){d.globalSounds.playCue("GENERIC_CLICK"),"head_button"==e&&(b.pickCounter=b.pickCounter-1,b.centerCard=!0,b.HistoryVisible=!1,d.globalSounds.playCue("GENERIC_CLICK"),b._layout.getComponent("head_button").visible=!1,b._layout.getComponent("gamble_head_text").visible=!1,b._layout.getComponent("tail_button").visible=!1,b._layout.getComponent("gamble_tail_text").visible=!1,a.Core.Time.juggler.setTimeout(function(){b._layout.getComponent("head_button").visible=!1,b._layout.getComponent("gamble_head_text").visible=!1,b._layout.getComponent("tail_button").visible=!1,b._layout.getComponent("gamble_tail_text").visible=!1,a.Common.ApplicationBase.instance.emit(a.Common.Server.SEND_GAMBLE_BUTTON_REQUEST,{gamble:"head"})},500)),"tail_button"==e?(b.pickCounter=b.pickCounter-1,b.centerCard=!0,b.HistoryVisible=!1,d.globalSounds.playCue("GENERIC_CLICK"),b._layout.getComponent("head_button").visible=!1,b._layout.getComponent("gamble_head_text").visible=!1,b._layout.getComponent("tail_button").visible=!1,b._layout.getComponent("gamble_tail_text").visible=!1,a.Core.Time.juggler.setTimeout(function(){b._layout.getComponent("head_button").visible=!1,b._layout.getComponent("gamble_head_text").visible=!1,b._layout.getComponent("tail_button").visible=!1,b._layout.getComponent("gamble_tail_text").visible=!1,a.Common.ApplicationBase.instance.emit(a.Common.Server.SEND_GAMBLE_BUTTON_REQUEST,{gamble:"tail"})},500)):"collect"==e||"collect_lang"==e?($("#cp_win").text(""),a.Common.ApplicationBase.instance.emit(a.Common.Server.SEND_GAMBLE_BUTTON_REQUEST,{gamble:"collect"}),i.closeOverlay(),a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.GAMBLE_EXIT),a.Common.Server.isGamble=!1):"spin_N_collect"!=e&&"collect"!=e||$("#button_spin_collect").trigger("click")}),this.visible=!1,setTimeout(function(){b.onResize(),b.visible=!0},0),setTimeout(function(){"en"==f.launchVariables.language.toLowerCase()||"escl"==f.launchVariables.language.toLowerCase()?b._layout.getComponent("collect").interactive=!0:b._layout.getComponent("collect_lang").interactive=!0},100)},c.prototype.ShowGamble=function(){var a=this;"de"==f.launchVariables.language.toLowerCase()||"el"==f.launchVariables.language.toLowerCase()||"fi"==f.launchVariables.language.toLowerCase()||"hu"==f.launchVariables.language.toLowerCase()||"it"==f.launchVariables.language.toLowerCase()||"ro"==f.launchVariables.language.toLowerCase()||"tr"==f.launchVariables.language.toLowerCase()||"vi"==f.launchVariables.language.toLowerCase()?(this._layout.getComponent("gamble_amount_win_text").scale=new PIXI.Point(.8,.8),this._layout.getComponent("gamble_amount_text").scale=new PIXI.Point(.8,.8),this._layout.getComponent("gamble").scale=new PIXI.Point(.8,.8)):(this._layout.getComponent("gamble_amount_win_text").scale=new PIXI.Point(1,1),this._layout.getComponent("gamble_amount_text").scale=new PIXI.Point(1,1),this._layout.getComponent("gamble").scale=new PIXI.Point(1,1));var b,c=g.current.getGambleCard();if("head"==c?(b="t_to_h","en"==f.launchVariables.language.toLowerCase()||"escl"==f.launchVariables.language.toLowerCase()?this._layout.getComponent("collect").interactive=!1:this._layout.getComponent("collect_lang").interactive=!1):"tail"==c&&(b="h_to_t","en"==f.launchVariables.language.toLowerCase()||"escl"==f.launchVariables.language.toLowerCase()?this._layout.getComponent("collect").interactive=!1:this._layout.getComponent("collect_lang").interactive=!1),this.centerCard){var d=this._layout.getComponent(b);d.visible=!0,d.clip.loop=!1,d.clip.gotoAndPlay(0),d.clip.onComplete=function(){var b=a._layout.getComponent("coin_back_smock");b.visible=!0,b.clip.loop=!1,b.clip.gotoAndPlay(0),b.clip.onComplete=function(){b.visible=!1},a.HistoryVisible=!0,a._layout.setComponentText("gamble_amount_value",e.format(g.current.getGambleTotalWin())),a._layout.setComponentText("gamble_amount_win_value",e.format(g.current.getGambleToWin())),a._layout.setComponentText("gamble_attempt_value",a.pickCounter.toString()),g.current.getNextAction()===j.GAMBLE&&a.HistoryVisible&&setTimeout(function(){a._layout.getComponent("head_button").visible=!0,a._layout.getComponent("gamble_head_text").visible=!0,a._layout.getComponent("tail_button").visible=!0,a._layout.getComponent("gamble_tail_text").visible=!0,"en"==f.launchVariables.language.toLowerCase()||"escl"==f.launchVariables.language.toLowerCase()?a._layout.getComponent("collect").interactive=!0:a._layout.getComponent("collect_lang").interactive=!0,d.visible=!1},1e3),void 0!=g.current.getGamblePreviousCards()&&0!=g.current.getGamblePreviousCards().length&&a.ShowHistory()}}else this._layout.setComponentText("gamble_amount_value",e.format(g.current.getGambleTotalWin())),this._layout.setComponentText("gamble_amount_win_value",e.format(g.current.getGambleToWin())),this._layout.setComponentText("gamble_attempt_value",this.pickCounter.toString()),g.current.getNextAction()===j.GAMBLE&&setTimeout(function(){a._layout.getComponent("head_button").visible=!0,a._layout.getComponent("gamble_head_text").visible=!0,a._layout.getComponent("tail_button").visible=!0,a._layout.getComponent("gamble_tail_text").visible=!0},1e3),void 0!=g.current.getGamblePreviousCards()&&0!=g.current.getGamblePreviousCards().length&&this.ShowHistory()},c.prototype.ShowHistory=function(){for(var b=g.current.getGamblePreviousCards(),c=0;c<b.length;c++){this._layout.getComponent("position_"+(c+1)).texture=this._assets.getPIXITexture(b[c])}g.current.getAction()==j.BASE&&g.current.getNextAction()==j.BASE&&setTimeout(function(){i.closeOverlay(),a.Common.Server.isGambleExit=!1,a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.GAMBLE_EXIT),a.Common.Server.isGamble=!1},1500)},c.prototype.onDestroy=function(){b.prototype.onDestroy.call(this),a.Common.ApplicationBase.instance.off(a.Common.GameEvents.ON_UPDATE_GAMBLE)},c}(c);b.GambleScene=k}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Lang,d=a.Core.HTML,e=a.Core.Events,f=a.Core.Utils.Queue,g=a.Core.Environment,h=a.Core.HTML.PageManager,i=a.Core.AssetManager,j=a.Core.Renderer.SceneManager,k=a.Common.Server.ResponseAlert,l=a.Common.Server.ResponseResult,m=function(m){function n(a){var b=m.call(this)||this;return g.defaultSettings=a,b}return __extends(n,m),n.prototype.init=function(){var b=this;n.instance=this;var c=new f;c.add(function(a){$.getJSON("./package.json?v=##version##",function(b){n.version=b.version,a()})}),c.add(function(c){a.Core.init(b.onAppInit.bind(b)),c()}),c.start()},n.prototype.onAppInit=function(f,j){g.gameConfig=f,a.Core.Events.coreEvents.on(e.ON_APP_RESIZE,this.onAppResize),a.Core.Events.coreEvents.on(e.ON_APP_LOSE_FOCUS,this.onAppLoseFocus),a.Core.Events.coreEvents.on(e.ON_APP_GET_FOCUS,this.onAppGetFocus),a.Core.Events.coreEvents.on(e.ON_APP_EXCEPTION,this.onAppException),a.Core.Events.coreEvents.on(e.ON_APP_EXIT,this.onAppExit),n.instance.on(b.Server.HANDLE_ALERT_RESPONSE,this.onServerAlert,this),n.instance.on(b.Server.HANDLE_RESULT_RESPONSE,this.onServerResults,this),n.instance.on(b.GameEvents.ON_GET_GAME_RESULTS,this.onGetGameResults,this),n.instance.on(b.Server.HANDLE_INIT_RESPONSE,this.onServerInitResponse,this),n.instance.on(b.GameEvents.ON_GAME_READY,this.onGameReady,this),n.instance.on(b.GameEvents.ON_RESULTS_DISPLAYED,this.onGameResultsDisplayed,this),e.coreEvents.on(h.EVENT_ON_PAGE_LOADED,function(a){"loader"==a.getId()&&($("#logo_holder").hide(),$("#loader").hide(),d.getPageManager("MAIN").showPage("loader"),a.changeParent("body"),$("#remove_after_load").css("display","none"))});var k=!1,l=new a.Core.Utils.Queue;l.add(function(a){c.loadDictionary(g.launchVariables.language,a)}),l.add(function(a){$("body").append("<div id='game_wrapper'></div>"),window.vex.registerPlugin(window.vexDialog),window.vex.defaultOptions.className="vex-theme-plain",a()}),l.add(function(a){window.WebFont.load({custom:{families:f.fonts}}),a()}),l.add(function(a){g.setVariant([g.DEVICE_MOBILE,g.DEVICE_DESKTOP],g.launchVariables.variant),a()}),l.add(function(a){d.getPageManager("MAIN").loadPages(f.html_pages,function(a,b){},function(){a()})}),l.add(function(b){a.Slots.SettingsPages.Settings.loadGameRules(b)}),l.add(function(b){a.Core.Renderer.SceneManager.init(f.scenes),b()}),l.add(function(a){j(a)}),l.add(function(a){b.Server.createServerConnection(f.server,a)});var m=f.assets_manifests;n.instance.emit(b.GameEvents.ON_LOAD_PROGRESS,0);for(var o=100/m.length,p=0;p<m.length;p++)!function(a){var c=m[a];l.add(function(d){i.get(c).load(c,function(){k||a!=m.length-1?d():(k=!0,n.instance.emit(b.Server.SEND_LOAD_COMPLETED),d())},function(c){var d=(a*o+o*c)/100;k||n.instance.emit(b.GameEvents.ON_LOAD_PROGRESS,d)}.bind(this))})}(p);l.add(function(a){n.instance.emit(b.Server.SEND_START_REQUEST,this),a()}),l.start()},n.prototype.onServerInitResponse=function(d){a.Common.SceneProfile.init(d),b.Currency.currencyCode=l.current.getGameConfig().getCurrencyCode(),b.Currency.currencyDecimalPlaces=l.current.getGameConfig().getCurrencyDecimalPlaces(),b.Currency.localeId=l.current.getGameConfig().getLocaleId(),b.Currency.useGrouping=l.current.getGameConfig().isUseGrouping(),b.PlayerMonitoring.init(),c.scanDOM(),l.current.getGameConfig().getRTP()?($("#demo").show(),$("#demo").html(function(){return $(this).html().replace("rtp",l.current.getGameConfig().getRTP()+"%")})):$("#demo").hide(),this.changeGameScene(!0)},n.prototype.changeGameScene=function(c){void 0===c&&(c=!1);var e=j.getSceneData(c?l.current.getAction():l.current.getNextAction());e||(e=j.getSceneData(b.Server.BASE)),a.Core.Time.juggler.setTimeout(function(){j.showScene(e.id,{data:l.current},function(e,f){f&&l.current.getNextAction()!=b.Server.BASE&&a.Core.Time.juggler.setTimeout(function(){d.getPageManager("MAIN").showPage("main"),$("#remove_after_load_free").css("display","none"),$(".loadingText").css("display","none"),$(".start_Load").css("display","none"),$(".start_spinner_free").css("display","none"),$("#logo_holder").hide(),$("#loader").hide()},200),l.current.isBrokenGameSate()||n.instance.emit(b.GameEvents.ON_GAME_CHANGED),n.instance.emit(b.GameEvents.ON_GAME_READY),c&&(a.Core.Time.juggler.setTimeout(function(){d.getPageManager("MAIN").showPage("main")},1e3),n.instance.emit(b.GameEvents.ON_GAME_INITIALIZED),l.current.isBrokenGameSate()?n.instance.emit(a.Common.PlayerMonitoring.EVENT_ALARM_BROKEN_MSG):l.current.getNextAction()===b.Server.BASE&&j.showSceneAsOverlay(b.Server.SPLASH))})},500)},n.prototype.onGameReady=function(){l.current.isBrokenGameSate()?l.current.getNextAction()==b.Server.RE_SPIN&&n.instance.emit(b.GameEvents.ON_CONTINUE_GAME):n.instance.emit(b.GameEvents.ON_CONTINUE_GAME)},n.prototype.onServerAlert=function(a){a.isFatal?d.getPageManager("MAIN").showPage("error",a):window.vex.dialog.alert(a.getPlayerMessage())},n.prototype.onServerResults=function(){n.instance.emit(b.GameEvents.ON_RESULTS_READY,!1)},n.prototype.onGetGameResults=function(a){a.isBroken?l.current.getAction()===b.Server.BASE||l.current.getNextAction()===b.Server.BASE?n.instance.emit(b.Server.SEND_PlAY_REQUEST,a):(a.isBroken=void 0,n.instance.emit(b.Server.SEND_CONTINUE_REQUEST,a)):l.current.getNextAction()===b.Server.BASE?n.instance.emit(b.Server.SEND_PlAY_REQUEST,a):n.instance.emit(b.Server.SEND_CONTINUE_REQUEST,a),n.instance.emit(b.Server.REQUEST_RESULTS,a)},n.prototype.onGameResultsDisplayed=function(){n.instance.emit(b.GameEvents.ON_CONTINUE_GAME),l.current.getAction()===l.current.getNextAction()||l.current.getAction()===b.Server.BASE&&l.current.getNextAction()===b.Server.GAMBLE||l.current.getAction()===b.Server.BASE&&l.current.getNextAction()===b.Server.RE_SPIN||l.current.getAction()===b.Server.GAMBLE&&l.current.getNextAction()===b.Server.BASE||l.current.getAction()===b.Server.RE_SPIN&&l.current.getNextAction()===b.Server.BASE||this.changeGameScene(!1),l.current.getAction().includes(b.Server.FREE_SPINS)&&l.current.getNextAction().includes(b.Server.FREE_SPINS)&&($("#bet_button_wrapper").hide(),$("#Autoplay_button_wrapper").hide())},n.prototype.onAppExit=function(){a.Core.Events.coreEvents.off(e.ON_APP_RESIZE,this.onAppResize),a.Core.Events.coreEvents.off(e.ON_APP_LOSE_FOCUS,this.onAppLoseFocus),a.Core.Events.coreEvents.off(e.ON_APP_GET_FOCUS,this.onAppGetFocus),a.Core.Events.coreEvents.off(e.ON_APP_EXCEPTION,this.onAppException),a.Core.Events.coreEvents.off(e.ON_APP_EXIT,this.onAppExit),d.getPageManager("MAIN").showPage("game_over"),d.getPageManager("MAIN").getPage("game_over").changeParent("body")},n.prototype.onAppException=function(a){var b=new k({lang:"err_server_generic",err:{msg:a},fatal:!0});d.getPageManager("MAIN").showPage("error",b)},n.prototype.onAppGetFocus=function(a,b){},n.prototype.onAppLoseFocus=function(a,b){},n.prototype.onAppResize=function(b,c){g.isDesktop()&&!g.isMobile()?$("#loader").css("background-image",g.defaultSettings.loadingBgImgURL):g.isPortrait()&&!g.isDesktop()?($("#loader").css("background-image",g.defaultSettings.portraitLoadingBgImgURL),$("#loader").css("background-size","contain")):g.isLandscape()&&!g.isDesktop()&&($("#loader").css("background-image",g.defaultSettings.loadingBgImgURL),$("#loader").css("background-size","contain")),g.isDeviceMobile()&&($("#rotate_mask").remove(),$("body").append("<div id='rotate_mask' style='z-index:999999999; width:500%; height:500%;position: fixed; left:0; top:0;background-color: black'></div>"),a.Core.Time.juggler.setTimeout(function(){$("#rotate_mask").animate({opacity:0},250,function(){$("#rotate_mask").remove()})},250))},n.saveAppValue=function(a,b){var c=g.launchVariables.operatorCode+"."+g.launchVariables.game_id+"."+a;localStorage.setItem(c,b.toString())},n.getValues=function(a){var b=g.launchVariables.operatorCode+"."+g.launchVariables.game_id+"."+a;return localStorage.getItem(b)},n.getAppValue=function(a,b){var c=g.launchVariables.operatorCode+"."+g.launchVariables.game_id+"."+a,d=localStorage.getItem(c);return!d&&b&&(n.saveAppValue(a,b),d=localStorage.getItem(c)),"true"==d?d=!0:"false"==d&&(d=!1),d},n}(PIXI.utils.EventEmitter);b.ApplicationBase=m}(a.Common||(a.Common={}))}(DO||(DO={}));